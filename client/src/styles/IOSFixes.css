/* IOSFixes.css - Comprehensive iOS and Safari compatibility fixes */

/* =========================
   iOS WEBKIT FIXES
   ========================= */

/* Fix for iOS momentum scrolling */
* {
  -webkit-overflow-scrolling: touch;
}

/* Prevent iOS from zooming on input focus */
input,
select,
textarea {
  font-size: 16px !important;
}

/* Fix iOS button styling */
button,
input[type="button"],
input[type="submit"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-radius: 0;
}

/* Fix for iOS safe areas */
body {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* =========================
   GRADIENT FIXES FOR SAFARI
   ========================= */

/* Ensure gradients work on Safari */
.gradient-text,
.main-page-title {
  -webkit-background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  background-clip: text !important;
}

/* =========================
   GRID LAYOUT FIXES
   ========================= */

/* Safari grid fallback */
@supports not (display: grid) {
  .hero-container,
  .platform-grid,
  .tech-grid,
  .market-stats {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
  }
}

/* =========================
   BACKDROP FILTER FIXES
   ========================= */

/* Ensure backdrop-filter works on all webkit browsers */
.top-nav,
.mobile-sticky-cta,
.floating-popup {
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

/* Fallback for browsers that don't support backdrop-filter */
@supports not ((-webkit-backdrop-filter: blur(10px)) or (backdrop-filter: blur(10px))) {
  .top-nav {
    background: rgba(255, 255, 255, 0.98) !important;
  }
  
  .mobile-sticky-cta {
    background: rgba(255, 255, 255, 0.98) !important;
  }
}

/* =========================
   TRANSFORM FIXES
   ========================= */

/* Force GPU acceleration on iOS */
.hero-right,
.chat-frame-container,
.platform-card,
.feature-card {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000px;
  perspective: 1000px;
}

/* =========================
   FLEXBOX FIXES FOR OLDER SAFARI
   ========================= */

.hero-container,
.platform-grid,
.tech-content {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
}

/* =========================
   POSITION FIXED FIXES
   ========================= */

/* Fix for position: fixed on iOS with touch */
.top-nav,
.mobile-sticky-cta {
  -webkit-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
}

/* =========================
   ANIMATION FIXES
   ========================= */

/* Ensure animations are smooth on iOS */
@-webkit-keyframes fadeInUp {
  from {
    opacity: 0;
    -webkit-transform: translateY(30px);
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    -webkit-transform: translateY(0);
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    -webkit-transform: translateY(30px);
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    -webkit-transform: translateY(0);
    transform: translateY(0);
  }
}

.animate-in {
  -webkit-animation: fadeInUp 0.6s ease forwards;
  animation: fadeInUp 0.6s ease forwards;
}

/* =========================
   IMAGE RENDERING
   ========================= */

/* Optimize image rendering on iOS */
img {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  image-rendering: -webkit-optimize-contrast;
}

/* =========================
   VIDEO/GIF RENDERING
   ========================= */

/* Ensure GIFs and videos play on iOS */
img[src$=".gif"],
video {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform;
}

/* =========================
   TEXT RENDERING
   ========================= */

/* Better text rendering on iOS */
body,
.about-page-wrapper {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* =========================
   OVERFLOW FIXES
   ========================= */

/* Prevent horizontal scroll on iOS */
html,
body,
.about-page-wrapper {
  overflow-x: hidden;
  width: 100%;
  position: relative;
}

/* =========================
   TOUCH ACTION
   ========================= */

/* Optimize touch interactions */
button,
a,
.clickable {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
  touch-action: manipulation;
}

/* =========================
   Z-INDEX CONTEXT
   ========================= */

/* Create proper stacking context on iOS */
.top-nav,
.hero-container,
.mobile-sticky-cta {
  isolation: isolate;
}

/* =========================
   MOBILE SPECIFIC FIXES
   ========================= */

@media (max-width: 768px) {
  /* Fix viewport height on iOS (address bar issue) */
  .hero-header,
  .about-page-wrapper {
    min-height: -webkit-fill-available;
    min-height: fill-available;
  }
  
  /* Improve grid rendering on mobile Safari */
  .platform-grid,
  .tech-stack-cards,
  .market-stats {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -ms-flex-direction: column;
    flex-direction: column;
  }
  
  /* Fix chat frame on iOS */
  .chat-frame-container {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    will-change: transform;
    contain: layout style paint;
  }
  
  /* Prevent Safari from adjusting text size */
  body {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
}

/* =========================
   CRITICAL PERFORMANCE FIXES
   ========================= */

/* Contain layout shifts */
.feature-card,
.metric-card,
.platform-card {
  contain: layout style;
}

/* Optimize compositing layers */
.hero-right,
.chat-frame-container {
  will-change: transform;
  contain: layout style paint;
}
