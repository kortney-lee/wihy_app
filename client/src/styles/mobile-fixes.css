/* Mobile-specific fixes for layout issues */

/* Fix any unwanted overlays or background tints */
@media (max-width: 768px) {
  /* CRITICAL: Remove horizontal scrollbar completely */
  html {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    width: 100% !important;
  }

  /* Force remove scrollbar from body */
  body {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    width: 100% !important;
  }

  /* Remove scrollbar from viewport containers */
  html, body {
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch !important;
  }

  body {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    background: #f9f9f9 !important;
    background-image: none !important;
    padding-top: 80px !important; /* Reduced from 160px - just enough for mobile header */
    margin: 0 !important;
    position: relative !important;
  }

  /* Prevent any element from causing horizontal scroll */
  * {
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  /* Target common scrollbar culprits */
  #root,
  .app,
  .App,
  .main-container,
  .content-wrapper,
  .page-container {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    width: 100% !important;
  }

  /* Hide scrollbars on mobile for chat widget and all scrollable elements */
  .chat-messages-scroll,
  .chat-messages-scroll::-webkit-scrollbar,
  *::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    background: transparent !important;
  }

  /* Hide scrollbars on Firefox mobile */
  .chat-messages-scroll,
  * {
    scrollbar-width: none !important;
    -ms-overflow-style: none !important;
  }

  /* Ensure smooth scrolling on mobile */
  .chat-messages-scroll {
    -webkit-overflow-scrolling: touch !important;
  }
}  /* Remove scrollbar from any potential wide elements */
  div, section, article, main, header, footer {
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }

  /* Override CSS variables for mobile to ensure clean look */
  :root {
    --vh-accent: #1a73e8;
    --vh-accent-2: #34a853;
    --vh-ink: #202124;
    --vh-muted: #5f6368;
    --vh-surface: #ffffff;
    --vh-surface-2: #ffffff; /* Changed from #f8fbff to pure white for mobile */
    --vh-ring: 0 0 0 3px rgba(26,115,232,.18);
  }

  /* Remove any yellow/orange overlays */
  *::before,
  *::after {
    background: none !important;
    box-shadow: none !important;
  }

  /* Ensure main app container fits properly */
  .app-container {
    padding: 10px !important;
    margin: 0 auto !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }

  /* Fix main content areas - reduce padding */
  .results-page {
    padding-top: 5px !important;
  }

  .results-container {
    padding: 10px !important;
    margin: 5px auto !important;
  }

  /* Fix text sizing for mobile readability */
  .health-info-content,
  .health-info-content pre {
    font-size: 14px !important;
    line-height: 1.6 !important;
  }

  /* Improve mobile typography */
  .results-header {
    font-size: 18px !important;
    margin-bottom: 15px !important;
  }
  
  /* News feed specific mobile fixes */
  .feeling-healthy-section {
    position: relative !important;
    top: auto !important;
    transform: none !important;
    padding-top: 0 !important;
    margin-top: 0 !important;
    height: auto !important;
    overflow: visible !important;
  }
  
  /* Ensure news feed container doesn't push content off screen */
  .news-feed-container {
    position: relative !important;
    top: auto !important;
    transform: none !important;
    margin: 0 !important;
    padding: 0 10px !important; /* Only side padding for readability */
  }
  
  /* Prevent any scroll-to-top behavior */
  .news-card {
    scroll-margin-top: 0 !important;
    transform: none !important;
  }
  
  /* Ensure smooth scrolling and no layout shifts */
  html {
    scroll-behavior: auto !important; /* Disable smooth scroll that might cause issues */
  }
  
  /* Fix any layout shifts on mobile */
  .search-landing,
  .results-page {
    min-height: 100vh !important;
    margin-top: 0 !important;
    padding-top: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* Better mobile text sizing throughout */
  h2, h3, h4, h5, h6 {
    font-size: clamp(14px, 4vw, 24px) !important;
    line-height: 1.3 !important;
  }

  /* Special styling for main title/logo - ONLY on search page, not nutrition facts */
  .search-page .search-title,
  .search-page h1 {
    font-size: clamp(1.8rem, 6vw, 2.5rem) !important;
    margin: 15px 0 25px 0 !important;
    text-align: center !important;
    line-height: 1.2 !important;
    color: #000000 !important;
    font-weight: 700 !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    background: linear-gradient(135deg, #000000 0%, #000000 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
  }

  /* Improve readability of main content */
  .markdown-content,
  .health-info-content,
  .health-info-content * {
    font-size: 15px !important;
    line-height: 1.6 !important;
  }

  /* Adjust button text size */
  .topic-button,
  .resources-list a {
    font-size: 14px !important;
  }

  /* Improve chart text */
  .quality-chart-container,
  .nutrition-chart-container {
    font-size: 13px !important;
  }

  /* Better spacing between elements */
  .health-info-card {
    margin-bottom: 15px !important;
  }

  /* Ensure news feed integrates properly with mobile layout */
  .news-feed-container {
    margin-top: 10px !important; /* Reduced from 20px to match earlier reduction */
    padding: 0 10px !important;
    max-width: 100% !important;
  }

  /* Make sure scrollable areas don't conflict */
  .search-form,
  .results-container,
  .news-feed-container {
    overflow-x: hidden !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }

  .related-topics-card,
  .resources-card {
    margin-bottom: 12px !important;
  }

  /* Ensure proper mobile padding for search container */
  .search-container-centered {
    padding: 15px 20px !important;
  }

  /* Ensure clean white backgrounds for main content areas */
  .results-page,
  .search-landing,
  .health-info-card,
  .health-info-content,
  .related-topics-card,
  .resources-card {
    background: #ffffff !important;
    background-image: none !important;
    background-color: #ffffff !important;
  }

  /* Override card gradients for mobile */
  .related-topics-card,
  .resources-card {
    background: #ffffff !important;
    border: 1px solid #e8f0fe;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  .related-topics-card h3,
  .resources-card h3 {
    background: #f8fbff !important;
    color: #1a73e8 !important;
  }

  /* Fix any dark/black overlays that might cause readability issues */
  .data-source-indicator,
  .error-source {
    background: #ffffff !important;
    color: #333333 !important;
    border: 1px solid #e8f0fe;
    border-radius: 8px;
    padding: 8px 12px;
    margin: 8px 0;
  }

  .error-source {
    background: #fef7f7 !important;
    color: #ea4335 !important;
    border-color: #fecaca;
  }

  /* Ensure proper text contrast */
  .health-info-content,
  .health-info-content *,
  .related-topics-list,
  .resources-list {
    color: #333333 !important;
    background: transparent !important;
  }

  /* Fix any modal or overlay issues */
  .modal-overlay,
  .loading-overlay {
    background: rgba(255, 255, 255, 0.95) !important;
  }

  /* Ensure proper button visibility */
  .topic-button,
  .resources-list a {
    background: #f8fbff !important;
    color: #1a73e8 !important;
    border: 1px solid #e8f0fe;
    margin-bottom: 4px;
    border-radius: 8px;
  }

  .topic-button:hover,
  .resources-list a:hover {
    background: #eef4ff !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  /* Fix search input container with animation */
  .search-input-container {
    background: 
      linear-gradient(#fff, #fff) padding-box,
      linear-gradient(90deg, #fa5f06, #ffffff, #C0C0C0, #4cbb17, #1a73e8) border-box !important;
    animation: wiH-border-sweep 2.2s linear infinite !important;
  }

  /* Remove any unwanted gradients or overlays */
  .health-info-card::before {
    display: none !important;
  }

  /* Ensure proper z-index stacking */
  .results-search-header {
    z-index: 100 !important;
    background: #ffffff !important;
  }

  .sidebar {
    z-index: 1 !important;
  }

  /* Fix any layout overflow issues */
  body,
  html {
    overflow-x: hidden !important;
  }

  .results-container,
  .search-container-centered {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }

  /* Fix search input placeholder text display */
  .search-input {
    font-size: 16px !important; /* Prevent zoom on iOS */
    padding: 12px 60px 12px 16px !important; /* More space for icons */
    width: 100% !important;
    box-sizing: border-box !important;
  }

  .search-input::placeholder {
    font-size: 16px !important;
    color: #9aa0a6 !important;
    opacity: 1 !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    overflow: hidden !important;
  }

  /* Ensure search icons don't overlap text */
  .search-icons {
    right: 8px !important;
    background-color: rgba(255, 255, 255, 0.95) !important;
  }

/* Extra small mobile devices */
@media (max-width: 480px) {
  /* Ensure even more compact layout */
  .health-info-card,
  .related-topics-card,
  .resources-card {
    margin: 0 0 12px 0 !important;
    padding: 12px !important;
  }

  /* Fix any remaining overlay issues */
  .search-icons {
    background-color: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(4px);
  }
}

/* Mobile-specific adjustments - buttons now visible like desktop */
@media (max-width: 768px) {
  /* Show search buttons on mobile - matching desktop behavior */
  .search-buttons {
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
    width: 100% !important;
    max-width: 600px !important;
    margin: 0 auto !important;
  }

  /* Ensure buttons are properly sized on mobile */
  .search-btn {
    width: 100% !important;
    padding: 14px 20px !important;
    font-size: 16px !important;
  }

  /* Hide category buttons on mobile - already handled in HealthNewsFeed.css but adding here for extra coverage */
  .news-categories {
    display: none !important;
  }

  /* Ensure news feed takes full width and starts at top */
  .feeling-healthy-section {
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }

  /* Make search container more compact when buttons are hidden */
  .search-container {
    margin-bottom: 10px !important;
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }

  /* News feed specific overflow fixes */
  .news-feed-container {
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
    padding: 8px 12px 20px 12px !important;
    margin: 20px 0 0 0 !important; /* Top margin for spacing from header, no side margins */
    box-sizing: border-box !important;
  }

  /* News grid overflow fixes */
  .news-grid {
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
    grid-template-columns: 1fr !important;
    gap: 12px !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Individual news articles */
  .news-article,
  article {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
  }

  /* News article content areas */
  .news-content,
  .news-title,
  .news-description {
    width: 100% !important;
    max-width: 100% !important;
    overflow-wrap: break-word !important;
    word-wrap: break-word !important;
    hyphens: auto !important;
  }

  /* News images */
  .news-image,
  .news-image img {
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
    object-fit: cover !important;
  }

  /* Main app container fixes */
  #root {
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }

  /* Modal Mobile Fixes */
  .photo-modal-overlay,
  .upload-modal-overlay {
    padding: 10px !important;
  }
  
  .photo-modal,
  .upload-modal-content {
    width: 95% !important;
    max-width: 420px !important;
    max-height: 90vh !important;
    border-radius: 16px !important;
    margin: 10px !important;
  }
  
  .modal-header {
    padding: 20px 20px 12px 20px !important;
  }
  
  .modal-header h2 {
    font-size: 20px !important;
  }
  
  .modal-subtitle {
    font-size: 13px !important;
  }
  
  .simple-upload-container {
    padding: 16px 20px !important;
  }
  
  .simple-search-button {
    padding: 14px 20px !important;
    font-size: 16px !important;
    min-height: 48px !important;
    border-radius: 24px !important;
  }
  
  .simple-url-section {
    padding: 0 20px 24px 20px !important;
    flex-direction: column !important;
    gap: 12px !important;
  }
  
  .simple-url-input {
    padding: 14px 18px !important;
    font-size: 16px !important;
    min-height: 48px !important;
    border-radius: 24px !important;
  }
}

@media (max-width: 480px) {
  .photo-modal,
  .upload-modal-content {
    width: 98% !important;
    margin: 5px !important;
  }
  
  .modal-header {
    padding: 16px 16px 10px 16px !important;
  }
  
  .simple-upload-container {
    padding: 12px 16px !important;
  }

  /* ===========================================
     MOBILE-SPECIFIC FIXES FOR SCREENSHOT ISSUES
     =========================================== */
  
  /* Fix 1: Login icon always visible - fixed position, above all overlays */
  .multi-auth-container.top-right {
    position: fixed !important; /* Always fixed to viewport */
    top: 20px !important;
    right: 20px !important;
    z-index: 10002 !important; /* Above news feed overlay (z-index: 1000) */
    opacity: 1 !important; /* Always visible */
    visibility: visible !important;
    pointer-events: auto !important;
  }

  /* Fix 2: News feed loading skeleton to prevent jumping under header */
  .news-feed-container:empty::before {
    content: '';
    display: block;
    width: 100%;
    height: 400px; /* Reserve space while loading */
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading-skeleton 1.5s infinite;
    border-radius: 8px;
    margin: 20px 0;
  }

  @keyframes loading-skeleton {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* News feed spacing to prevent header overlap */
  .feeling-healthy-section {
    margin-top: 100px !important; /* Space for mobile header */
    padding-top: 20px !important;
  }

  /* Ensure news cards don't get cut off */
  .news-card {
    margin-bottom: 20px !important;
  }
}