{"ast":null,"code":"import React from'react';import{Chart as ChartJS,ArcElement,Tooltip,Legend}from'chart.js';import{Doughnut}from'react-chartjs-2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(ArcElement,Tooltip,Legend);// Extract nutrition data from unified API response or legacy format\nconst extractNutritionData=(apiResponse,results,dataSource)=>{console.log('=== EXTRACTING NUTRITION DATA IN NUTRITIONCHART ===');console.log('API Response:',apiResponse);console.log('DataSource:',dataSource);// Handle unified API response first\nif(apiResponse&&apiResponse.success&&apiResponse.data){var _apiResponse$data$cha,_apiResponse$data$nut;console.log('Processing unified API nutrition data');// Use charts_data if available for direct rendering\nif((_apiResponse$data$cha=apiResponse.data.charts_data)!==null&&_apiResponse$data$cha!==void 0&&_apiResponse$data$cha.nutrition_breakdown){const chartData=apiResponse.data.charts_data.nutrition_breakdown;console.log('Using charts_data for nutrition breakdown:',chartData);return{type:'chart_data',labels:chartData.labels,values:chartData.values,colors:chartData.colors,chart_type:chartData.chart_type};}// Use nutrition facts if available\nif((_apiResponse$data$nut=apiResponse.data.nutrition)!==null&&_apiResponse$data$nut!==void 0&&_apiResponse$data$nut.facts){var _nutrition$nourish_sc,_nutrition$nourish_sc2;const nutrition=apiResponse.data.nutrition;const extractedData={type:'nutrition_facts',calories:nutrition.facts.calories_per_serving||0,protein:nutrition.facts.protein_g||0,carbs:nutrition.facts.carbs_g||0,fat:nutrition.facts.fat_g||0,fiber:nutrition.facts.fiber_g||0,sugar:nutrition.facts.sugar_g||0,sodium:nutrition.facts.sodium_mg||0,nourish_score:((_nutrition$nourish_sc=nutrition.nourish_score)===null||_nutrition$nourish_sc===void 0?void 0:_nutrition$nourish_sc.score)||0,nourish_category:((_nutrition$nourish_sc2=nutrition.nourish_score)===null||_nutrition$nourish_sc2===void 0?void 0:_nutrition$nourish_sc2.category)||'Unknown',macronutrients:nutrition.macronutrients||null};console.log('=== EXTRACTED UNIFIED NUTRITION DATA ===');console.log('Final extracted data:',extractedData);return extractedData;}}// Fallback to legacy extraction\nif(dataSource==='vnutrition'&&results){try{console.log('Processing vnutrition data source');let nutrition;if(typeof results==='string'){console.log('Parsing string results');// Check if this is markdown/formatted text instead of JSON\nif(results.startsWith('#')||results.includes('AI Chat response')){console.log('Results appear to be formatted text, not JSON nutrition data');return null;}nutrition=JSON.parse(results);}else{console.log('Using object results directly');nutrition=results;}console.log('=== RAW NUTRITION OBJECT ===');console.log('Full object:',nutrition);console.log('Object keys:',Object.keys(nutrition||{}));if(nutrition&&nutrition.found!==false){const extractedData={calories:nutrition.calories_per_serving||0,protein:nutrition.protein_g||0,carbs:nutrition.carbs_g||0,fat:nutrition.fat_g||0,fiber:nutrition.fiber_g||0,sugar:nutrition.sugar_g||0,sodium:nutrition.sodium_mg||0,novaScore:nutrition.nova_classification||1,processedLevel:nutrition.nova_description||nutrition.processed_level||'Unknown'};console.log('=== EXTRACTED DATA ===');console.log('Final extracted data:',extractedData);return extractedData;}else{var _nutrition;console.log('No valid nutrition data - found:',(_nutrition=nutrition)===null||_nutrition===void 0?void 0:_nutrition.found);return null;}}catch(error){console.error('Error parsing nutrition data:',error);console.log('This is likely because results are formatted text, not JSON nutrition data');return null;}}console.log('Not vnutrition source');return null;};const NutritionChart=_ref=>{let{apiResponse,query,results,dataSource}=_ref;// Extract nutrition data using new unified approach\nconst nutritionData=extractNutritionData(apiResponse,results,dataSource);// Only render if we have nutrition data\nif(!nutritionData){return null;}// Handle chart_data type (direct from API charts_data)\nif(nutritionData.type==='chart_data'){const chartData=nutritionData;const data={datasets:[{data:chartData.values,backgroundColor:chartData.colors,borderColor:chartData.colors.map(color=>color),borderWidth:2}],labels:chartData.labels};const options={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{padding:20,font:{size:14}}},tooltip:{callbacks:{label:function(context){const label=context.label||'';const value=context.parsed;return\"\".concat(label,\": \").concat(value,\"%\");}}}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"nutrition-chart-container\",children:[/*#__PURE__*/_jsx(\"h4\",{style:{marginBottom:'15px',color:'#666'},children:\"Nutrition Breakdown\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:'300px',height:'300px',margin:'0 auto'},children:/*#__PURE__*/_jsx(Doughnut,{data:data,options:options})})]});}// Handle nutrition_facts type (calculated from nutrition.facts)\nconst nutritionFacts=nutritionData;let protein,carbs,fat,total;if(nutritionFacts.macronutrients){// Use pre-calculated macronutrients percentages\nprotein=nutritionFacts.macronutrients.protein;carbs=nutritionFacts.macronutrients.carbs;fat=nutritionFacts.macronutrients.fat;total=protein+carbs+fat;}else{// Calculate percentages from gram values\ntotal=nutritionFacts.protein+nutritionFacts.carbs+nutritionFacts.fat;if(total>0){protein=Math.round(nutritionFacts.protein/total*100);carbs=Math.round(nutritionFacts.carbs/total*100);fat=Math.round(nutritionFacts.fat/total*100);}else{protein=carbs=fat=0;}}const{calories}=nutritionFacts;// Prepare data for the pie chart\nconst data={datasets:[{data:[protein,carbs,fat],backgroundColor:['#10B981',// Green for protein\n'#F59E0B',// Yellow for carbs  \n'#EF4444'// Red for fat\n],borderWidth:0,cutout:'60%'}]};const options={responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},tooltip:{callbacks:{label:function(context){const labels=['Protein','Carbs','Fat'];const label=labels[context.dataIndex];const value=context.parsed;const percentage=total>0?Math.round(value/total*100):0;return\"\".concat(label,\": \").concat(value,\"g (\").concat(percentage,\"%)\");}}}}};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',height:'200px',width:'200px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(Doughnut,{data:data,options:options}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.5rem',fontWeight:'bold',color:'#374151'},children:calories}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.75rem',color:'#6B7280'},children:\"Calories\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'1.2rem',marginRight:'0.5rem'},children:\"\\u26A1\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',color:'#374151',fontSize:'1rem'},children:\"Good\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',gap:'1rem',fontSize:'0.875rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.25rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',backgroundColor:'#10B981',borderRadius:'2px'}}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Protein: \",total>0?Math.round(protein/total*100):0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.25rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',backgroundColor:'#F59E0B',borderRadius:'2px'}}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Carbs: \",total>0?Math.round(carbs/total*100):0,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.25rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'12px',height:'12px',backgroundColor:'#EF4444',borderRadius:'2px'}}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Fat: \",total>0?Math.round(fat/total*100):0,\"%\"]})]})]})]})]});};export default NutritionChart;","map":{"version":3,"names":["React","Chart","ChartJS","ArcElement","Tooltip","Legend","Doughnut","jsx","_jsx","jsxs","_jsxs","register","extractNutritionData","apiResponse","results","dataSource","console","log","success","data","_apiResponse$data$cha","_apiResponse$data$nut","charts_data","nutrition_breakdown","chartData","type","labels","values","colors","chart_type","nutrition","facts","_nutrition$nourish_sc","_nutrition$nourish_sc2","extractedData","calories","calories_per_serving","protein","protein_g","carbs","carbs_g","fat","fat_g","fiber","fiber_g","sugar","sugar_g","sodium","sodium_mg","nourish_score","score","nourish_category","category","macronutrients","startsWith","includes","JSON","parse","Object","keys","found","novaScore","nova_classification","processedLevel","nova_description","processed_level","_nutrition","error","NutritionChart","_ref","query","nutritionData","datasets","backgroundColor","borderColor","map","color","borderWidth","options","responsive","maintainAspectRatio","plugins","legend","position","padding","font","size","tooltip","callbacks","label","context","value","parsed","concat","className","children","style","marginBottom","width","height","margin","nutritionFacts","total","Math","round","cutout","display","dataIndex","percentage","textAlign","top","left","transform","fontSize","fontWeight","marginTop","alignItems","justifyContent","marginRight","gap","borderRadius"],"sources":["C:/repo/wihy_ui/client/src/components/NutritionChart.tsx"],"sourcesContent":["import React from 'react';\r\nimport {\r\n  Chart as ChartJS,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport { Doughnut } from 'react-chartjs-2';\r\nimport { UnifiedResponse } from '../services/wihyAPI';\r\n\r\nChartJS.register(ArcElement, Tooltip, Legend);\r\n\r\ninterface NutritionChartProps {\r\n  apiResponse?: UnifiedResponse | any;\r\n  query?: string;\r\n  results?: string;\r\n  dataSource?: \"error\" | \"openai\" | \"local\" | \"vnutrition\" | \"wihy\";\r\n}\r\n\r\n// Extract nutrition data from unified API response or legacy format\r\nconst extractNutritionData = (apiResponse?: UnifiedResponse | any, results?: string, dataSource?: string) => {\r\n  console.log('=== EXTRACTING NUTRITION DATA IN NUTRITIONCHART ===');\r\n  console.log('API Response:', apiResponse);\r\n  console.log('DataSource:', dataSource);\r\n  \r\n  // Handle unified API response first\r\n  if (apiResponse && apiResponse.success && apiResponse.data) {\r\n    console.log('Processing unified API nutrition data');\r\n    \r\n    // Use charts_data if available for direct rendering\r\n    if (apiResponse.data.charts_data?.nutrition_breakdown) {\r\n      const chartData = apiResponse.data.charts_data.nutrition_breakdown;\r\n      console.log('Using charts_data for nutrition breakdown:', chartData);\r\n      return {\r\n        type: 'chart_data',\r\n        labels: chartData.labels,\r\n        values: chartData.values,\r\n        colors: chartData.colors,\r\n        chart_type: chartData.chart_type\r\n      };\r\n    }\r\n    \r\n    // Use nutrition facts if available\r\n    if (apiResponse.data.nutrition?.facts) {\r\n      const nutrition = apiResponse.data.nutrition;\r\n      const extractedData = {\r\n        type: 'nutrition_facts',\r\n        calories: nutrition.facts.calories_per_serving || 0,\r\n        protein: nutrition.facts.protein_g || 0,\r\n        carbs: nutrition.facts.carbs_g || 0,\r\n        fat: nutrition.facts.fat_g || 0,\r\n        fiber: nutrition.facts.fiber_g || 0,\r\n        sugar: nutrition.facts.sugar_g || 0,\r\n        sodium: nutrition.facts.sodium_mg || 0,\r\n        nourish_score: nutrition.nourish_score?.score || 0,\r\n        nourish_category: nutrition.nourish_score?.category || 'Unknown',\r\n        macronutrients: nutrition.macronutrients || null\r\n      };\r\n      \r\n      console.log('=== EXTRACTED UNIFIED NUTRITION DATA ===');\r\n      console.log('Final extracted data:', extractedData);\r\n      return extractedData;\r\n    }\r\n  }\r\n  \r\n  // Fallback to legacy extraction\r\n  if (dataSource === 'vnutrition' && results) {\r\n    try {\r\n      console.log('Processing vnutrition data source');\r\n      let nutrition;\r\n      \r\n      if (typeof results === 'string') {\r\n        console.log('Parsing string results');\r\n        \r\n        // Check if this is markdown/formatted text instead of JSON\r\n        if (results.startsWith('#') || results.includes('AI Chat response')) {\r\n          console.log('Results appear to be formatted text, not JSON nutrition data');\r\n          return null;\r\n        }\r\n        \r\n        nutrition = JSON.parse(results);\r\n      } else {\r\n        console.log('Using object results directly');\r\n        nutrition = results;\r\n      }\r\n      \r\n      console.log('=== RAW NUTRITION OBJECT ===');\r\n      console.log('Full object:', nutrition);\r\n      console.log('Object keys:', Object.keys(nutrition || {}));\r\n      \r\n      if (nutrition && nutrition.found !== false) {\r\n        const extractedData = {\r\n          calories: nutrition.calories_per_serving || 0,\r\n          protein: nutrition.protein_g || 0,\r\n          carbs: nutrition.carbs_g || 0,\r\n          fat: nutrition.fat_g || 0,\r\n          fiber: nutrition.fiber_g || 0,\r\n          sugar: nutrition.sugar_g || 0,\r\n          sodium: nutrition.sodium_mg || 0,\r\n          novaScore: nutrition.nova_classification || 1,\r\n          processedLevel: nutrition.nova_description || nutrition.processed_level || 'Unknown'\r\n        };\r\n        \r\n        console.log('=== EXTRACTED DATA ===');\r\n        console.log('Final extracted data:', extractedData);\r\n        \r\n        return extractedData;\r\n      } else {\r\n        console.log('No valid nutrition data - found:', nutrition?.found);\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error parsing nutrition data:', error);\r\n      console.log('This is likely because results are formatted text, not JSON nutrition data');\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  console.log('Not vnutrition source');\r\n  return null;\r\n};\r\n\r\nconst NutritionChart: React.FC<NutritionChartProps> = ({ apiResponse, query, results, dataSource }) => {\r\n  // Extract nutrition data using new unified approach\r\n  const nutritionData = extractNutritionData(apiResponse, results, dataSource);\r\n\r\n  // Only render if we have nutrition data\r\n  if (!nutritionData) {\r\n    return null;\r\n  }\r\n\r\n  // Handle chart_data type (direct from API charts_data)\r\n  if ((nutritionData as any).type === 'chart_data') {\r\n    const chartData = nutritionData as any;\r\n    const data = {\r\n      datasets: [\r\n        {\r\n          data: chartData.values,\r\n          backgroundColor: chartData.colors,\r\n          borderColor: chartData.colors.map((color: string) => color),\r\n          borderWidth: 2,\r\n        },\r\n      ],\r\n      labels: chartData.labels,\r\n    };\r\n\r\n    const options = {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      plugins: {\r\n        legend: {\r\n          position: 'bottom' as const,\r\n          labels: {\r\n            padding: 20,\r\n            font: {\r\n              size: 14,\r\n            },\r\n          },\r\n        },\r\n        tooltip: {\r\n          callbacks: {\r\n            label: function(context: any) {\r\n              const label = context.label || '';\r\n              const value = context.parsed;\r\n              return `${label}: ${value}%`;\r\n            },\r\n          },\r\n        },\r\n      },\r\n    };\r\n\r\n    return (\r\n      <div className=\"nutrition-chart-container\">\r\n        <h4 style={{ marginBottom: '15px', color: '#666' }}>Nutrition Breakdown</h4>\r\n        <div style={{ width: '300px', height: '300px', margin: '0 auto' }}>\r\n          <Doughnut data={data} options={options} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Handle nutrition_facts type (calculated from nutrition.facts)\r\n  const nutritionFacts = nutritionData as any;\r\n  let protein, carbs, fat, total;\r\n  \r\n  if (nutritionFacts.macronutrients) {\r\n    // Use pre-calculated macronutrients percentages\r\n    protein = nutritionFacts.macronutrients.protein;\r\n    carbs = nutritionFacts.macronutrients.carbs;\r\n    fat = nutritionFacts.macronutrients.fat;\r\n    total = protein + carbs + fat;\r\n  } else {\r\n    // Calculate percentages from gram values\r\n    total = nutritionFacts.protein + nutritionFacts.carbs + nutritionFacts.fat;\r\n    if (total > 0) {\r\n      protein = Math.round((nutritionFacts.protein / total) * 100);\r\n      carbs = Math.round((nutritionFacts.carbs / total) * 100);\r\n      fat = Math.round((nutritionFacts.fat / total) * 100);\r\n    } else {\r\n      protein = carbs = fat = 0;\r\n    }\r\n  }\r\n\r\n  const { calories } = nutritionFacts;\r\n  \r\n  // Prepare data for the pie chart\r\n  const data = {\r\n    datasets: [\r\n      {\r\n        data: [protein, carbs, fat],\r\n        backgroundColor: [\r\n          '#10B981', // Green for protein\r\n          '#F59E0B', // Yellow for carbs  \r\n          '#EF4444', // Red for fat\r\n        ],\r\n        borderWidth: 0,\r\n        cutout: '60%',\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function(context: any) {\r\n            const labels = ['Protein', 'Carbs', 'Fat'];\r\n            const label = labels[context.dataIndex];\r\n            const value = context.parsed;\r\n            const percentage = total > 0 ? Math.round((value / total) * 100) : 0;\r\n            return `${label}: ${value}g (${percentage}%)`;\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center' }}>\r\n      <div style={{ position: 'relative', height: '200px', width: '200px', margin: '0 auto' }}>\r\n        <Doughnut data={data} options={options} />\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            top: '50%',\r\n            left: '50%',\r\n            transform: 'translate(-50%, -50%)',\r\n            textAlign: 'center',\r\n          }}\r\n        >\r\n          <div style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#374151' }}>\r\n            {calories}\r\n          </div>\r\n          <div style={{ fontSize: '0.75rem', color: '#6B7280' }}>\r\n            Calories\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div style={{ marginTop: '1rem' }}>\r\n        <div style={{ \r\n          display: 'flex', \r\n          alignItems: 'center', \r\n          justifyContent: 'center',\r\n          marginBottom: '0.5rem' \r\n        }}>\r\n          <span style={{ \r\n            fontSize: '1.2rem', \r\n            marginRight: '0.5rem' \r\n          }}>\r\n            ⚡\r\n          </span>\r\n          <span style={{ \r\n            fontWeight: '500', \r\n            color: '#374151',\r\n            fontSize: '1rem'\r\n          }}>\r\n            Good\r\n          </span>\r\n        </div>\r\n        \r\n        <div style={{ \r\n          display: 'flex', \r\n          justifyContent: 'center', \r\n          gap: '1rem',\r\n          fontSize: '0.875rem'\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.25rem' }}>\r\n            <div\r\n              style={{\r\n                width: '12px',\r\n                height: '12px',\r\n                backgroundColor: '#10B981',\r\n                borderRadius: '2px',\r\n              }}\r\n            />\r\n            <span>Protein: {total > 0 ? Math.round((protein / total) * 100) : 0}%</span>\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.25rem' }}>\r\n            <div\r\n              style={{\r\n                width: '12px',\r\n                height: '12px',\r\n                backgroundColor: '#F59E0B',\r\n                borderRadius: '2px',\r\n              }}\r\n            />\r\n            <span>Carbs: {total > 0 ? Math.round((carbs / total) * 100) : 0}%</span>\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.25rem' }}>\r\n            <div\r\n              style={{\r\n                width: '12px',\r\n                height: '12px',\r\n                backgroundColor: '#EF4444',\r\n                borderRadius: '2px',\r\n              }}\r\n            />\r\n            <span>Fat: {total > 0 ? Math.round((fat / total) * 100) : 0}%</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NutritionChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}