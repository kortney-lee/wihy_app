{"ast":null,"code":"import axios from 'axios';\n\n// Update the API_URL to match your new service structure:\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// UPDATED: Backend API response types with all new fields\n\nexport const TRUSTED_DOMAINS = {\n  'nih.gov': 1,\n  'ncbi.nlm.nih.gov': 1,\n  'who.int': 1,\n  'cdc.gov': 1,\n  'fda.gov': 1,\n  'usda.gov': 1,\n  'jamanetwork.com': 1,\n  'nejm.org': 1,\n  'thelancet.com': 1,\n  'bmj.com': 1,\n  'nature.com': 1,\n  'science.org': 1,\n  'mayoclinic.org': 1,\n  'harvard.edu': 1,\n  'stanford.edu': 1,\n  'clevelandclinic.org': 1,\n  'uptodate.com': 1,\n  'cochranelibrary.com': 1,\n  'pubmed.ncbi.nlm.nih.gov': 1,\n  'medlineplus.gov': 1,\n  'livemint.com': 0.8,\n  // ADDED: LiveMint as trusted source\n  'npr.org': 0.9,\n  'reuters.com': 0.9,\n  'cnn.com': 0.8,\n  'cbsnews.com': 0.8,\n  'abcnews.com': 0.8,\n  'washingtonpost.com': 0.8,\n  'nytimes.com': 0.8\n};\nexport const NEWS_CATEGORIES = {\n  NUTRITION: 'nutrition',\n  MEDICAL: 'medical',\n  PUBLIC_HEALTH: 'health',\n  CLINICAL: 'clinical',\n  PREVENTION: 'prevention',\n  MENTAL_HEALTH: 'mental',\n  GENERAL: 'general',\n  SCIENCE: 'science',\n  TECH: 'tech',\n  POLITICAL: 'political',\n  SPORTS: 'sports',\n  ENTERTAINMENT: 'entertainment',\n  BUSINESS: 'business',\n  NATURE: 'nature'\n};\n\n// UPDATED: Enhanced article conversion with better image field mapping\nexport const fetchNewsFeed = async (categories, limit) => {\n  try {\n    var _data$articles;\n    console.log('üîç Fetching health news from backend API...', {\n      categories,\n      limit\n    });\n    const params = {\n      limit: limit || 50,\n      flat: 'true'\n    };\n    if (categories && categories.length > 0 && categories[0] !== 'all') {\n      params.category = categories[0];\n    }\n\n    // Updated endpoint path to match your RSS service\n    console.log('üì° Making request to:', `${API_URL}/news/articles`, 'with params:', params);\n    const response = await axios.get(`${API_URL}/news/articles`, {\n      params,\n      timeout: 10000,\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = response.data;\n    console.log('‚úÖ Backend API response:', {\n      success: data.success,\n      articleCount: ((_data$articles = data.articles) === null || _data$articles === void 0 ? void 0 : _data$articles.length) || 0,\n      count: data.count,\n      message: data.message,\n      debug: data.debug\n    });\n\n    // DEBUG: Log first few articles to see the actual structure\n    if (data.articles && data.articles.length > 0) {\n      console.log('üîç Sample backend article structure:', {\n        first_article_keys: Object.keys(data.articles[0]),\n        sample_article: data.articles[0],\n        media_fields: {\n          media_thumb_url: data.articles[0].media_thumb_url,\n          media_url: data.articles[0].media_url,\n          feed_image_url: data.articles[0].feed_image_url,\n          feed_thumbnail_url: data.articles[0].feed_thumbnail_url,\n          has_media: data.articles[0].has_media\n        }\n      });\n    }\n    if (!data.success) {\n      console.warn('‚ö†Ô∏è Backend returned success=false:', data.message);\n    }\n\n    // ENHANCED: Convert backend article format with better image handling\n    const articles = (data.articles || []).filter(article => article.title && article.title.trim() !== '').map((article, index) => {\n      var _article$content_enco, _article$description;\n      // DEBUG: Log image fields for first few articles\n      if (index < 3) {\n        var _article$title;\n        console.log(`üñºÔ∏è Article ${index + 1} image analysis:`, {\n          title: ((_article$title = article.title) === null || _article$title === void 0 ? void 0 : _article$title.substring(0, 50)) + '...',\n          media_thumb_url: article.media_thumb_url,\n          media_url: article.media_url,\n          has_media: article.has_media,\n          images_found: article.images_found,\n          image_sources: article.image_sources\n        });\n      }\n\n      // IMPROVED: Better image URL extraction with validation\n      const extractValidImageUrl = url => {\n        if (!url) return '';\n        const trimmed = url.trim();\n        if (trimmed === 'null' || trimmed === 'undefined' || trimmed === '' || trimmed === 'NO' || trimmed === 'NONE') return '';\n        if (trimmed.startsWith('http') || trimmed.startsWith('//')) return trimmed;\n        return '';\n      };\n\n      // Extract all possible image URLs from your RSS service\n      const mediaThumbUrl = extractValidImageUrl(article.media_thumb_url);\n      const mediaUrl = extractValidImageUrl(article.media_url);\n      const feedImageUrl = extractValidImageUrl(article.feed_image_url);\n      const feedThumbnailUrl = extractValidImageUrl(article.feed_thumbnail_url);\n\n      // Choose best available images (prefer article-specific over feed-level)\n      const thumbnailUrl = mediaThumbUrl || mediaUrl || feedThumbnailUrl || feedImageUrl;\n      const imageUrl = mediaUrl || mediaThumbUrl || feedImageUrl || feedThumbnailUrl;\n\n      // Parse boolean fields more robustly (your RSS service returns various formats)\n      const parseBoolean = value => {\n        if (typeof value === 'boolean') return value;\n        if (typeof value === 'string') {\n          const lower = value.toLowerCase();\n          return lower === 'true' || lower === '1' || lower === 'yes';\n        }\n        if (typeof value === 'number') return value === 1;\n        return false;\n      };\n      const hasMedia = parseBoolean(article.has_media) || !!(thumbnailUrl || imageUrl);\n      const hasAuthor = parseBoolean(article.has_author) || !!(article.author && article.author.trim());\n      const hasContent = parseBoolean(article.has_content) || !!(article.content_encoded && article.content_encoded.trim());\n\n      // Parse numeric fields\n      const parseNumber = value => {\n        if (typeof value === 'number') return value;\n        if (typeof value === 'string') return parseInt(value) || 0;\n        return 0;\n      };\n      return {\n        id: article.guid || `${article.feed_id}_${index}` || `article_${Date.now()}_${index}`,\n        title: article.title || 'No title',\n        summary: article.description || 'No summary available',\n        url: article.link || '#',\n        source: article.feed_title || article.author || 'Unknown Source',\n        domain: article.domain || extractDomain(article.link || ''),\n        category: article.category || 'general',\n        publishedDate: article.pubDate || article.extracted_at || new Date().toISOString(),\n        relevanceScore: calculateRelevanceScore(article.title, article.description),\n        tags: extractTags(article.title, article.description, article.image_sources),\n        // FIXED: Image and media fields with proper extraction\n        thumbnailUrl,\n        imageUrl,\n        mediaType: article.media_type || (hasMedia ? 'image' : ''),\n        mediaDescription: '',\n        // Your RSS service doesn't provide this yet\n\n        // Enhanced content fields\n        author: article.author || '',\n        fullContent: article.content_encoded || article.content || '',\n        wordCount: parseNumber(article.word_count),\n        readingTime: parseNumber(article.reading_time),\n        // Quality indicators\n        hasMedia,\n        hasAuthor,\n        contentLength: ((_article$content_enco = article.content_encoded) === null || _article$content_enco === void 0 ? void 0 : _article$content_enco.length) || ((_article$description = article.description) === null || _article$description === void 0 ? void 0 : _article$description.length) || 0,\n        // Source metadata\n        feedTitle: article.feed_title || '',\n        feedImageUrl: feedImageUrl,\n        feedThumbnailUrl: feedThumbnailUrl,\n        // Additional metadata from your RSS service\n        guid: article.guid || '',\n        commentsUrl: '',\n        // Add if your RSS service provides this\n        language: '',\n        // Add if your RSS service provides this\n        rights: '',\n        // Add if your RSS service provides this\n        extractedAt: article.extracted_at || '',\n        lastModified: ''\n      };\n    });\n    console.log('üì∞ Processed articles:', articles.length);\n    console.log('üì∏ Articles with images:', articles.filter(a => a.hasMedia).length);\n    console.log('üì∏ Articles with thumbnail URLs:', articles.filter(a => a.thumbnailUrl).length);\n    console.log('üì∏ Articles with image URLs:', articles.filter(a => a.imageUrl).length);\n    console.log('‚úçÔ∏è Articles with authors:', articles.filter(a => a.hasAuthor).length);\n\n    // Log some sample image URLs for debugging\n    const articlesWithImages = articles.filter(a => a.thumbnailUrl || a.imageUrl);\n    if (articlesWithImages.length > 0) {\n      console.log('üñºÔ∏è Sample image URLs found:', articlesWithImages.slice(0, 3).map(a => ({\n        title: a.title.substring(0, 30) + '...',\n        thumbnailUrl: a.thumbnailUrl,\n        imageUrl: a.imageUrl\n      })));\n    } else {\n      console.log('‚ùå No image URLs found in any articles');\n    }\n\n    // If no articles from flat endpoint, try the regular endpoint\n    if (articles.length === 0) {\n      var _regularData$articles;\n      console.log('üîÑ No articles from flat endpoint, trying regular endpoint...');\n      const regularResponse = await axios.get(`${API_URL}/news/articles`, {\n        params: {\n          limit: limit || 50,\n          category: (categories === null || categories === void 0 ? void 0 : categories[0]) !== 'all' ? categories === null || categories === void 0 ? void 0 : categories[0] : undefined\n        },\n        timeout: 10000\n      });\n      const regularData = regularResponse.data;\n      console.log('üì∞ Regular endpoint response:', {\n        success: regularData.success,\n        articleCount: ((_regularData$articles = regularData.articles) === null || _regularData$articles === void 0 ? void 0 : _regularData$articles.length) || 0,\n        count: regularData.count\n      });\n\n      // Process regular endpoint articles with enhanced fields\n      const regularArticles = (regularData.articles || []).filter(article => article.title && article.title.trim() !== '').map((article, index) => {\n        var _article$id, _article$feed, _article$feed2, _article$feed3, _article$feed4, _article$feed5, _article$id2;\n        return {\n          id: ((_article$id = article.id) === null || _article$id === void 0 ? void 0 : _article$id.toString()) || article.guid || `article_${Date.now()}_${index}`,\n          title: article.title || 'No title',\n          summary: article.description || article.summary || 'No summary available',\n          url: article.link || article.url || '#',\n          source: ((_article$feed = article.feed) === null || _article$feed === void 0 ? void 0 : _article$feed.title) || article.source || article.author || 'Unknown Source',\n          domain: extractDomain(article.link || article.url || ''),\n          category: ((_article$feed2 = article.feed) === null || _article$feed2 === void 0 ? void 0 : _article$feed2.category) || article.category || 'general',\n          publishedDate: article.pub_date || article.pubDate || article.created_at || new Date().toISOString(),\n          relevanceScore: calculateRelevanceScore(article.title, article.description || article.summary),\n          tags: extractTags(article.title, article.description || article.summary),\n          // Enhanced fields with fallbacks\n          thumbnailUrl: article.thumbnail_url || article.media_thumb_url || '',\n          imageUrl: article.image_url || article.media_url || '',\n          mediaType: article.media_type || 'image',\n          mediaDescription: article.media_description || '',\n          author: article.author || '',\n          fullContent: article.content || article.content_encoded || '',\n          wordCount: parseInt(article.word_count || '0') || 0,\n          readingTime: parseInt(article.reading_time || '0') || 0,\n          hasMedia: !!(article.thumbnail_url || article.image_url || article.media_thumb_url || article.media_url),\n          hasAuthor: !!(article.author && article.author.trim()),\n          contentLength: parseInt(article.content_length || '0') || 0,\n          feedTitle: ((_article$feed3 = article.feed) === null || _article$feed3 === void 0 ? void 0 : _article$feed3.title) || '',\n          feedImageUrl: ((_article$feed4 = article.feed) === null || _article$feed4 === void 0 ? void 0 : _article$feed4.image_url) || '',\n          feedThumbnailUrl: ((_article$feed5 = article.feed) === null || _article$feed5 === void 0 ? void 0 : _article$feed5.thumbnail_url) || '',\n          guid: article.guid || ((_article$id2 = article.id) === null || _article$id2 === void 0 ? void 0 : _article$id2.toString()) || '',\n          commentsUrl: article.comments_url || '',\n          language: article.language || '',\n          rights: article.rights || '',\n          extractedAt: article.extracted_at || article.created_at || '',\n          lastModified: article.last_modified || article.updated_at || ''\n        };\n      });\n      articles.push(...regularArticles);\n    }\n\n    // Categorize articles\n    const categorizedArticles = {};\n    articles.forEach(article => {\n      const category = mapBackendCategory(article.category);\n      if (!categorizedArticles[category]) {\n        categorizedArticles[category] = [];\n      }\n      categorizedArticles[category].push(article);\n    });\n    console.log('‚úÖ News feed processed successfully:', {\n      totalArticles: articles.length,\n      articlesWithImages: articles.filter(a => a.hasMedia).length,\n      articlesWithAuthors: articles.filter(a => a.hasAuthor).length,\n      categories: Object.keys(categorizedArticles),\n      categoryCount: Object.entries(categorizedArticles).map(([cat, arts]) => `${cat}: ${arts.length}`).join(', ')\n    });\n\n    // If still no articles, use fallback\n    if (articles.length === 0) {\n      console.log('üì± No articles found, using fallback...');\n      return await getFallbackNews();\n    }\n    return {\n      success: true,\n      articles: articles,\n      categories: categorizedArticles,\n      lastUpdated: new Date().toISOString(),\n      count: articles.length,\n      message: data.message || 'Health news fetched successfully from database'\n    };\n  } catch (error) {\n    var _error$response;\n    console.error('‚ùå Error fetching news feed from backend:', error);\n\n    // Check specific error types\n    if (error.code === 'ECONNREFUSED') {\n      console.log('üì± Backend connection refused, using fallback news...');\n    } else if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 500) {\n      console.log('üì± Backend server error, using fallback news...');\n    } else if (error.code === 'ENOTFOUND') {\n      console.log('üì± Backend not found, using fallback news...');\n    } else {\n      console.log('üì± Unknown error, using fallback news...', error.message);\n    }\n    const fallback = await getFallbackNews();\n    return {\n      ...fallback,\n      message: `Backend error (${error.message}). Showing sample news.`\n    };\n  }\n};\n\n// Helper function to map backend categories to frontend categories\n// Update the category mapping to match your RSS service categories:\n\nconst mapBackendCategory = backendCategory => {\n  if (!backendCategory) return 'General Health';\n  const categoryMap = {\n    'tech': 'Health Technology',\n    'technology': 'Health Technology',\n    'health': 'Public Health',\n    'medical': 'Medical Research',\n    'nutrition': 'Nutrition & Diet',\n    'diet': 'Nutrition & Diet',\n    'mental': 'Mental Health',\n    'prevention': 'Disease Prevention',\n    'clinical': 'Clinical Studies',\n    'science': 'Medical Research',\n    'business': 'Health Business',\n    'sports': 'Fitness & Sports',\n    'entertainment': 'Wellness',\n    'nature': 'Environmental Health',\n    'general': 'General Health'\n  };\n  const lowerCategory = backendCategory.toLowerCase();\n  for (const [key, value] of Object.entries(categoryMap)) {\n    if (lowerCategory.includes(key)) {\n      return value;\n    }\n  }\n  return 'General Health';\n};\n\n// ENHANCED: Updated fallback news with image URLs\nconst getFallbackNews = async () => {\n  const fallbackArticles = [{\n    id: 'fallback_1',\n    title: \"New Study Reveals Benefits of Mediterranean Diet for Heart Health\",\n    summary: \"Researchers found that following a Mediterranean diet can reduce cardiovascular disease risk by up to 30%. The study tracked over 7,000 participants for 5 years.\",\n    url: \"https://www.nih.gov/news-events/news-releases/mediterranean-diet-heart-health\",\n    source: \"NIH Health News\",\n    domain: \"nih.gov\",\n    category: \"Nutrition & Diet\",\n    publishedDate: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n    relevanceScore: 0.95,\n    tags: ['nutrition', 'heart-health', 'mediterranean-diet', 'cardiovascular'],\n    thumbnailUrl: \"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400&q=80\",\n    imageUrl: \"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&q=80\",\n    mediaType: \"image\",\n    author: \"Dr. Sarah Johnson\",\n    hasMedia: true,\n    hasAuthor: true,\n    wordCount: 150,\n    readingTime: 1,\n    contentLength: 750\n  }, {\n    id: 'fallback_2',\n    title: \"Exercise and Mental Health: The Connection You Need to Know\",\n    summary: \"New research shows that just 30 minutes of exercise daily can significantly improve mental well-being and reduce symptoms of depression and anxiety.\",\n    url: \"https://www.cdc.gov/mental-health/exercise-connection\",\n    source: \"CDC Health Updates\",\n    domain: \"cdc.gov\",\n    category: \"Mental Health\",\n    publishedDate: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),\n    relevanceScore: 0.90,\n    tags: ['mental-health', 'exercise', 'wellness', 'depression'],\n    thumbnailUrl: \"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&q=80\",\n    imageUrl: \"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&q=80\",\n    mediaType: \"image\",\n    author: \"Dr. Michael Chen\",\n    hasMedia: true,\n    hasAuthor: true,\n    wordCount: 180,\n    readingTime: 1,\n    contentLength: 900\n  }, {\n    id: 'fallback_3',\n    title: \"The Importance of Sleep for Immune System Function\",\n    summary: \"Studies demonstrate that quality sleep is crucial for maintaining a strong immune system. Adults need 7-9 hours of sleep per night for optimal health.\",\n    url: \"https://www.nih.gov/news-events/sleep-immune-system\",\n    source: \"Sleep Health Research\",\n    domain: \"nih.gov\",\n    category: \"General Health\",\n    publishedDate: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),\n    relevanceScore: 0.85,\n    tags: ['sleep', 'immune-system', 'health', 'wellness'],\n    thumbnailUrl: \"https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?w=400&q=80\",\n    imageUrl: \"https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?w=800&q=80\",\n    mediaType: \"image\",\n    author: \"Dr. Lisa Rodriguez\",\n    hasMedia: true,\n    hasAuthor: true,\n    wordCount: 200,\n    readingTime: 1,\n    contentLength: 1000\n  }, {\n    id: 'fallback_4',\n    title: \"Breakthrough in Cancer Research: New Treatment Shows Promise\",\n    summary: \"Scientists have developed a new immunotherapy approach that shows remarkable results in clinical trials, offering hope for difficult-to-treat cancers.\",\n    url: \"https://www.nih.gov/news-events/cancer-breakthrough-2024\",\n    source: \"Medical Research Today\",\n    domain: \"nih.gov\",\n    category: \"Medical Research\",\n    publishedDate: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),\n    relevanceScore: 0.98,\n    tags: ['cancer', 'research', 'immunotherapy', 'clinical-trials'],\n    thumbnailUrl: \"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=400&q=80\",\n    imageUrl: \"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=800&q=80\",\n    mediaType: \"image\",\n    author: \"Dr. Robert Kim\",\n    hasMedia: true,\n    hasAuthor: true,\n    wordCount: 250,\n    readingTime: 2,\n    contentLength: 1250\n  }, {\n    id: 'fallback_5',\n    title: \"Preventive Care: Early Detection Saves Lives\",\n    summary: \"Regular health screenings can detect potential health issues before they become serious problems. Learn what screenings you need by age.\",\n    url: \"https://www.cdc.gov/prevention/early-detection\",\n    source: \"CDC Prevention Guidelines\",\n    domain: \"cdc.gov\",\n    category: \"Disease Prevention\",\n    publishedDate: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),\n    relevanceScore: 0.80,\n    tags: ['prevention', 'screening', 'early-detection', 'health-checkup'],\n    thumbnailUrl: \"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&q=80\",\n    imageUrl: \"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=800&q=80\",\n    mediaType: \"image\",\n    author: \"Dr. Amanda White\",\n    hasMedia: true,\n    hasAuthor: true,\n    wordCount: 160,\n    readingTime: 1,\n    contentLength: 800\n  }];\n\n  // Categorize fallback articles\n  const categorizedArticles = {};\n  fallbackArticles.forEach(article => {\n    if (!categorizedArticles[article.category]) {\n      categorizedArticles[article.category] = [];\n    }\n    categorizedArticles[article.category].push(article);\n  });\n  return {\n    success: true,\n    articles: fallbackArticles,\n    categories: categorizedArticles,\n    lastUpdated: new Date().toISOString(),\n    count: fallbackArticles.length,\n    message: 'Using sample health news (backend unavailable)'\n  };\n};\n\n// Rest of helper functions remain the same but with enhanced logging...\nconst extractDomain = url => {\n  try {\n    return new URL(url).hostname.toLowerCase();\n  } catch {\n    return 'unknown';\n  }\n};\nconst calculateRelevanceScore = (title = '', description = '') => {\n  const content = `${title} ${description}`.toLowerCase();\n  const healthKeywords = ['health', 'medical', 'wellness', 'fitness', 'nutrition', 'diet', 'exercise', 'mental health', 'disease', 'treatment', 'research', 'study'];\n  const matchingKeywords = healthKeywords.filter(keyword => content.includes(keyword));\n  let score = 0.5;\n  score += matchingKeywords.length * 0.08;\n  return Math.min(score, 1.0);\n};\n\n// Update the extractTags function signature to handle the optional parameter:\n\nconst extractTags = (title = '', description = '', existingTags) => {\n  const content = `${title} ${description}`.toLowerCase();\n  const tags = [];\n\n  // Only process existingTags if it's provided and is a string\n  if (existingTags && typeof existingTags === 'string') {\n    try {\n      const parsedTags = existingTags.split(',').map(tag => tag.trim()).filter(tag => tag.length > 0);\n      tags.push(...parsedTags);\n    } catch (e) {\n      // Continue with keyword extraction\n    }\n  }\n  const tagKeywords = ['health', 'medical', 'nutrition', 'diet', 'fitness', 'exercise', 'mental-health', 'wellness', 'prevention', 'treatment', 'research', 'study', 'clinical', 'vaccine', 'medicine', 'hospital', 'doctor', 'heart', 'cancer', 'diabetes', 'sleep', 'immune', 'therapy'];\n  tagKeywords.forEach(keyword => {\n    if (content.includes(keyword.replace('-', ' ')) && !tags.includes(keyword)) {\n      tags.push(keyword);\n    }\n  });\n  return tags.slice(0, 5);\n};\n\n// ENHANCED: Updated utility functions with image support\nexport const formatArticleForDisplay = article => {\n  return {\n    ...article,\n    formattedDate: formatTimeAgo(article.publishedDate),\n    isTrusted: isTrustedDomain(article.url),\n    relevancePercentage: Math.round(article.relevanceScore * 100),\n    shortSummary: article.summary.length > 150 ? article.summary.substring(0, 150) + '...' : article.summary,\n    // ADDED: Image display helpers\n    displayImage: article.thumbnailUrl || article.imageUrl || article.feedThumbnailUrl || article.feedImageUrl || '',\n    hasValidImage: !!(article.thumbnailUrl || article.imageUrl),\n    // ADDED: Content quality indicators\n    qualityScore: calculateQualityScore(article),\n    readingTimeText: article.readingTime ? `${article.readingTime} min read` : 'Quick read'\n  };\n};\n\n// ADDED: Calculate article quality score\nconst calculateQualityScore = article => {\n  let score = 0;\n  if (article.hasAuthor) score += 0.2;\n  if (article.hasMedia) score += 0.2;\n  if (article.wordCount && article.wordCount > 100) score += 0.2;\n  if (article.contentLength && article.contentLength > 500) score += 0.2;\n  if (isTrustedDomain(article.url)) score += 0.2;\n  return Math.min(score, 1.0);\n};\n\n// Add these functions before the getRSSServiceStats function:\n\nexport const getRSSFeeds = async () => {\n  try {\n    console.log('üì° Fetching RSS feeds...');\n    const response = await axios.get(`${API_URL}/news/feeds`, {\n      timeout: 10000\n    });\n    return {\n      success: response.data.success,\n      feeds: response.data.feeds || [],\n      message: response.data.message\n    };\n  } catch (error) {\n    console.error('‚ùå Error fetching RSS feeds:', error);\n    return {\n      success: false,\n      message: 'Error fetching RSS feeds'\n    };\n  }\n};\nexport const seedRSSFeeds = async () => {\n  try {\n    console.log('üå± Seeding RSS feeds...');\n    const response = await axios.post(`${API_URL}/news/seed`, {}, {\n      timeout: 30000\n    });\n    return {\n      success: response.data.success,\n      message: response.data.message,\n      feeds_added: response.data.feeds_added\n    };\n  } catch (error) {\n    console.error('‚ùå Error seeding RSS feeds:', error);\n    return {\n      success: false,\n      message: 'Error seeding RSS feeds'\n    };\n  }\n};\n\n// Add this new function to get backend RSS service status:\n\nexport const getRSSServiceStats = async () => {\n  try {\n    var _healthResponse$data, _healthResponse$data$, _feedsResponse$data, _feedsResponse$data2, _feedsResponse$data2$, _feedsResponse$data2$2, _pollingResponse$data, _pollingResponse$data2, _pollingResponse$data3, _pollingResponse$data4, _pollingResponse$data5;\n    console.log('üìä Fetching RSS service stats...');\n\n    // Get RSS controller health\n    const healthResponse = await axios.get(`${API_URL}/news/debug/health`, {\n      timeout: 5000\n    });\n\n    // Get feeds info\n    const feedsResponse = await axios.get(`${API_URL}/news/feeds`, {\n      timeout: 5000\n    });\n\n    // Get polling status\n    const pollingResponse = await axios.get(`${API_URL}/news/debug/polling-status`, {\n      timeout: 5000\n    });\n    return {\n      success: true,\n      rss_stats: {\n        controller_initialized: ((_healthResponse$data = healthResponse.data) === null || _healthResponse$data === void 0 ? void 0 : (_healthResponse$data$ = _healthResponse$data.status) === null || _healthResponse$data$ === void 0 ? void 0 : _healthResponse$data$.is_initialized) || false,\n        total_feeds: ((_feedsResponse$data = feedsResponse.data) === null || _feedsResponse$data === void 0 ? void 0 : _feedsResponse$data.count) || 0,\n        active_feeds: ((_feedsResponse$data2 = feedsResponse.data) === null || _feedsResponse$data2 === void 0 ? void 0 : (_feedsResponse$data2$ = _feedsResponse$data2.feeds) === null || _feedsResponse$data2$ === void 0 ? void 0 : (_feedsResponse$data2$2 = _feedsResponse$data2$.filter(f => f.is_active)) === null || _feedsResponse$data2$2 === void 0 ? void 0 : _feedsResponse$data2$2.length) || 0,\n        last_poll: ((_pollingResponse$data = pollingResponse.data) === null || _pollingResponse$data === void 0 ? void 0 : (_pollingResponse$data2 = _pollingResponse$data.status) === null || _pollingResponse$data2 === void 0 ? void 0 : (_pollingResponse$data3 = _pollingResponse$data2.polling_details) === null || _pollingResponse$data3 === void 0 ? void 0 : _pollingResponse$data3.last_run) || 'never',\n        polling_active: ((_pollingResponse$data4 = pollingResponse.data) === null || _pollingResponse$data4 === void 0 ? void 0 : (_pollingResponse$data5 = _pollingResponse$data4.status) === null || _pollingResponse$data5 === void 0 ? void 0 : _pollingResponse$data5.polling_active) || false,\n        articles_count: 0 // Will be filled by articles endpoint\n      }\n    };\n  } catch (error) {\n    console.error('‚ùå Error fetching RSS stats:', error);\n    return {\n      success: false,\n      message: 'Error fetching RSS service statistics'\n    };\n  }\n};\n\n// Add these missing utility functions at the end of the file:\n\n// Format time ago utility\nexport const formatTimeAgo = dateString => {\n  try {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffInMs = now.getTime() - date.getTime();\n    const diffInMinutes = Math.floor(diffInMs / (1000 * 60));\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInDays > 0) {\n      return diffInDays === 1 ? '1 day ago' : `${diffInDays} days ago`;\n    } else if (diffInHours > 0) {\n      return diffInHours === 1 ? '1 hour ago' : `${diffInHours} hours ago`;\n    } else if (diffInMinutes > 0) {\n      return diffInMinutes === 1 ? '1 minute ago' : `${diffInMinutes} minutes ago`;\n    } else {\n      return 'Just now';\n    }\n  } catch (error) {\n    return 'Unknown';\n  }\n};\n\n// Check if domain is trusted\nexport const isTrustedDomain = url => {\n  try {\n    const domain = new URL(url).hostname.toLowerCase().replace('www.', '');\n    return domain in TRUSTED_DOMAINS;\n  } catch (error) {\n    return false;\n  }\n};\n\n// Get trusted domain score\nexport const getTrustedDomainScore = url => {\n  try {\n    const domain = new URL(url).hostname.toLowerCase().replace('www.', '');\n    return TRUSTED_DOMAINS[domain] || 0;\n  } catch (error) {\n    return 0;\n  }\n};\n\n// Add these type exports at the top after the existing interfaces:","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","TRUSTED_DOMAINS","NEWS_CATEGORIES","NUTRITION","MEDICAL","PUBLIC_HEALTH","CLINICAL","PREVENTION","MENTAL_HEALTH","GENERAL","SCIENCE","TECH","POLITICAL","SPORTS","ENTERTAINMENT","BUSINESS","NATURE","fetchNewsFeed","categories","limit","_data$articles","console","log","params","flat","length","category","response","get","timeout","headers","data","success","articleCount","articles","count","message","debug","first_article_keys","Object","keys","sample_article","media_fields","media_thumb_url","media_url","feed_image_url","feed_thumbnail_url","has_media","warn","filter","article","title","trim","map","index","_article$content_enco","_article$description","_article$title","substring","images_found","image_sources","extractValidImageUrl","url","trimmed","startsWith","mediaThumbUrl","mediaUrl","feedImageUrl","feedThumbnailUrl","thumbnailUrl","imageUrl","parseBoolean","value","lower","toLowerCase","hasMedia","hasAuthor","has_author","author","hasContent","has_content","content_encoded","parseNumber","parseInt","id","guid","feed_id","Date","now","summary","description","link","source","feed_title","domain","extractDomain","publishedDate","pubDate","extracted_at","toISOString","relevanceScore","calculateRelevanceScore","tags","extractTags","mediaType","media_type","mediaDescription","fullContent","content","wordCount","word_count","readingTime","reading_time","contentLength","feedTitle","commentsUrl","language","rights","extractedAt","lastModified","a","articlesWithImages","slice","_regularData$articles","regularResponse","undefined","regularData","regularArticles","_article$id","_article$feed","_article$feed2","_article$feed3","_article$feed4","_article$feed5","_article$id2","toString","feed","pub_date","created_at","thumbnail_url","image_url","media_description","content_length","comments_url","last_modified","updated_at","push","categorizedArticles","forEach","mapBackendCategory","totalArticles","articlesWithAuthors","categoryCount","entries","cat","arts","join","getFallbackNews","lastUpdated","error","_error$response","code","status","fallback","backendCategory","categoryMap","lowerCategory","key","includes","fallbackArticles","URL","hostname","healthKeywords","matchingKeywords","keyword","score","Math","min","existingTags","parsedTags","split","tag","e","tagKeywords","replace","formatArticleForDisplay","formattedDate","formatTimeAgo","isTrusted","isTrustedDomain","relevancePercentage","round","shortSummary","displayImage","hasValidImage","qualityScore","calculateQualityScore","readingTimeText","getRSSFeeds","feeds","seedRSSFeeds","post","feeds_added","getRSSServiceStats","_healthResponse$data","_healthResponse$data$","_feedsResponse$data","_feedsResponse$data2","_feedsResponse$data2$","_feedsResponse$data2$2","_pollingResponse$data","_pollingResponse$data2","_pollingResponse$data3","_pollingResponse$data4","_pollingResponse$data5","healthResponse","feedsResponse","pollingResponse","rss_stats","controller_initialized","is_initialized","total_feeds","active_feeds","f","is_active","last_poll","polling_details","last_run","polling_active","articles_count","dateString","date","diffInMs","getTime","diffInMinutes","floor","diffInHours","diffInDays","getTrustedDomainScore"],"sources":["C:/vHealth/vhealth/client/src/services/newsService.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Update the API_URL to match your new service structure:\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nexport interface NewsArticle {\r\n  id: string;\r\n  title: string;\r\n  summary: string;\r\n  url: string;\r\n  source: string;\r\n  domain: string;\r\n  category: string;\r\n  publishedDate: string;\r\n  relevanceScore: number;\r\n  tags: string[];\r\n  // ADDED: New image and media fields\r\n  thumbnailUrl?: string;\r\n  imageUrl?: string;\r\n  mediaType?: string;\r\n  mediaDescription?: string;\r\n  // ADDED: Enhanced content fields\r\n  author?: string;\r\n  fullContent?: string;\r\n  wordCount?: number;\r\n  readingTime?: number;\r\n  // ADDED: Quality indicators\r\n  hasMedia: boolean;\r\n  hasAuthor: boolean;\r\n  contentLength?: number;\r\n  // ADDED: Source metadata\r\n  feedTitle?: string;\r\n  feedImageUrl?: string;\r\n  feedThumbnailUrl?: string;\r\n  // ADDED: Additional metadata\r\n  guid?: string;\r\n  commentsUrl?: string;\r\n  language?: string;\r\n  rights?: string;\r\n  extractedAt?: string;\r\n  lastModified?: string;\r\n}\r\n\r\nexport interface NewsFeedResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  articles?: NewsArticle[];\r\n  categories?: Record<string, NewsArticle[]>;\r\n  lastUpdated?: string;\r\n  count?: number;\r\n}\r\n\r\n// UPDATED: Backend API response types with all new fields\r\ninterface BackendArticle {\r\n  // Core article fields (from your RSS service)\r\n  title?: string;\r\n  description?: string;\r\n  link?: string;\r\n  author?: string;\r\n  pubDate?: string;\r\n  guid?: string;\r\n  \r\n  // Feed metadata\r\n  feed_id?: number;\r\n  feed_title?: string;\r\n  feed_url?: string;\r\n  category?: string;\r\n  country_code?: string;\r\n  \r\n  // Image fields (exactly as your RSS service returns them)\r\n  media_url?: string;\r\n  media_thumb_url?: string;\r\n  media_type?: string;\r\n  has_media?: boolean | string;\r\n  \r\n  // Feed-level images\r\n  feed_image_url?: string;\r\n  feed_thumbnail_url?: string;\r\n  \r\n  // Enhanced fields from your RSS parser\r\n  content?: string;\r\n  content_encoded?: string;\r\n  word_count?: number | string;\r\n  reading_time?: number | string;\r\n  has_author?: boolean | string;\r\n  has_content?: boolean | string;\r\n  \r\n  // Metadata\r\n  extracted_at?: string;\r\n  time_ago?: string;\r\n  content_quality?: string;\r\n  completeness?: string;\r\n  domain?: string;\r\n  is_recent?: boolean;\r\n  images_found?: number;\r\n  image_sources?: string;\r\n  all_image_urls?: string[];\r\n}\r\n\r\ninterface BackendArticlesResponse {\r\n  success: boolean;\r\n  message?: string;\r\n  articles: BackendArticle[];\r\n  count: number;\r\n  debug?: any;\r\n}\r\n\r\nexport const TRUSTED_DOMAINS: Record<string, number> = {\r\n  'nih.gov': 1,\r\n  'ncbi.nlm.nih.gov': 1,\r\n  'who.int': 1,\r\n  'cdc.gov': 1,\r\n  'fda.gov': 1,\r\n  'usda.gov': 1,\r\n  'jamanetwork.com': 1,\r\n  'nejm.org': 1,\r\n  'thelancet.com': 1,\r\n  'bmj.com': 1,\r\n  'nature.com': 1,\r\n  'science.org': 1,\r\n  'mayoclinic.org': 1,\r\n  'harvard.edu': 1,\r\n  'stanford.edu': 1,\r\n  'clevelandclinic.org': 1,\r\n  'uptodate.com': 1,\r\n  'cochranelibrary.com': 1,\r\n  'pubmed.ncbi.nlm.nih.gov': 1,\r\n  'medlineplus.gov': 1,\r\n  'livemint.com': 0.8, // ADDED: LiveMint as trusted source\r\n  'npr.org': 0.9,\r\n  'reuters.com': 0.9,\r\n  'cnn.com': 0.8,\r\n  'cbsnews.com': 0.8,\r\n  'abcnews.com': 0.8,\r\n  'washingtonpost.com': 0.8,\r\n  'nytimes.com': 0.8\r\n};\r\n\r\nexport const NEWS_CATEGORIES = {\r\n  NUTRITION: 'nutrition',\r\n  MEDICAL: 'medical',\r\n  PUBLIC_HEALTH: 'health',\r\n  CLINICAL: 'clinical',\r\n  PREVENTION: 'prevention',\r\n  MENTAL_HEALTH: 'mental',\r\n  GENERAL: 'general',\r\n  SCIENCE: 'science',\r\n  TECH: 'tech',\r\n  POLITICAL: 'political',\r\n  SPORTS: 'sports',\r\n  ENTERTAINMENT: 'entertainment',\r\n  BUSINESS: 'business',\r\n  NATURE: 'nature'\r\n};\r\n\r\n// UPDATED: Enhanced article conversion with better image field mapping\r\nexport const fetchNewsFeed = async (categories?: string[], limit?: number): Promise<NewsFeedResponse> => {\r\n  try {\r\n    console.log('üîç Fetching health news from backend API...', { categories, limit });\r\n    \r\n    const params: any = {\r\n      limit: limit || 50,\r\n      flat: 'true'\r\n    };\r\n    \r\n    if (categories && categories.length > 0 && categories[0] !== 'all') {\r\n      params.category = categories[0];\r\n    }\r\n    \r\n    // Updated endpoint path to match your RSS service\r\n    console.log('üì° Making request to:', `${API_URL}/news/articles`, 'with params:', params);\r\n    \r\n    const response = await axios.get<BackendArticlesResponse>(`${API_URL}/news/articles`, {\r\n      params,\r\n      timeout: 10000,\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    const data = response.data;\r\n    \r\n    console.log('‚úÖ Backend API response:', {\r\n      success: data.success,\r\n      articleCount: data.articles?.length || 0,\r\n      count: data.count,\r\n      message: data.message,\r\n      debug: data.debug\r\n    });\r\n\r\n    // DEBUG: Log first few articles to see the actual structure\r\n    if (data.articles && data.articles.length > 0) {\r\n      console.log('üîç Sample backend article structure:', {\r\n        first_article_keys: Object.keys(data.articles[0]),\r\n        sample_article: data.articles[0],\r\n        media_fields: {\r\n          media_thumb_url: data.articles[0].media_thumb_url,\r\n          media_url: data.articles[0].media_url,\r\n          feed_image_url: data.articles[0].feed_image_url,\r\n          feed_thumbnail_url: data.articles[0].feed_thumbnail_url,\r\n          has_media: data.articles[0].has_media\r\n        }\r\n      });\r\n    }\r\n    \r\n    if (!data.success) {\r\n      console.warn('‚ö†Ô∏è Backend returned success=false:', data.message);\r\n    }\r\n    \r\n    // ENHANCED: Convert backend article format with better image handling\r\n    const articles: NewsArticle[] = (data.articles || [])\r\n      .filter(article => article.title && article.title.trim() !== '')\r\n      .map((article: BackendArticle, index: number) => {\r\n        \r\n        // DEBUG: Log image fields for first few articles\r\n        if (index < 3) {\r\n          console.log(`üñºÔ∏è Article ${index + 1} image analysis:`, {\r\n            title: article.title?.substring(0, 50) + '...',\r\n            media_thumb_url: article.media_thumb_url,\r\n            media_url: article.media_url,\r\n            has_media: article.has_media,\r\n            images_found: article.images_found,\r\n            image_sources: article.image_sources\r\n          });\r\n        }\r\n        \r\n        // IMPROVED: Better image URL extraction with validation\r\n        const extractValidImageUrl = (url: string | undefined): string => {\r\n          if (!url) return '';\r\n          const trimmed = url.trim();\r\n          if (trimmed === 'null' || trimmed === 'undefined' || trimmed === '' || trimmed === 'NO' || trimmed === 'NONE') return '';\r\n          if (trimmed.startsWith('http') || trimmed.startsWith('//')) return trimmed;\r\n          return '';\r\n        };\r\n        \r\n        // Extract all possible image URLs from your RSS service\r\n        const mediaThumbUrl = extractValidImageUrl(article.media_thumb_url);\r\n        const mediaUrl = extractValidImageUrl(article.media_url);\r\n        const feedImageUrl = extractValidImageUrl(article.feed_image_url);\r\n        const feedThumbnailUrl = extractValidImageUrl(article.feed_thumbnail_url);\r\n        \r\n        // Choose best available images (prefer article-specific over feed-level)\r\n        const thumbnailUrl = mediaThumbUrl || mediaUrl || feedThumbnailUrl || feedImageUrl;\r\n        const imageUrl = mediaUrl || mediaThumbUrl || feedImageUrl || feedThumbnailUrl;\r\n        \r\n        // Parse boolean fields more robustly (your RSS service returns various formats)\r\n        const parseBoolean = (value: any): boolean => {\r\n          if (typeof value === 'boolean') return value;\r\n          if (typeof value === 'string') {\r\n            const lower = value.toLowerCase();\r\n            return lower === 'true' || lower === '1' || lower === 'yes';\r\n          }\r\n          if (typeof value === 'number') return value === 1;\r\n          return false;\r\n        };\r\n        \r\n        const hasMedia = parseBoolean(article.has_media) || !!(thumbnailUrl || imageUrl);\r\n        const hasAuthor = parseBoolean(article.has_author) || !!(article.author && article.author.trim());\r\n        const hasContent = parseBoolean(article.has_content) || !!(article.content_encoded && article.content_encoded.trim());\r\n        \r\n        // Parse numeric fields\r\n        const parseNumber = (value: any): number => {\r\n          if (typeof value === 'number') return value;\r\n          if (typeof value === 'string') return parseInt(value) || 0;\r\n          return 0;\r\n        };\r\n        \r\n        return {\r\n          id: article.guid || `${article.feed_id}_${index}` || `article_${Date.now()}_${index}`,\r\n          title: article.title || 'No title',\r\n          summary: article.description || 'No summary available',\r\n          url: article.link || '#',\r\n          source: article.feed_title || article.author || 'Unknown Source',\r\n          domain: article.domain || extractDomain(article.link || ''),\r\n          category: article.category || 'general',\r\n          publishedDate: article.pubDate || article.extracted_at || new Date().toISOString(),\r\n          relevanceScore: calculateRelevanceScore(article.title, article.description),\r\n          tags: extractTags(article.title, article.description, article.image_sources),\r\n          \r\n          // FIXED: Image and media fields with proper extraction\r\n          thumbnailUrl,\r\n          imageUrl,\r\n          mediaType: article.media_type || (hasMedia ? 'image' : ''),\r\n          mediaDescription: '', // Your RSS service doesn't provide this yet\r\n          \r\n          // Enhanced content fields\r\n          author: article.author || '',\r\n          fullContent: article.content_encoded || article.content || '',\r\n          wordCount: parseNumber(article.word_count),\r\n          readingTime: parseNumber(article.reading_time),\r\n          \r\n          // Quality indicators\r\n          hasMedia,\r\n          hasAuthor,\r\n          contentLength: article.content_encoded?.length || article.description?.length || 0,\r\n          \r\n          // Source metadata\r\n          feedTitle: article.feed_title || '',\r\n          feedImageUrl: feedImageUrl,\r\n          feedThumbnailUrl: feedThumbnailUrl,\r\n          \r\n          // Additional metadata from your RSS service\r\n          guid: article.guid || '',\r\n          commentsUrl: '', // Add if your RSS service provides this\r\n          language: '', // Add if your RSS service provides this\r\n          rights: '', // Add if your RSS service provides this\r\n          extractedAt: article.extracted_at || '',\r\n          lastModified: ''\r\n        };\r\n      });\r\n    \r\n    console.log('üì∞ Processed articles:', articles.length);\r\n    console.log('üì∏ Articles with images:', articles.filter(a => a.hasMedia).length);\r\n    console.log('üì∏ Articles with thumbnail URLs:', articles.filter(a => a.thumbnailUrl).length);\r\n    console.log('üì∏ Articles with image URLs:', articles.filter(a => a.imageUrl).length);\r\n    console.log('‚úçÔ∏è Articles with authors:', articles.filter(a => a.hasAuthor).length);\r\n    \r\n    // Log some sample image URLs for debugging\r\n    const articlesWithImages = articles.filter(a => a.thumbnailUrl || a.imageUrl);\r\n    if (articlesWithImages.length > 0) {\r\n      console.log('üñºÔ∏è Sample image URLs found:', articlesWithImages.slice(0, 3).map(a => ({\r\n        title: a.title.substring(0, 30) + '...',\r\n        thumbnailUrl: a.thumbnailUrl,\r\n        imageUrl: a.imageUrl\r\n      })));\r\n    } else {\r\n      console.log('‚ùå No image URLs found in any articles');\r\n    }\r\n\r\n    // If no articles from flat endpoint, try the regular endpoint\r\n    if (articles.length === 0) {\r\n      console.log('üîÑ No articles from flat endpoint, trying regular endpoint...');\r\n      \r\n      const regularResponse = await axios.get<BackendArticlesResponse>(`${API_URL}/news/articles`, {\r\n        params: {\r\n          limit: limit || 50,\r\n          category: categories?.[0] !== 'all' ? categories?.[0] : undefined\r\n        },\r\n        timeout: 10000\r\n      });\r\n      \r\n      const regularData = regularResponse.data;\r\n      console.log('üì∞ Regular endpoint response:', {\r\n        success: regularData.success,\r\n        articleCount: regularData.articles?.length || 0,\r\n        count: regularData.count\r\n      });\r\n      \r\n      // Process regular endpoint articles with enhanced fields\r\n      const regularArticles: NewsArticle[] = (regularData.articles || [])\r\n        .filter(article => article.title && article.title.trim() !== '')\r\n        .map((article: any, index: number) => ({\r\n          id: article.id?.toString() || article.guid || `article_${Date.now()}_${index}`,\r\n          title: article.title || 'No title',\r\n          summary: article.description || article.summary || 'No summary available',\r\n          url: article.link || article.url || '#',\r\n          source: article.feed?.title || article.source || article.author || 'Unknown Source',\r\n          domain: extractDomain(article.link || article.url || ''),\r\n          category: article.feed?.category || article.category || 'general',\r\n          publishedDate: article.pub_date || article.pubDate || article.created_at || new Date().toISOString(),\r\n          relevanceScore: calculateRelevanceScore(article.title, article.description || article.summary),\r\n          tags: extractTags(article.title, article.description || article.summary),\r\n          \r\n          // Enhanced fields with fallbacks\r\n          thumbnailUrl: article.thumbnail_url || article.media_thumb_url || '',\r\n          imageUrl: article.image_url || article.media_url || '',\r\n          mediaType: article.media_type || 'image',\r\n          mediaDescription: article.media_description || '',\r\n          author: article.author || '',\r\n          fullContent: article.content || article.content_encoded || '',\r\n          wordCount: parseInt(article.word_count || '0') || 0,\r\n          readingTime: parseInt(article.reading_time || '0') || 0,\r\n          hasMedia: !!(article.thumbnail_url || article.image_url || article.media_thumb_url || article.media_url),\r\n          hasAuthor: !!(article.author && article.author.trim()),\r\n          contentLength: parseInt(article.content_length || '0') || 0,\r\n          feedTitle: article.feed?.title || '',\r\n          feedImageUrl: article.feed?.image_url || '',\r\n          feedThumbnailUrl: article.feed?.thumbnail_url || '',\r\n          guid: article.guid || article.id?.toString() || '',\r\n          commentsUrl: article.comments_url || '',\r\n          language: article.language || '',\r\n          rights: article.rights || '',\r\n          extractedAt: article.extracted_at || article.created_at || '',\r\n          lastModified: article.last_modified || article.updated_at || ''\r\n        }));\r\n      \r\n      articles.push(...regularArticles);\r\n    }\r\n    \r\n    // Categorize articles\r\n    const categorizedArticles: Record<string, NewsArticle[]> = {};\r\n    articles.forEach(article => {\r\n      const category = mapBackendCategory(article.category);\r\n      if (!categorizedArticles[category]) {\r\n        categorizedArticles[category] = [];\r\n      }\r\n      categorizedArticles[category].push(article);\r\n    });\r\n    \r\n    console.log('‚úÖ News feed processed successfully:', {\r\n      totalArticles: articles.length,\r\n      articlesWithImages: articles.filter(a => a.hasMedia).length,\r\n      articlesWithAuthors: articles.filter(a => a.hasAuthor).length,\r\n      categories: Object.keys(categorizedArticles),\r\n      categoryCount: Object.entries(categorizedArticles).map(([cat, arts]) => `${cat}: ${arts.length}`).join(', ')\r\n    });\r\n    \r\n    // If still no articles, use fallback\r\n    if (articles.length === 0) {\r\n      console.log('üì± No articles found, using fallback...');\r\n      return await getFallbackNews();\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      articles: articles,\r\n      categories: categorizedArticles,\r\n      lastUpdated: new Date().toISOString(),\r\n      count: articles.length,\r\n      message: data.message || 'Health news fetched successfully from database'\r\n    };\r\n    \r\n  } catch (error: any) {\r\n    console.error('‚ùå Error fetching news feed from backend:', error);\r\n    \r\n    // Check specific error types\r\n    if (error.code === 'ECONNREFUSED') {\r\n      console.log('üì± Backend connection refused, using fallback news...');\r\n    } else if (error.response?.status === 500) {\r\n      console.log('üì± Backend server error, using fallback news...');\r\n    } else if (error.code === 'ENOTFOUND') {\r\n      console.log('üì± Backend not found, using fallback news...');\r\n    } else {\r\n      console.log('üì± Unknown error, using fallback news...', error.message);\r\n    }\r\n    \r\n    const fallback = await getFallbackNews();\r\n    return {\r\n      ...fallback,\r\n      message: `Backend error (${error.message}). Showing sample news.`\r\n    };\r\n  }\r\n};\r\n\r\n// Helper function to map backend categories to frontend categories\r\n// Update the category mapping to match your RSS service categories:\r\n\r\nconst mapBackendCategory = (backendCategory: string | undefined): string => {\r\n  if (!backendCategory) return 'General Health';\r\n  \r\n  const categoryMap: Record<string, string> = {\r\n    'tech': 'Health Technology',\r\n    'technology': 'Health Technology',\r\n    'health': 'Public Health',\r\n    'medical': 'Medical Research',\r\n    'nutrition': 'Nutrition & Diet',\r\n    'diet': 'Nutrition & Diet',\r\n    'mental': 'Mental Health',\r\n    'prevention': 'Disease Prevention',\r\n    'clinical': 'Clinical Studies',\r\n    'science': 'Medical Research',\r\n    'business': 'Health Business',\r\n    'sports': 'Fitness & Sports',\r\n    'entertainment': 'Wellness',\r\n    'nature': 'Environmental Health',\r\n    'general': 'General Health'\r\n  };\r\n  \r\n  const lowerCategory = backendCategory.toLowerCase();\r\n  for (const [key, value] of Object.entries(categoryMap)) {\r\n    if (lowerCategory.includes(key)) {\r\n      return value;\r\n    }\r\n  }\r\n  \r\n  return 'General Health';\r\n};\r\n\r\n// ENHANCED: Updated fallback news with image URLs\r\nconst getFallbackNews = async (): Promise<NewsFeedResponse> => {\r\n  const fallbackArticles: NewsArticle[] = [\r\n    {\r\n      id: 'fallback_1',\r\n      title: \"New Study Reveals Benefits of Mediterranean Diet for Heart Health\",\r\n      summary: \"Researchers found that following a Mediterranean diet can reduce cardiovascular disease risk by up to 30%. The study tracked over 7,000 participants for 5 years.\",\r\n      url: \"https://www.nih.gov/news-events/news-releases/mediterranean-diet-heart-health\",\r\n      source: \"NIH Health News\",\r\n      domain: \"nih.gov\",\r\n      category: \"Nutrition & Diet\",\r\n      publishedDate: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\r\n      relevanceScore: 0.95,\r\n      tags: ['nutrition', 'heart-health', 'mediterranean-diet', 'cardiovascular'],\r\n      thumbnailUrl: \"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400&q=80\",\r\n      imageUrl: \"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&q=80\",\r\n      mediaType: \"image\",\r\n      author: \"Dr. Sarah Johnson\",\r\n      hasMedia: true,\r\n      hasAuthor: true,\r\n      wordCount: 150,\r\n      readingTime: 1,\r\n      contentLength: 750\r\n    },\r\n    {\r\n      id: 'fallback_2',\r\n      title: \"Exercise and Mental Health: The Connection You Need to Know\",\r\n      summary: \"New research shows that just 30 minutes of exercise daily can significantly improve mental well-being and reduce symptoms of depression and anxiety.\",\r\n      url: \"https://www.cdc.gov/mental-health/exercise-connection\",\r\n      source: \"CDC Health Updates\",\r\n      domain: \"cdc.gov\",\r\n      category: \"Mental Health\",\r\n      publishedDate: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),\r\n      relevanceScore: 0.90,\r\n      tags: ['mental-health', 'exercise', 'wellness', 'depression'],\r\n      thumbnailUrl: \"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&q=80\",\r\n      imageUrl: \"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800&q=80\",\r\n      mediaType: \"image\",\r\n      author: \"Dr. Michael Chen\",\r\n      hasMedia: true,\r\n      hasAuthor: true,\r\n      wordCount: 180,\r\n      readingTime: 1,\r\n      contentLength: 900\r\n    },\r\n    {\r\n      id: 'fallback_3',\r\n      title: \"The Importance of Sleep for Immune System Function\",\r\n      summary: \"Studies demonstrate that quality sleep is crucial for maintaining a strong immune system. Adults need 7-9 hours of sleep per night for optimal health.\",\r\n      url: \"https://www.nih.gov/news-events/sleep-immune-system\",\r\n      source: \"Sleep Health Research\",\r\n      domain: \"nih.gov\",\r\n      category: \"General Health\",\r\n      publishedDate: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),\r\n      relevanceScore: 0.85,\r\n      tags: ['sleep', 'immune-system', 'health', 'wellness'],\r\n      thumbnailUrl: \"https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?w=400&q=80\",\r\n      imageUrl: \"https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?w=800&q=80\",\r\n      mediaType: \"image\",\r\n      author: \"Dr. Lisa Rodriguez\",\r\n      hasMedia: true,\r\n      hasAuthor: true,\r\n      wordCount: 200,\r\n      readingTime: 1,\r\n      contentLength: 1000\r\n    },\r\n    {\r\n      id: 'fallback_4',\r\n      title: \"Breakthrough in Cancer Research: New Treatment Shows Promise\",\r\n      summary: \"Scientists have developed a new immunotherapy approach that shows remarkable results in clinical trials, offering hope for difficult-to-treat cancers.\",\r\n      url: \"https://www.nih.gov/news-events/cancer-breakthrough-2024\",\r\n      source: \"Medical Research Today\",\r\n      domain: \"nih.gov\",\r\n      category: \"Medical Research\",\r\n      publishedDate: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),\r\n      relevanceScore: 0.98,\r\n      tags: ['cancer', 'research', 'immunotherapy', 'clinical-trials'],\r\n      thumbnailUrl: \"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=400&q=80\",\r\n      imageUrl: \"https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=800&q=80\",\r\n      mediaType: \"image\",\r\n      author: \"Dr. Robert Kim\",\r\n      hasMedia: true,\r\n      hasAuthor: true,\r\n      wordCount: 250,\r\n      readingTime: 2,\r\n      contentLength: 1250\r\n    },\r\n    {\r\n      id: 'fallback_5',\r\n      title: \"Preventive Care: Early Detection Saves Lives\",\r\n      summary: \"Regular health screenings can detect potential health issues before they become serious problems. Learn what screenings you need by age.\",\r\n      url: \"https://www.cdc.gov/prevention/early-detection\",\r\n      source: \"CDC Prevention Guidelines\",\r\n      domain: \"cdc.gov\",\r\n      category: \"Disease Prevention\",\r\n      publishedDate: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),\r\n      relevanceScore: 0.80,\r\n      tags: ['prevention', 'screening', 'early-detection', 'health-checkup'],\r\n      thumbnailUrl: \"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&q=80\",\r\n      imageUrl: \"https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=800&q=80\",\r\n      mediaType: \"image\",\r\n      author: \"Dr. Amanda White\",\r\n      hasMedia: true,\r\n      hasAuthor: true,\r\n      wordCount: 160,\r\n      readingTime: 1,\r\n      contentLength: 800\r\n    }\r\n  ];\r\n\r\n  // Categorize fallback articles\r\n  const categorizedArticles: Record<string, NewsArticle[]> = {};\r\n  fallbackArticles.forEach(article => {\r\n    if (!categorizedArticles[article.category]) {\r\n      categorizedArticles[article.category] = [];\r\n    }\r\n    categorizedArticles[article.category].push(article);\r\n  });\r\n\r\n  return {\r\n    success: true,\r\n    articles: fallbackArticles,\r\n    categories: categorizedArticles,\r\n    lastUpdated: new Date().toISOString(),\r\n    count: fallbackArticles.length,\r\n    message: 'Using sample health news (backend unavailable)'\r\n  };\r\n};\r\n\r\n// Rest of helper functions remain the same but with enhanced logging...\r\nconst extractDomain = (url: string): string => {\r\n  try {\r\n    return new URL(url).hostname.toLowerCase();\r\n  } catch {\r\n    return 'unknown';\r\n  }\r\n};\r\n\r\nconst calculateRelevanceScore = (title: string = '', description: string = ''): number => {\r\n  const content = `${title} ${description}`.toLowerCase();\r\n  \r\n  const healthKeywords = ['health', 'medical', 'wellness', 'fitness', 'nutrition', 'diet', 'exercise', 'mental health', 'disease', 'treatment', 'research', 'study'];\r\n  const matchingKeywords = healthKeywords.filter(keyword => content.includes(keyword));\r\n  \r\n  let score = 0.5;\r\n  score += (matchingKeywords.length * 0.08);\r\n  \r\n  return Math.min(score, 1.0);\r\n};\r\n\r\n// Update the extractTags function signature to handle the optional parameter:\r\n\r\nconst extractTags = (title: string = '', description: string = '', existingTags?: string): string[] => {\r\n  const content = `${title} ${description}`.toLowerCase();\r\n  const tags: string[] = [];\r\n  \r\n  // Only process existingTags if it's provided and is a string\r\n  if (existingTags && typeof existingTags === 'string') {\r\n    try {\r\n      const parsedTags = existingTags.split(',').map(tag => tag.trim()).filter(tag => tag.length > 0);\r\n      tags.push(...parsedTags);\r\n    } catch (e) {\r\n      // Continue with keyword extraction\r\n    }\r\n  }\r\n  \r\n  const tagKeywords = [\r\n    'health', 'medical', 'nutrition', 'diet', 'fitness', 'exercise',\r\n    'mental-health', 'wellness', 'prevention', 'treatment', 'research',\r\n    'study', 'clinical', 'vaccine', 'medicine', 'hospital', 'doctor',\r\n    'heart', 'cancer', 'diabetes', 'sleep', 'immune', 'therapy'\r\n  ];\r\n  \r\n  tagKeywords.forEach(keyword => {\r\n    if (content.includes(keyword.replace('-', ' ')) && !tags.includes(keyword)) {\r\n      tags.push(keyword);\r\n    }\r\n  });\r\n  \r\n  return tags.slice(0, 5);\r\n};\r\n\r\n// ENHANCED: Updated utility functions with image support\r\nexport const formatArticleForDisplay = (article: NewsArticle) => {\r\n  return {\r\n    ...article,\r\n    formattedDate: formatTimeAgo(article.publishedDate),\r\n    isTrusted: isTrustedDomain(article.url),\r\n    relevancePercentage: Math.round(article.relevanceScore * 100),\r\n    shortSummary: article.summary.length > 150 \r\n      ? article.summary.substring(0, 150) + '...'\r\n      : article.summary,\r\n    // ADDED: Image display helpers\r\n    displayImage: article.thumbnailUrl || article.imageUrl || article.feedThumbnailUrl || article.feedImageUrl || '',\r\n    hasValidImage: !!(article.thumbnailUrl || article.imageUrl),\r\n    // ADDED: Content quality indicators\r\n    qualityScore: calculateQualityScore(article),\r\n    readingTimeText: article.readingTime ? `${article.readingTime} min read` : 'Quick read'\r\n  };\r\n};\r\n\r\n// ADDED: Calculate article quality score\r\nconst calculateQualityScore = (article: NewsArticle): number => {\r\n  let score = 0;\r\n  \r\n  if (article.hasAuthor) score += 0.2;\r\n  if (article.hasMedia) score += 0.2;\r\n  if (article.wordCount && article.wordCount > 100) score += 0.2;\r\n  if (article.contentLength && article.contentLength > 500) score += 0.2;\r\n  if (isTrustedDomain(article.url)) score += 0.2;\r\n  \r\n  return Math.min(score, 1.0);\r\n};\r\n\r\n// Add these functions before the getRSSServiceStats function:\r\n\r\nexport const getRSSFeeds = async (): Promise<{\r\n  success: boolean;\r\n  feeds?: Array<{\r\n    id: number;\r\n    title: string;\r\n    url: string;\r\n    category: string;\r\n    country: string;\r\n    is_active: boolean;\r\n    last_checked: string;\r\n    article_count: number;\r\n  }>;\r\n  message?: string;\r\n}> => {\r\n  try {\r\n    console.log('üì° Fetching RSS feeds...');\r\n    \r\n    const response = await axios.get(`${API_URL}/news/feeds`, {\r\n      timeout: 10000\r\n    });\r\n    \r\n    return {\r\n      success: response.data.success,\r\n      feeds: response.data.feeds || [],\r\n      message: response.data.message\r\n    };\r\n    \r\n  } catch (error: any) {\r\n    console.error('‚ùå Error fetching RSS feeds:', error);\r\n    return {\r\n      success: false,\r\n      message: 'Error fetching RSS feeds'\r\n    };\r\n  }\r\n};\r\n\r\nexport const seedRSSFeeds = async (): Promise<{\r\n  success: boolean;\r\n  message?: string;\r\n  feeds_added?: number;\r\n}> => {\r\n  try {\r\n    console.log('üå± Seeding RSS feeds...');\r\n    \r\n    const response = await axios.post(`${API_URL}/news/seed`, {}, {\r\n      timeout: 30000\r\n    });\r\n    \r\n    return {\r\n      success: response.data.success,\r\n      message: response.data.message,\r\n      feeds_added: response.data.feeds_added\r\n    };\r\n    \r\n  } catch (error: any) {\r\n    console.error('‚ùå Error seeding RSS feeds:', error);\r\n    return {\r\n      success: false,\r\n      message: 'Error seeding RSS feeds'\r\n    };\r\n  }\r\n};\r\n\r\n// Add this new function to get backend RSS service status:\r\n\r\nexport const getRSSServiceStats = async (): Promise<{\r\n  success: boolean;\r\n  message?: string;\r\n  rss_stats?: {\r\n    controller_initialized: boolean;\r\n    total_feeds: number;\r\n    active_feeds: number;\r\n    last_poll: string;\r\n    polling_active: boolean;\r\n    articles_count: number;\r\n  };\r\n}> => {\r\n  try {\r\n    console.log('üìä Fetching RSS service stats...');\r\n    \r\n    // Get RSS controller health\r\n    const healthResponse = await axios.get(`${API_URL}/news/debug/health`, {\r\n      timeout: 5000\r\n    });\r\n    \r\n    // Get feeds info\r\n    const feedsResponse = await axios.get(`${API_URL}/news/feeds`, {\r\n      timeout: 5000\r\n    });\r\n    \r\n    // Get polling status\r\n    const pollingResponse = await axios.get(`${API_URL}/news/debug/polling-status`, {\r\n      timeout: 5000\r\n    });\r\n    \r\n    return {\r\n      success: true,\r\n      rss_stats: {\r\n        controller_initialized: healthResponse.data?.status?.is_initialized || false,\r\n        total_feeds: feedsResponse.data?.count || 0,\r\n        active_feeds: feedsResponse.data?.feeds?.filter((f: any) => f.is_active)?.length || 0,\r\n        last_poll: pollingResponse.data?.status?.polling_details?.last_run || 'never',\r\n        polling_active: pollingResponse.data?.status?.polling_active || false,\r\n        articles_count: 0 // Will be filled by articles endpoint\r\n      }\r\n    };\r\n    \r\n  } catch (error: any) {\r\n    console.error('‚ùå Error fetching RSS stats:', error);\r\n    return {\r\n      success: false,\r\n      message: 'Error fetching RSS service statistics'\r\n    };\r\n  }\r\n};\r\n\r\n// Add these missing utility functions at the end of the file:\r\n\r\n// Format time ago utility\r\nexport const formatTimeAgo = (dateString: string): string => {\r\n  try {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffInMs = now.getTime() - date.getTime();\r\n    const diffInMinutes = Math.floor(diffInMs / (1000 * 60));\r\n    const diffInHours = Math.floor(diffInMinutes / 60);\r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n\r\n    if (diffInDays > 0) {\r\n      return diffInDays === 1 ? '1 day ago' : `${diffInDays} days ago`;\r\n    } else if (diffInHours > 0) {\r\n      return diffInHours === 1 ? '1 hour ago' : `${diffInHours} hours ago`;\r\n    } else if (diffInMinutes > 0) {\r\n      return diffInMinutes === 1 ? '1 minute ago' : `${diffInMinutes} minutes ago`;\r\n    } else {\r\n      return 'Just now';\r\n    }\r\n  } catch (error) {\r\n    return 'Unknown';\r\n  }\r\n};\r\n\r\n// Check if domain is trusted\r\nexport const isTrustedDomain = (url: string): boolean => {\r\n  try {\r\n    const domain = new URL(url).hostname.toLowerCase().replace('www.', '');\r\n    return domain in TRUSTED_DOMAINS;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\n// Get trusted domain score\r\nexport const getTrustedDomainScore = (url: string): number => {\r\n  try {\r\n    const domain = new URL(url).hostname.toLowerCase().replace('www.', '');\r\n    return TRUSTED_DOMAINS[domain] || 0;\r\n  } catch (error) {\r\n    return 0;\r\n  }\r\n};\r\n\r\n// Add these type exports at the top after the existing interfaces:\r\n\r\nexport interface RSSServiceStats {\r\n  success: boolean;\r\n  message?: string;\r\n  rss_stats?: {\r\n    controller_initialized: boolean;\r\n    total_feeds: number;\r\n    active_feeds: number;\r\n    last_poll: string;\r\n    polling_active: boolean;\r\n    articles_count: number;\r\n  };\r\n}\r\n\r\nexport interface RSSFeed {\r\n  id: number;\r\n  title: string;\r\n  url: string;\r\n  category: string;\r\n  country: string;\r\n  is_active: boolean;\r\n  last_checked: string;\r\n  article_count: number;\r\n}\r\n\r\nexport interface NewsFeedStats {\r\n  success: boolean;\r\n  message?: string;\r\n  stats?: {\r\n    totalArticles: number;\r\n    categoryCounts: Record<string, number>;\r\n    lastUpdated: string;\r\n    sourcesCounts: Record<string, number>;\r\n    articlesWithImages: number;\r\n    articlesWithAuthors: number;\r\n    averageWordCount: number;\r\n    averageReadingTime: number;\r\n    trustedSources: number;\r\n  };\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}