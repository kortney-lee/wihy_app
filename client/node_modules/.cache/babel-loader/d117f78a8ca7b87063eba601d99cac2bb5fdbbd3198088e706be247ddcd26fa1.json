{"ast":null,"code":"var _jsxFileName = \"C:\\\\vHealth\\\\vhealth\\\\client\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport SearchResults from './SearchResults';\nimport ImageUploadModal from './components/ImageUploadModal';\nimport { searchCache } from './services/searchCache';\nimport { healthSearchService } from './services/healthSearchService';\nimport { photoStorageService } from './services/photoStorageService';\nimport './VHealthSearch.css';\nimport MultiAuthLogin from './components/shared/components/MultiAuthLogin';\n\n// Add TypeScript declaration for Speech Recognition\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Main search component (formerly vHealthApp)\nconst VHealthAppContent = () => {\n  _s();\n  const [apiStatus, setApiStatus] = useState({\n    connected: false,\n    message: 'Checking API connection...'\n  });\n  const [currentView, setCurrentView] = useState('search');\n  const [currentQuery, setCurrentQuery] = useState('');\n  const [currentResults, setCurrentResults] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [dataSource, setDataSource] = useState(\"openai\");\n  const [currentPhotoId, setCurrentPhotoId] = useState(null);\n  const [isListening, setIsListening] = useState(false);\n  const [image, setImage] = useState(null);\n  const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\n  const [citations, setCitations] = useState([]);\n  const [recommendations, setRecommendations] = useState([]);\n  const [disclaimer, setDisclaimer] = useState('');\n  const recognitionRef = useRef(null);\n\n  // Handle browser navigation (back/forward buttons)\n  useEffect(() => {\n    const handlePopState = event => {\n      const state = event.state;\n      if (state) {\n        setCurrentView(state.view);\n        setCurrentQuery(state.query || '');\n        setCurrentResults(state.results || '');\n        setDataSource(state.dataSource || 'local');\n        setIsLoading(false);\n      } else {\n        // No state means we're at the root\n        setCurrentView('search');\n        setCurrentQuery('');\n        setCurrentResults('');\n      }\n    };\n    window.addEventListener('popstate', handlePopState);\n\n    // Check for initial query in URL\n    const urlParams = new URLSearchParams(window.location.search);\n    const queryParam = urlParams.get('q');\n    if (queryParam) {\n      handleSearch(queryParam, false); // Don't push to history on initial load\n    }\n    return () => window.removeEventListener('popstate', handlePopState);\n  }, []);\n  const handleSearch = async (query, pushToHistory = true) => {\n    console.log('🔍 SEARCH DEBUG: handleSearch called with query:', query);\n    setIsLoading(true);\n    console.log('🔍 SEARCH DEBUG: setIsLoading(true) called');\n    if (!query.trim()) return;\n    const trimmedQuery = query.trim();\n    setCurrentQuery(trimmedQuery);\n    setCurrentView('results'); // Switch to results view immediately\n\n    // Check cache first\n    const cachedResults = searchCache.getCachedResult(trimmedQuery);\n    if (cachedResults) {\n      console.log('🔍 SEARCH DEBUG: Using cached results');\n      setCurrentResults(cachedResults);\n      setDataSource('local');\n      setIsLoading(false);\n      if (pushToHistory) {\n        const url = `?q=${encodeURIComponent(trimmedQuery)}`;\n        window.history.pushState({\n          view: 'results',\n          query: trimmedQuery,\n          results: cachedResults\n        }, '', url);\n      }\n      return;\n    }\n    console.log('🔍 SEARCH DEBUG: Making new search request');\n    try {\n      // Step 1: Try nutrition database first\n      console.log('🔍 SEARCH DEBUG: Trying nutrition database first');\n      try {\n        const nutritionUrl = `http://localhost:5000/api/search/food?q=${encodeURIComponent(trimmedQuery)}`;\n        const nutritionResponse = await fetch(nutritionUrl);\n        if (nutritionResponse.ok) {\n          const nutritionData = await nutritionResponse.json();\n          console.log('🔍 SEARCH DEBUG: Nutrition API response:', nutritionData);\n          if (nutritionData && nutritionData.found !== false) {\n            console.log('🔍 SEARCH DEBUG: Using nutrition database results');\n            const formattedResults = typeof nutritionData === 'string' ? nutritionData : JSON.stringify(nutritionData);\n            setCurrentResults(formattedResults);\n            setDataSource('vnutrition');\n            searchCache.setCachedResult(trimmedQuery, formattedResults, window.location.href);\n\n            // Save to API cache\n            fetch('http://localhost:5000/api/cache/save', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                query: trimmedQuery,\n                results: formattedResults,\n                source: 'vnutrition'\n              })\n            }).catch(err => console.log('Cache save error:', err));\n            setIsLoading(false);\n            if (pushToHistory) {\n              const url = `?q=${encodeURIComponent(trimmedQuery)}`;\n              window.history.replaceState({\n                view: 'results',\n                query: trimmedQuery,\n                results: formattedResults,\n                dataSource: 'vnutrition'\n              }, '', url);\n            }\n            return;\n          }\n        }\n      } catch (nutritionError) {\n        console.log('🔍 SEARCH DEBUG: Nutrition API error, trying OpenAI fallback');\n      }\n\n      // Step 2: Fallback to OpenAI\n      console.log('🔍 SEARCH DEBUG: About to call healthSearchService.searchHealthInfo');\n      const healthData = await healthSearchService.searchHealthInfo(trimmedQuery);\n      console.log('🔍 SEARCH DEBUG: Got response from healthSearchService:', healthData);\n\n      // Format the results for display\n      const formattedResults = formatHealthResults(healthData);\n      setCurrentResults(formattedResults);\n      setDataSource('openai');\n\n      // Set additional data if available\n      if (healthData.sources) setCitations(healthData.sources);\n      if (healthData.recommendations) setRecommendations(healthData.recommendations);\n      if (healthData.medicalDisclaimer) setDisclaimer(healthData.medicalDisclaimer);\n      searchCache.setCachedResult(trimmedQuery, formattedResults, window.location.href);\n\n      // Save AI analysis results to cache\n      fetch('http://localhost:5000/api/cache/save', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: trimmedQuery,\n          results: formattedResults,\n          source: 'openai'\n        })\n      }).catch(err => console.log('Cache save error:', err));\n\n      // If this search included an image, silently save the analysis\n      if (currentPhotoId && image) {\n        await photoStorageService.updatePhotoAnalysis(currentPhotoId, formattedResults);\n        console.log('AI analysis saved for photo:', currentPhotoId);\n      }\n\n      // Update history with results\n      if (pushToHistory) {\n        const url = `?q=${encodeURIComponent(trimmedQuery)}`;\n        window.history.replaceState({\n          view: 'results',\n          query: trimmedQuery,\n          results: formattedResults,\n          dataSource: 'openai'\n        }, '', url);\n      }\n      console.log(`✅ Search completed using: ${healthData.dataSource === 'openai' ? 'ChatGPT' : 'Local Database'}`);\n    } catch (error) {\n      console.error('🔍 SEARCH DEBUG: Error in search:', error);\n      const errorMessage = 'Sorry, we encountered an error while searching for health information. Please try again or consult with a healthcare provider for medical advice.';\n      setCurrentResults(errorMessage);\n      setDataSource('error');\n    } finally {\n      console.log('🔍 SEARCH DEBUG: setIsLoading(false) called');\n      setIsLoading(false);\n      setCurrentPhotoId(null); // Reset after use\n    }\n  };\n  const formatHealthResults = healthData => {\n    let formatted = '';\n\n    // Keep only the clean content:\n    formatted += `${healthData.summary}\\n\\n`;\n    formatted += `${healthData.details}\\n\\n`;\n    if (healthData.recommendations && healthData.recommendations.length > 0) {\n      formatted += `**Recommendations:**\\n${healthData.recommendations.map(r => `• ${r}`).join('\\n')}\\n\\n`;\n    }\n    if (healthData.sources && healthData.sources.length > 0) {\n      formatted += `**Sources:** ${healthData.sources.join(', ')}\\n\\n`;\n    }\n    formatted += `**Medical Disclaimer:** ${healthData.medicalDisclaimer}`;\n    return formatted;\n  };\n  const handleBackToSearch = () => {\n    setCurrentView('search');\n    setCurrentQuery('');\n    setCurrentResults('');\n    window.history.pushState({\n      view: 'search'\n    }, '', '/');\n  };\n  const handleNewSearch = newQuery => {\n    handleSearch(newQuery);\n  };\n  const handleTextSubmit = async e => {\n    e.preventDefault();\n    if (!currentQuery.trim()) return;\n    console.log('🚀 Starting search with ChatGPT...');\n    handleSearch(currentQuery.trim());\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleTextSubmit(e);\n    }\n  };\n  const handleClearAll = () => {\n    setCurrentQuery('');\n    setImage(null);\n    setCurrentPhotoId(null);\n\n    // Clear file input and CSS classes\n    const fileInput = document.getElementById('camera-input');\n    if (fileInput) {\n      fileInput.value = '';\n    }\n    const searchInput = document.querySelector('.search-input');\n    if (searchInput) {\n      searchInput.classList.remove('with-image');\n    }\n  };\n  const handleVoiceInput = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert('Speech recognition not supported in this browser');\n      return;\n    }\n    if (!isListening) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = 'en-US';\n      recognition.onstart = () => {\n        setIsListening(true);\n      };\n      recognition.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        setCurrentQuery(transcript);\n        setIsListening(false);\n      };\n      recognition.onerror = () => {\n        setIsListening(false);\n      };\n      recognition.onend = () => {\n        setIsListening(false);\n      };\n      recognitionRef.current = recognition;\n      recognition.start();\n    } else {\n      var _recognitionRef$curre;\n      (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.stop();\n      setIsListening(false);\n    }\n  };\n\n  // Clear expired cache on component mount\n  useEffect(() => {\n    searchCache.clearExpiredCache();\n  }, []);\n  useEffect(() => {\n    // Check service status on load\n    healthSearchService.checkServiceStatus().then(status => {\n      console.log('🔧 Health Search Service Status:', status);\n    });\n  }, []);\n  const handleCameraClick = () => {\n    setIsUploadModalOpen(true);\n  };\n  const handleAnalysisComplete = async foodName => {\n    try {\n      console.log('Image analysis completed, food detected:', foodName);\n\n      // Set the analyzed food name as the search query\n      setCurrentQuery(foodName);\n\n      // Trigger a search with the analyzed food name\n      await handleSearch(foodName);\n\n      // Close the modal\n      setIsUploadModalOpen(false);\n    } catch (error) {\n      console.error('Error processing analyzed food:', error);\n      alert('Failed to process the analyzed food. Please try again.');\n    }\n  };\n  const handleUserChange = user => {\n    console.log('User changed:', user);\n  };\n  const handleSignIn = user => {\n    console.log('User signed in:', user);\n  };\n  const handleSignOut = () => {\n    console.log('User signed out');\n  };\n  if (currentView === 'results') {\n    return /*#__PURE__*/_jsxDEV(SearchResults, {\n      query: currentQuery,\n      results: currentResults,\n      onBackToSearch: handleBackToSearch,\n      onNewSearch: handleNewSearch,\n      isLoading: isLoading,\n      dataSource: dataSource,\n      citations: citations,\n      recommendations: recommendations,\n      disclaimer: disclaimer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    children: [/*#__PURE__*/_jsxDEV(MultiAuthLogin, {\n      position: \"top-right\",\n      className: \"main-login-button\",\n      onUserChange: handleUserChange,\n      onSignIn: handleSignIn,\n      onSignOut: handleSignOut\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"search-title\",\n      children: \"What is Healthy?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleTextSubmit,\n      className: \"search-form\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Ask anything about health...\",\n          value: currentQuery,\n          onChange: e => setCurrentQuery(e.target.value),\n          onKeyPress: handleKeyPress,\n          className: \"search-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this), image && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-preview\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-icon\",\n            children: \"\\uD83D\\uDCF7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"image-name\",\n            children: image.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {\n              setImage(null);\n              setCurrentPhotoId(null);\n              const searchInput = document.querySelector('.search-input');\n              if (searchInput) {\n                searchInput.classList.remove('with-image');\n              }\n            },\n            className: \"remove-image\",\n            \"aria-label\": \"Remove image\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-icons\",\n          children: [(query || image) && /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleClearAll,\n            className: \"icon-button clear-button\",\n            \"aria-label\": \"Clear all\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              viewBox: \"0 0 24 24\",\n              fill: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleCameraClick,\n            className: \"icon-button\",\n            \"aria-label\": \"Upload image\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              viewBox: \"0 0 24 24\",\n              fill: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleVoiceInput,\n            className: `icon-button ${isListening ? 'listening' : ''}`,\n            \"aria-label\": isListening ? 'Stop listening' : 'Start voice input',\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              viewBox: \"0 0 24 24\",\n              fill: \"currentColor\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.28c3.39-.49 6-3.3 6-6.72h-2z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"search-button\",\n        onClick: () => window.open('https://mhealth.com', '_blank'),\n        children: \"mHealth\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"search-button\",\n        onClick: () => window.open('https://whatishealthy.org', '_blank'),\n        children: \"What is Healthy?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }, this), isListening && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"voice-feedback\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83C\\uDFA4 Listening...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ImageUploadModal, {\n      isOpen: isUploadModalOpen,\n      onClose: () => setIsUploadModalOpen(false),\n      onAnalysisComplete: handleAnalysisComplete,\n      title: \"Upload Image\",\n      subtitle: \"Upload images for analysis\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 398,\n    columnNumber: 5\n  }, this);\n};\n\n// Wrapper with Router for routing support (if needed in the future)\n_s(VHealthAppContent, \"egGAL7HPKSMvvxu16ZLsjL7GxQY=\");\n_c = VHealthAppContent;\nconst App = () => {\n  console.log(\"App component rendered\");\n  return /*#__PURE__*/_jsxDEV(VHealthAppContent, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 523,\n    columnNumber: 10\n  }, this);\n};\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"VHealthAppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","SearchResults","ImageUploadModal","searchCache","healthSearchService","photoStorageService","MultiAuthLogin","jsxDEV","_jsxDEV","VHealthAppContent","_s","apiStatus","setApiStatus","connected","message","currentView","setCurrentView","currentQuery","setCurrentQuery","currentResults","setCurrentResults","isLoading","setIsLoading","dataSource","setDataSource","currentPhotoId","setCurrentPhotoId","isListening","setIsListening","image","setImage","isUploadModalOpen","setIsUploadModalOpen","citations","setCitations","recommendations","setRecommendations","disclaimer","setDisclaimer","recognitionRef","handlePopState","event","state","view","query","results","window","addEventListener","urlParams","URLSearchParams","location","search","queryParam","get","handleSearch","removeEventListener","pushToHistory","console","log","trim","trimmedQuery","cachedResults","getCachedResult","url","encodeURIComponent","history","pushState","nutritionUrl","nutritionResponse","fetch","ok","nutritionData","json","found","formattedResults","JSON","stringify","setCachedResult","href","method","headers","body","source","catch","err","replaceState","nutritionError","healthData","searchHealthInfo","formatHealthResults","sources","medicalDisclaimer","updatePhotoAnalysis","error","errorMessage","formatted","summary","details","length","map","r","join","handleBackToSearch","handleNewSearch","newQuery","handleTextSubmit","e","preventDefault","handleKeyPress","key","handleClearAll","fileInput","document","getElementById","value","searchInput","querySelector","classList","remove","handleVoiceInput","alert","recognition","webkitSpeechRecognition","continuous","interimResults","lang","onstart","onresult","transcript","onerror","onend","current","start","_recognitionRef$curre","stop","clearExpiredCache","checkServiceStatus","then","status","handleCameraClick","handleAnalysisComplete","foodName","handleUserChange","user","handleSignIn","handleSignOut","onBackToSearch","onNewSearch","fileName","_jsxFileName","lineNumber","columnNumber","className","children","position","onUserChange","onSignIn","onSignOut","onSubmit","type","placeholder","onChange","target","onKeyPress","name","onClick","viewBox","fill","d","open","isOpen","onClose","onAnalysisComplete","title","subtitle","_c","App","_c2","$RefreshReg$"],"sources":["C:/vHealth/vhealth/client/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, useSearchParams, useNavigate } from 'react-router-dom';\r\nimport VHealthSearch from './VHealthSearch';\r\nimport SearchResults from './SearchResults';\r\nimport ImageUploadModal from './components/ImageUploadModal';\r\nimport { searchCache } from './services/searchCache';\r\nimport { healthSearchService } from './services/healthSearchService';\r\nimport { photoStorageService } from './services/photoStorageService';\r\nimport { foodAnalysisService } from './components/foodAnalysisService';\r\nimport './VHealthSearch.css';\r\nimport MultiAuthLogin from './components/shared/components/MultiAuthLogin';\r\n\r\n// Add TypeScript declaration for Speech Recognition\r\ndeclare global {\r\n  interface Window {\r\n    webkitSpeechRecognition: any;\r\n    SpeechRecognition: any;\r\n  }\r\n}\r\n\r\ninterface SpeechRecognition extends EventTarget {\r\n  continuous: boolean;\r\n  interimResults: boolean;\r\n  lang: string;\r\n  start(): void;\r\n  stop(): void;\r\n  onstart: () => void;\r\n  onresult: (event: any) => void;\r\n  onerror: () => void;\r\n  onend: () => void;\r\n}\r\n\r\n// Main search component (formerly vHealthApp)\r\nconst VHealthAppContent: React.FC = () => {\r\n  const [apiStatus, setApiStatus] = useState({\r\n    connected: false,\r\n    message: 'Checking API connection...'\r\n  });\r\n  const [currentView, setCurrentView] = useState<'search' | 'results'>('search');\r\n  const [currentQuery, setCurrentQuery] = useState('');\r\n  const [currentResults, setCurrentResults] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [dataSource, setDataSource] = useState<\"openai\" | \"local\" | \"error\" | \"vnutrition\">(\"openai\");\r\n  const [currentPhotoId, setCurrentPhotoId] = useState<string | null>(null);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [image, setImage] = useState<File | null>(null);\r\n  const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\r\n  const [citations, setCitations] = useState<string[]>([]);\r\n  const [recommendations, setRecommendations] = useState<string[]>([]);\r\n  const [disclaimer, setDisclaimer] = useState<string>('');\r\n\r\n  const recognitionRef = useRef<SpeechRecognition | null>(null);\r\n\r\n  // Handle browser navigation (back/forward buttons)\r\n  useEffect(() => {\r\n    const handlePopState = (event: PopStateEvent) => {\r\n      const state = event.state;\r\n      if (state) {\r\n        setCurrentView(state.view);\r\n        setCurrentQuery(state.query || '');\r\n        setCurrentResults(state.results || '');\r\n        setDataSource(state.dataSource || 'local');\r\n        setIsLoading(false);\r\n      } else {\r\n        // No state means we're at the root\r\n        setCurrentView('search');\r\n        setCurrentQuery('');\r\n        setCurrentResults('');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('popstate', handlePopState);\r\n    \r\n    // Check for initial query in URL\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const queryParam = urlParams.get('q');\r\n    if (queryParam) {\r\n      handleSearch(queryParam, false); // Don't push to history on initial load\r\n    }\r\n\r\n    return () => window.removeEventListener('popstate', handlePopState);\r\n  }, []);\r\n\r\n  const handleSearch = async (query: string, pushToHistory = true) => {\r\n    console.log('🔍 SEARCH DEBUG: handleSearch called with query:', query);\r\n    \r\n    setIsLoading(true);\r\n    console.log('🔍 SEARCH DEBUG: setIsLoading(true) called');\r\n    \r\n    if (!query.trim()) return;\r\n\r\n    const trimmedQuery = query.trim();\r\n    setCurrentQuery(trimmedQuery);\r\n    setCurrentView('results'); // Switch to results view immediately\r\n    \r\n    // Check cache first\r\n    const cachedResults = searchCache.getCachedResult(trimmedQuery);\r\n    \r\n    if (cachedResults) {\r\n      console.log('🔍 SEARCH DEBUG: Using cached results');\r\n      setCurrentResults(cachedResults);\r\n      setDataSource('local');\r\n      setIsLoading(false);\r\n      \r\n      if (pushToHistory) {\r\n        const url = `?q=${encodeURIComponent(trimmedQuery)}`;\r\n        window.history.pushState(\r\n          { view: 'results', query: trimmedQuery, results: cachedResults },\r\n          '',\r\n          url\r\n        );\r\n      }\r\n      return;\r\n    }\r\n\r\n    console.log('🔍 SEARCH DEBUG: Making new search request');\r\n    \r\n    try {\r\n      // Step 1: Try nutrition database first\r\n      console.log('🔍 SEARCH DEBUG: Trying nutrition database first');\r\n      try {\r\n        const nutritionUrl = `http://localhost:5000/api/search/food?q=${encodeURIComponent(trimmedQuery)}`;\r\n        const nutritionResponse = await fetch(nutritionUrl);\r\n        \r\n        if (nutritionResponse.ok) {\r\n          const nutritionData = await nutritionResponse.json();\r\n          console.log('🔍 SEARCH DEBUG: Nutrition API response:', nutritionData);\r\n          \r\n          if (nutritionData && nutritionData.found !== false) {\r\n            console.log('🔍 SEARCH DEBUG: Using nutrition database results');\r\n            const formattedResults = typeof nutritionData === 'string' ? nutritionData : JSON.stringify(nutritionData);\r\n            \r\n            setCurrentResults(formattedResults);\r\n            setDataSource('vnutrition');\r\n            searchCache.setCachedResult(trimmedQuery, formattedResults, window.location.href);\r\n            \r\n            // Save to API cache\r\n            fetch('http://localhost:5000/api/cache/save', {\r\n              method: 'POST',\r\n              headers: { 'Content-Type': 'application/json' },\r\n              body: JSON.stringify({\r\n                query: trimmedQuery,\r\n                results: formattedResults,\r\n                source: 'vnutrition'\r\n              })\r\n            }).catch(err => console.log('Cache save error:', err));\r\n            \r\n            setIsLoading(false);\r\n            \r\n            if (pushToHistory) {\r\n              const url = `?q=${encodeURIComponent(trimmedQuery)}`;\r\n              window.history.replaceState(\r\n                { \r\n                  view: 'results', \r\n                  query: trimmedQuery, \r\n                  results: formattedResults,\r\n                  dataSource: 'vnutrition'\r\n                },\r\n                '',\r\n                url\r\n              );\r\n            }\r\n            return;\r\n          }\r\n        }\r\n      } catch (nutritionError) {\r\n        console.log('🔍 SEARCH DEBUG: Nutrition API error, trying OpenAI fallback');\r\n      }\r\n\r\n      // Step 2: Fallback to OpenAI\r\n      console.log('🔍 SEARCH DEBUG: About to call healthSearchService.searchHealthInfo');\r\n      const healthData = await healthSearchService.searchHealthInfo(trimmedQuery);\r\n      console.log('🔍 SEARCH DEBUG: Got response from healthSearchService:', healthData);\r\n      \r\n      // Format the results for display\r\n      const formattedResults = formatHealthResults(healthData);\r\n      \r\n      setCurrentResults(formattedResults);\r\n      setDataSource('openai');\r\n      \r\n      // Set additional data if available\r\n      if (healthData.sources) setCitations(healthData.sources);\r\n      if (healthData.recommendations) setRecommendations(healthData.recommendations);\r\n      if (healthData.medicalDisclaimer) setDisclaimer(healthData.medicalDisclaimer);\r\n      \r\n      searchCache.setCachedResult(trimmedQuery, formattedResults, window.location.href);\r\n      \r\n      // Save AI analysis results to cache\r\n      fetch('http://localhost:5000/api/cache/save', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          query: trimmedQuery,\r\n          results: formattedResults,\r\n          source: 'openai'\r\n        })\r\n      }).catch(err => console.log('Cache save error:', err));\r\n      \r\n      // If this search included an image, silently save the analysis\r\n      if (currentPhotoId && image) {\r\n        await photoStorageService.updatePhotoAnalysis(currentPhotoId, formattedResults);\r\n        console.log('AI analysis saved for photo:', currentPhotoId);\r\n      }\r\n      \r\n      // Update history with results\r\n      if (pushToHistory) {\r\n        const url = `?q=${encodeURIComponent(trimmedQuery)}`;\r\n        window.history.replaceState(\r\n          { \r\n            view: 'results', \r\n            query: trimmedQuery, \r\n            results: formattedResults,\r\n            dataSource: 'openai'\r\n          },\r\n          '',\r\n          url\r\n        );\r\n      }\r\n\r\n      console.log(`✅ Search completed using: ${healthData.dataSource === 'openai' ? 'ChatGPT' : 'Local Database'}`);\r\n      \r\n    } catch (error) {\r\n      console.error('🔍 SEARCH DEBUG: Error in search:', error);\r\n      const errorMessage = 'Sorry, we encountered an error while searching for health information. Please try again or consult with a healthcare provider for medical advice.';\r\n      setCurrentResults(errorMessage);\r\n      setDataSource('error');\r\n    } finally {\r\n      console.log('🔍 SEARCH DEBUG: setIsLoading(false) called');\r\n      setIsLoading(false);\r\n      setCurrentPhotoId(null); // Reset after use\r\n    }\r\n  };\r\n\r\n  const formatHealthResults = (healthData: any): string => {\r\n    let formatted = '';\r\n    \r\n    // Keep only the clean content:\r\n    formatted += `${healthData.summary}\\n\\n`;\r\n    formatted += `${healthData.details}\\n\\n`;\r\n    \r\n    if (healthData.recommendations && healthData.recommendations.length > 0) {\r\n      formatted += `**Recommendations:**\\n${healthData.recommendations.map((r: string) => `• ${r}`).join('\\n')}\\n\\n`;\r\n    }\r\n    \r\n    if (healthData.sources && healthData.sources.length > 0) {\r\n      formatted += `**Sources:** ${healthData.sources.join(', ')}\\n\\n`;\r\n    }\r\n    \r\n    formatted += `**Medical Disclaimer:** ${healthData.medicalDisclaimer}`;\r\n    \r\n    return formatted;\r\n  };\r\n\r\n  const handleBackToSearch = () => {\r\n    setCurrentView('search');\r\n    setCurrentQuery('');\r\n    setCurrentResults('');\r\n    window.history.pushState({ view: 'search' }, '', '/');\r\n  };\r\n\r\n  const handleNewSearch = (newQuery: string) => {\r\n    handleSearch(newQuery);\r\n  };\r\n\r\n  const handleTextSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!currentQuery.trim()) return;\r\n    console.log('🚀 Starting search with ChatGPT...');\r\n    handleSearch(currentQuery.trim());\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      handleTextSubmit(e as any);\r\n    }\r\n  };\r\n\r\n  const handleClearAll = () => {\r\n    setCurrentQuery('');\r\n    setImage(null);\r\n    setCurrentPhotoId(null);\r\n    \r\n    // Clear file input and CSS classes\r\n    const fileInput = document.getElementById('camera-input') as HTMLInputElement;\r\n    if (fileInput) {\r\n      fileInput.value = '';\r\n    }\r\n    \r\n    const searchInput = document.querySelector('.search-input') as HTMLInputElement;\r\n    if (searchInput) {\r\n      searchInput.classList.remove('with-image');\r\n    }\r\n  };\r\n\r\n  const handleVoiceInput = () => {\r\n    if (!('webkitSpeechRecognition' in window)) {\r\n      alert('Speech recognition not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    if (!isListening) {\r\n      const recognition = new (window as any).webkitSpeechRecognition();\r\n      recognition.continuous = false;\r\n      recognition.interimResults = false;\r\n      recognition.lang = 'en-US';\r\n\r\n      recognition.onstart = () => {\r\n        setIsListening(true);\r\n      };\r\n\r\n      recognition.onresult = (event: any) => {\r\n        const transcript = event.results[0][0].transcript;\r\n        setCurrentQuery(transcript);\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognition.onerror = () => {\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognition.onend = () => {\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognitionRef.current = recognition;\r\n      recognition.start();\r\n    } else {\r\n      recognitionRef.current?.stop();\r\n      setIsListening(false);\r\n    }\r\n  };\r\n\r\n  // Clear expired cache on component mount\r\n  useEffect(() => {\r\n    searchCache.clearExpiredCache();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Check service status on load\r\n    healthSearchService.checkServiceStatus().then(status => {\r\n      console.log('🔧 Health Search Service Status:', status);\r\n    });\r\n  }, []);\r\n\r\n  const handleCameraClick = () => {\r\n    setIsUploadModalOpen(true);\r\n  };\r\n\r\n  const handleAnalysisComplete = async (foodName: string) => {\r\n    try {\r\n      console.log('Image analysis completed, food detected:', foodName);\r\n      \r\n      // Set the analyzed food name as the search query\r\n      setCurrentQuery(foodName);\r\n      \r\n      // Trigger a search with the analyzed food name\r\n      await handleSearch(foodName);\r\n      \r\n      // Close the modal\r\n      setIsUploadModalOpen(false);\r\n      \r\n    } catch (error) {\r\n      console.error('Error processing analyzed food:', error);\r\n      alert('Failed to process the analyzed food. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleUserChange = (user: any) => {\r\n    console.log('User changed:', user);\r\n  };\r\n\r\n  const handleSignIn = (user: any) => {\r\n    console.log('User signed in:', user);\r\n  };\r\n\r\n  const handleSignOut = () => {\r\n    console.log('User signed out');\r\n  };\r\n\r\n  if (currentView === 'results') {\r\n    return (\r\n      <SearchResults\r\n        query={currentQuery}\r\n        results={currentResults}\r\n        onBackToSearch={handleBackToSearch}\r\n        onNewSearch={handleNewSearch}\r\n        isLoading={isLoading}\r\n        dataSource={dataSource}\r\n        citations={citations}\r\n        recommendations={recommendations}\r\n        disclaimer={disclaimer}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"search-container\">\r\n      <MultiAuthLogin \r\n        position=\"top-right\"\r\n        className=\"main-login-button\"\r\n        onUserChange={handleUserChange}\r\n        onSignIn={handleSignIn}\r\n        onSignOut={handleSignOut}\r\n      />\r\n\r\n      <h1 className=\"search-title\">What is Healthy?</h1>\r\n\r\n      <form onSubmit={handleTextSubmit} className=\"search-form\">\r\n        <div className=\"search-input-container\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Ask anything about health...\"\r\n            value={currentQuery}\r\n            onChange={(e) => setCurrentQuery(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            className=\"search-input\"\r\n          />\r\n          \r\n          {/* Show image chip when image is uploaded */}\r\n          {image && (\r\n            <div className=\"image-preview\">\r\n              <div className=\"image-icon\">📷</div>\r\n              <span className=\"image-name\">{image.name}</span>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setImage(null);\r\n                  setCurrentPhotoId(null);\r\n                  const searchInput = document.querySelector('.search-input') as HTMLInputElement;\r\n                  if (searchInput) {\r\n                    searchInput.classList.remove('with-image');\r\n                  }\r\n                }}\r\n                className=\"remove-image\"\r\n                aria-label=\"Remove image\"\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"search-icons\">\r\n            {(query || image) && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleClearAll}\r\n                className=\"icon-button clear-button\"\r\n                aria-label=\"Clear all\"\r\n              >\r\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\r\n                </svg>\r\n              </button>\r\n            )}\r\n            \r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCameraClick}\r\n              className=\"icon-button\"\r\n              aria-label=\"Upload image\"\r\n            >\r\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"/>\r\n              </svg>\r\n            </button>\r\n            \r\n            <button\r\n              type=\"button\"\r\n              onClick={handleVoiceInput}\r\n              className={`icon-button ${isListening ? 'listening' : ''}`}\r\n              aria-label={isListening ? 'Stop listening' : 'Start voice input'}\r\n            >\r\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\"/>\r\n                <path d=\"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.28c3.39-.49 6-3.3 6-6.72h-2z\"/>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <div className=\"search-actions\">\r\n        <button \r\n          type=\"button\" \r\n          className=\"search-button\"\r\n          onClick={() => window.open('https://mhealth.com', '_blank')}\r\n        >\r\n          mHealth\r\n        </button>\r\n        <button \r\n          type=\"button\"\r\n          className=\"search-button\"\r\n          onClick={() => window.open('https://whatishealthy.org', '_blank')}\r\n        >\r\n          What is Healthy?\r\n        </button>\r\n      </div>\r\n\r\n      {/* Voice Feedback */}\r\n      {isListening && (\r\n        <div className=\"voice-feedback\">\r\n          <p>🎤 Listening...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add the ImageUploadModal */}\r\n      <ImageUploadModal\r\n        isOpen={isUploadModalOpen}\r\n        onClose={() => setIsUploadModalOpen(false)}\r\n        onAnalysisComplete={handleAnalysisComplete}\r\n        title=\"Upload Image\"\r\n        subtitle=\"Upload images for analysis\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n// Wrapper with Router for routing support (if needed in the future)\r\nconst App: React.FC = () => {\r\n  console.log(\"App component rendered\");\r\n  \r\n  return <VHealthAppContent />;\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}