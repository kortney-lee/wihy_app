{"ast":null,"code":"var _jsxFileName = \"C:\\\\repo\\\\wihy_ui\\\\client\\\\src\\\\components\\\\ui\\\\FullScreenChat.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { chatService } from '../../services/chatService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FullScreenChat = ({\n  isOpen,\n  onClose,\n  initialQuery,\n  initialResponse\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // Initialize with provided query/response\n  useEffect(() => {\n    if (initialQuery && initialResponse && messages.length === 0) {\n      const newMessages = [{\n        id: Date.now().toString() + '-user',\n        type: 'user',\n        message: initialQuery,\n        timestamp: new Date()\n      }, {\n        id: Date.now().toString() + '-assistant',\n        type: 'assistant',\n        message: initialResponse,\n        timestamp: new Date()\n      }];\n      setMessages(newMessages);\n    }\n  }, [initialQuery, initialResponse]);\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n\n  // Focus input when opened\n  useEffect(() => {\n    if (isOpen && inputRef.current) {\n      setTimeout(() => {\n        var _inputRef$current;\n        return (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n      }, 100);\n    }\n  }, [isOpen]);\n  const handleSendMessage = async () => {\n    const messageText = inputMessage.trim();\n    if (!messageText || isLoading) return;\n    const userMessage = {\n      id: Date.now().toString() + '-user',\n      type: 'user',\n      message: messageText,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputMessage('');\n    setIsLoading(true);\n    try {\n      const response = await chatService.sendDirectMessage(messageText);\n      let aiResponse = '';\n      if (response && typeof response === 'object') {\n        var _analysis, _analysis2, _analysis2$recommenda;\n        if ((_analysis = response.analysis) !== null && _analysis !== void 0 && _analysis.summary) {\n          aiResponse = response.analysis.summary;\n        } else if (((_analysis2 = response.analysis) === null || _analysis2 === void 0 ? void 0 : (_analysis2$recommenda = _analysis2.recommendations) === null || _analysis2$recommenda === void 0 ? void 0 : _analysis2$recommenda.length) > 0) {\n          aiResponse = response.analysis.recommendations[0];\n        } else if (response.response) {\n          aiResponse = response.response;\n        } else if (response.message) {\n          aiResponse = response.message;\n        } else {\n          aiResponse = 'I received your message but had trouble formatting the response. Could you try asking in a different way?';\n        }\n      } else if (typeof response === 'string') {\n        aiResponse = response;\n      } else {\n        aiResponse = 'I apologize, but I encountered an issue processing your request. Could you please try again?';\n      }\n\n      // Provide helpful health responses for demo\n      if (aiResponse.length < 20 || aiResponse.includes('There is no cure')) {\n        const userQuery = messageText.toLowerCase();\n        if (userQuery.includes('healthy') || userQuery.includes('health')) {\n          aiResponse = \"Great question about health! Being healthy generally involves maintaining a balanced diet, regular exercise, adequate sleep, and managing stress. What specific aspect of health would you like to explore?\";\n        } else if (userQuery.includes('diet') || userQuery.includes('nutrition') || userQuery.includes('eat')) {\n          aiResponse = \"Nutrition is key to good health! A balanced diet with plenty of fruits, vegetables, whole grains, and lean proteins is important. Would you like tips on any specific dietary concerns?\";\n        } else if (userQuery.includes('exercise') || userQuery.includes('fitness')) {\n          aiResponse = \"Regular physical activity is essential for health! Aim for at least 150 minutes of moderate exercise per week. What type of activities interest you?\";\n        } else {\n          aiResponse = \"I'm here to help with your health questions! What would you like to know about nutrition, exercise, or wellness?\";\n        }\n      }\n      const aiMessage = {\n        id: Date.now().toString() + '-assistant',\n        type: 'assistant',\n        message: aiResponse,\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, aiMessage]);\n    } catch (error) {\n      console.error('Chat error:', error);\n      const errorMessage = {\n        id: Date.now().toString() + '-assistant',\n        type: 'assistant',\n        message: \"I'm having trouble connecting right now. Please try again in a moment.\",\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const formatTime = date => {\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: '#ffffff',\n      zIndex: 10000,\n      display: 'flex',\n      flexDirection: 'column',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        padding: '16px 24px',\n        borderBottom: '1px solid #e5e7eb',\n        backgroundColor: '#ffffff',\n        position: 'sticky',\n        top: 0,\n        zIndex: 100\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/assets/wihyfavicon.png\",\n          alt: \"WiHy\",\n          style: {\n            width: '32px',\n            height: '32px',\n            borderRadius: '8px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              margin: 0,\n              fontSize: '18px',\n              fontWeight: '600',\n              color: '#1f2937'\n            },\n            children: \"WiHy Health Assistant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: 0,\n              fontSize: '14px',\n              color: '#6b7280'\n            },\n            children: \"AI-powered health guidance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        style: {\n          width: '40px',\n          height: '40px',\n          borderRadius: '50%',\n          border: 'none',\n          backgroundColor: '#f3f4f6',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontSize: '18px',\n          color: '#6b7280',\n          transition: 'all 0.2s ease'\n        },\n        onMouseEnter: e => {\n          e.currentTarget.style.backgroundColor = '#e5e7eb';\n        },\n        onMouseLeave: e => {\n          e.currentTarget.style.backgroundColor = '#f3f4f6';\n        },\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        padding: '24px',\n        maxWidth: '768px',\n        margin: '0 auto',\n        width: '100%',\n        scrollBehavior: 'smooth'\n      },\n      children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '60vh',\n          textAlign: 'center',\n          color: '#6b7280'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '64px',\n            height: '64px',\n            borderRadius: '16px',\n            backgroundColor: '#f3f4f6',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: '24px',\n            marginBottom: '16px'\n          },\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: '20px',\n            fontWeight: '600',\n            color: '#1f2937',\n            margin: '0 0 8px 0'\n          },\n          children: \"How can I help you today?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '16px',\n            margin: 0,\n            maxWidth: '400px'\n          },\n          children: \"Ask me anything about health, nutrition, exercise, or wellness. I'm here to provide evidence-based guidance.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this) : messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '16px',\n          marginBottom: '24px',\n          alignItems: 'flex-start'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '32px',\n            height: '32px',\n            borderRadius: '50%',\n            backgroundColor: message.type === 'user' ? '#10b981' : '#f3f4f6',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            color: message.type === 'user' ? 'white' : '#6b7280',\n            fontSize: '14px',\n            fontWeight: 'bold',\n            flexShrink: 0\n          },\n          children: message.type === 'user' ? 'U' : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/assets/wihyfavicon.png\",\n            alt: \"WiHy\",\n            style: {\n              width: '20px',\n              height: '20px',\n              borderRadius: '4px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1,\n            minWidth: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '16px',\n              lineHeight: '1.6',\n              color: '#1f2937',\n              whiteSpace: 'pre-wrap',\n              wordWrap: 'break-word'\n            },\n            children: message.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#9ca3af',\n              marginTop: '8px'\n            },\n            children: formatTime(message.timestamp)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 15\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 13\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '16px',\n          marginBottom: '24px',\n          alignItems: 'flex-start'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: '32px',\n            height: '32px',\n            borderRadius: '50%',\n            backgroundColor: '#f3f4f6',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            flexShrink: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/assets/wihyfavicon.png\",\n            alt: \"WiHy\",\n            style: {\n              width: '20px',\n              height: '20px',\n              borderRadius: '4px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '4px',\n            alignItems: 'center',\n            padding: '12px 16px',\n            backgroundColor: '#f9fafb',\n            borderRadius: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '8px',\n              height: '8px',\n              borderRadius: '50%',\n              backgroundColor: '#9ca3af',\n              animation: 'typing 1.4s ease-in-out infinite'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '8px',\n              height: '8px',\n              borderRadius: '50%',\n              backgroundColor: '#9ca3af',\n              animation: 'typing 1.4s ease-in-out infinite 0.2s'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '8px',\n              height: '8px',\n              borderRadius: '50%',\n              backgroundColor: '#9ca3af',\n              animation: 'typing 1.4s ease-in-out infinite 0.4s'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '16px 24px',\n        borderTop: '1px solid #e5e7eb',\n        backgroundColor: '#ffffff',\n        position: 'sticky',\n        bottom: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: '768px',\n          margin: '0 auto',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: inputRef,\n          value: inputMessage,\n          onChange: e => setInputMessage(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"Ask about your health...\",\n          disabled: isLoading,\n          style: {\n            width: '100%',\n            minHeight: '52px',\n            maxHeight: '120px',\n            padding: '14px 50px 14px 16px',\n            border: '1px solid #d1d5db',\n            borderRadius: '12px',\n            fontSize: '16px',\n            lineHeight: '1.5',\n            resize: 'none',\n            outline: 'none',\n            fontFamily: 'inherit',\n            backgroundColor: isLoading ? '#f9fafb' : '#ffffff',\n            color: isLoading ? '#9ca3af' : '#1f2937'\n          },\n          onFocus: e => {\n            e.target.style.borderColor = '#10b981';\n            e.target.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.1)';\n          },\n          onBlur: e => {\n            e.target.style.borderColor = '#d1d5db';\n            e.target.style.boxShadow = 'none';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSendMessage,\n          disabled: !inputMessage.trim() || isLoading,\n          style: {\n            position: 'absolute',\n            right: '8px',\n            top: '50%',\n            transform: 'translateY(-50%)',\n            width: '36px',\n            height: '36px',\n            borderRadius: '8px',\n            border: 'none',\n            backgroundColor: inputMessage.trim() && !isLoading ? '#10b981' : '#e5e7eb',\n            color: inputMessage.trim() && !isLoading ? 'white' : '#9ca3af',\n            cursor: inputMessage.trim() && !isLoading ? 'pointer' : 'not-allowed',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: '16px',\n            transition: 'all 0.2s ease'\n          },\n          children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '16px',\n              height: '16px',\n              border: '2px solid currentColor',\n              borderTop: '2px solid transparent',\n              borderRadius: '50%',\n              animation: 'spin 1s linear infinite'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 15\n          }, this) : '↑'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        @keyframes typing {\n          0%, 60%, 100% {\n            transform: translateY(0);\n            opacity: 0.4;\n          }\n          30% {\n            transform: translateY(-6px);\n            opacity: 1;\n          }\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n};\n_s(FullScreenChat, \"4NCSlTB5WUVuOP0aFpIeHomfSdI=\");\n_c = FullScreenChat;\nexport default FullScreenChat;\nvar _c;\n$RefreshReg$(_c, \"FullScreenChat\");","map":{"version":3,"names":["React","useState","useRef","useEffect","chatService","jsxDEV","_jsxDEV","FullScreenChat","isOpen","onClose","initialQuery","initialResponse","_s","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","messagesEndRef","inputRef","length","newMessages","id","Date","now","toString","type","message","timestamp","_messagesEndRef$curre","current","scrollIntoView","behavior","setTimeout","_inputRef$current","focus","handleSendMessage","messageText","trim","userMessage","prev","response","sendDirectMessage","aiResponse","_analysis","_analysis2","_analysis2$recommenda","analysis","summary","recommendations","includes","userQuery","toLowerCase","aiMessage","error","console","errorMessage","handleKeyPress","e","key","shiftKey","preventDefault","formatTime","date","toLocaleTimeString","hour","minute","style","position","top","left","right","bottom","backgroundColor","zIndex","display","flexDirection","fontFamily","children","alignItems","justifyContent","padding","borderBottom","gap","src","alt","width","height","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","margin","fontSize","fontWeight","color","onClick","border","cursor","transition","onMouseEnter","currentTarget","onMouseLeave","flex","overflowY","maxWidth","scrollBehavior","textAlign","marginBottom","map","flexShrink","minWidth","lineHeight","whiteSpace","wordWrap","marginTop","animation","ref","borderTop","value","onChange","target","onKeyPress","placeholder","disabled","minHeight","maxHeight","resize","outline","onFocus","borderColor","boxShadow","onBlur","transform","_c","$RefreshReg$"],"sources":["C:/repo/wihy_ui/client/src/components/ui/FullScreenChat.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { chatService } from '../../services/chatService';\r\n\r\ninterface ChatMessage {\r\n  id: string;\r\n  type: 'user' | 'assistant';\r\n  message: string;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface FullScreenChatProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  initialQuery?: string;\r\n  initialResponse?: string;\r\n}\r\n\r\nconst FullScreenChat: React.FC<FullScreenChatProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  initialQuery,\r\n  initialResponse\r\n}) => {\r\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  // Initialize with provided query/response\r\n  useEffect(() => {\r\n    if (initialQuery && initialResponse && messages.length === 0) {\r\n      const newMessages: ChatMessage[] = [\r\n        {\r\n          id: Date.now().toString() + '-user',\r\n          type: 'user',\r\n          message: initialQuery,\r\n          timestamp: new Date()\r\n        },\r\n        {\r\n          id: Date.now().toString() + '-assistant',\r\n          type: 'assistant',\r\n          message: initialResponse,\r\n          timestamp: new Date()\r\n        }\r\n      ];\r\n      setMessages(newMessages);\r\n    }\r\n  }, [initialQuery, initialResponse]);\r\n\r\n  // Auto-scroll to bottom\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, [messages]);\r\n\r\n  // Focus input when opened\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      setTimeout(() => inputRef.current?.focus(), 100);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleSendMessage = async () => {\r\n    const messageText = inputMessage.trim();\r\n    if (!messageText || isLoading) return;\r\n\r\n    const userMessage: ChatMessage = {\r\n      id: Date.now().toString() + '-user',\r\n      type: 'user',\r\n      message: messageText,\r\n      timestamp: new Date()\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInputMessage('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await chatService.sendDirectMessage(messageText);\r\n      \r\n      let aiResponse = '';\r\n      if (response && typeof response === 'object') {\r\n        if ((response as any).analysis?.summary) {\r\n          aiResponse = (response as any).analysis.summary;\r\n        } else if ((response as any).analysis?.recommendations?.length > 0) {\r\n          aiResponse = (response as any).analysis.recommendations[0];\r\n        } else if (response.response) {\r\n          aiResponse = response.response;\r\n        } else if (response.message) {\r\n          aiResponse = response.message;\r\n        } else {\r\n          aiResponse = 'I received your message but had trouble formatting the response. Could you try asking in a different way?';\r\n        }\r\n      } else if (typeof response === 'string') {\r\n        aiResponse = response;\r\n      } else {\r\n        aiResponse = 'I apologize, but I encountered an issue processing your request. Could you please try again?';\r\n      }\r\n\r\n      // Provide helpful health responses for demo\r\n      if (aiResponse.length < 20 || aiResponse.includes('There is no cure')) {\r\n        const userQuery = messageText.toLowerCase();\r\n        if (userQuery.includes('healthy') || userQuery.includes('health')) {\r\n          aiResponse = \"Great question about health! Being healthy generally involves maintaining a balanced diet, regular exercise, adequate sleep, and managing stress. What specific aspect of health would you like to explore?\";\r\n        } else if (userQuery.includes('diet') || userQuery.includes('nutrition') || userQuery.includes('eat')) {\r\n          aiResponse = \"Nutrition is key to good health! A balanced diet with plenty of fruits, vegetables, whole grains, and lean proteins is important. Would you like tips on any specific dietary concerns?\";\r\n        } else if (userQuery.includes('exercise') || userQuery.includes('fitness')) {\r\n          aiResponse = \"Regular physical activity is essential for health! Aim for at least 150 minutes of moderate exercise per week. What type of activities interest you?\";\r\n        } else {\r\n          aiResponse = \"I'm here to help with your health questions! What would you like to know about nutrition, exercise, or wellness?\";\r\n        }\r\n      }\r\n\r\n      const aiMessage: ChatMessage = {\r\n        id: Date.now().toString() + '-assistant',\r\n        type: 'assistant',\r\n        message: aiResponse,\r\n        timestamp: new Date()\r\n      };\r\n\r\n      setMessages(prev => [...prev, aiMessage]);\r\n    } catch (error) {\r\n      console.error('Chat error:', error);\r\n      const errorMessage: ChatMessage = {\r\n        id: Date.now().toString() + '-assistant',\r\n        type: 'assistant',\r\n        message: \"I'm having trouble connecting right now. Please try again in a moment.\",\r\n        timestamp: new Date()\r\n      };\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const formatTime = (date: Date) => {\r\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: '#ffffff',\r\n      zIndex: 10000,\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif'\r\n    }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        padding: '16px 24px',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        backgroundColor: '#ffffff',\r\n        position: 'sticky',\r\n        top: 0,\r\n        zIndex: 100\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          <img\r\n            src=\"/assets/wihyfavicon.png\"\r\n            alt=\"WiHy\"\r\n            style={{\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '8px'\r\n            }}\r\n          />\r\n          <div>\r\n            <h1 style={{\r\n              margin: 0,\r\n              fontSize: '18px',\r\n              fontWeight: '600',\r\n              color: '#1f2937'\r\n            }}>\r\n              WiHy Health Assistant\r\n            </h1>\r\n            <p style={{\r\n              margin: 0,\r\n              fontSize: '14px',\r\n              color: '#6b7280'\r\n            }}>\r\n              AI-powered health guidance\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          onClick={onClose}\r\n          style={{\r\n            width: '40px',\r\n            height: '40px',\r\n            borderRadius: '50%',\r\n            border: 'none',\r\n            backgroundColor: '#f3f4f6',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontSize: '18px',\r\n            color: '#6b7280',\r\n            transition: 'all 0.2s ease'\r\n          }}\r\n          onMouseEnter={(e) => {\r\n            e.currentTarget.style.backgroundColor = '#e5e7eb';\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            e.currentTarget.style.backgroundColor = '#f3f4f6';\r\n          }}\r\n        >\r\n          ✕\r\n        </button>\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div style={{\r\n        flex: 1,\r\n        overflowY: 'auto',\r\n        padding: '24px',\r\n        maxWidth: '768px',\r\n        margin: '0 auto',\r\n        width: '100%',\r\n        scrollBehavior: 'smooth'\r\n      }}>\r\n        {messages.length === 0 ? (\r\n          <div style={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            height: '60vh',\r\n            textAlign: 'center',\r\n            color: '#6b7280'\r\n          }}>\r\n            <div style={{\r\n              width: '64px',\r\n              height: '64px',\r\n              borderRadius: '16px',\r\n              backgroundColor: '#f3f4f6',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '24px',\r\n              marginBottom: '16px'\r\n            }}>\r\n              💬\r\n            </div>\r\n            <h3 style={{\r\n              fontSize: '20px',\r\n              fontWeight: '600',\r\n              color: '#1f2937',\r\n              margin: '0 0 8px 0'\r\n            }}>\r\n              How can I help you today?\r\n            </h3>\r\n            <p style={{\r\n              fontSize: '16px',\r\n              margin: 0,\r\n              maxWidth: '400px'\r\n            }}>\r\n              Ask me anything about health, nutrition, exercise, or wellness. I'm here to provide evidence-based guidance.\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          messages.map((message) => (\r\n            <div\r\n              key={message.id}\r\n              style={{\r\n                display: 'flex',\r\n                gap: '16px',\r\n                marginBottom: '24px',\r\n                alignItems: 'flex-start'\r\n              }}\r\n            >\r\n              <div style={{\r\n                width: '32px',\r\n                height: '32px',\r\n                borderRadius: '50%',\r\n                backgroundColor: message.type === 'user' ? '#10b981' : '#f3f4f6',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                color: message.type === 'user' ? 'white' : '#6b7280',\r\n                fontSize: '14px',\r\n                fontWeight: 'bold',\r\n                flexShrink: 0\r\n              }}>\r\n                {message.type === 'user' ? 'U' : (\r\n                  <img\r\n                    src=\"/assets/wihyfavicon.png\"\r\n                    alt=\"WiHy\"\r\n                    style={{ width: '20px', height: '20px', borderRadius: '4px' }}\r\n                  />\r\n                )}\r\n              </div>\r\n              \r\n              <div style={{ flex: 1, minWidth: 0 }}>\r\n                <div style={{\r\n                  fontSize: '16px',\r\n                  lineHeight: '1.6',\r\n                  color: '#1f2937',\r\n                  whiteSpace: 'pre-wrap',\r\n                  wordWrap: 'break-word'\r\n                }}>\r\n                  {message.message}\r\n                </div>\r\n                <div style={{\r\n                  fontSize: '12px',\r\n                  color: '#9ca3af',\r\n                  marginTop: '8px'\r\n                }}>\r\n                  {formatTime(message.timestamp)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n\r\n        {isLoading && (\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '16px',\r\n            marginBottom: '24px',\r\n            alignItems: 'flex-start'\r\n          }}>\r\n            <div style={{\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '50%',\r\n              backgroundColor: '#f3f4f6',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              flexShrink: 0\r\n            }}>\r\n              <img\r\n                src=\"/assets/wihyfavicon.png\"\r\n                alt=\"WiHy\"\r\n                style={{ width: '20px', height: '20px', borderRadius: '4px' }}\r\n              />\r\n            </div>\r\n            \r\n            <div style={{\r\n              display: 'flex',\r\n              gap: '4px',\r\n              alignItems: 'center',\r\n              padding: '12px 16px',\r\n              backgroundColor: '#f9fafb',\r\n              borderRadius: '12px'\r\n            }}>\r\n              <div style={{\r\n                width: '8px',\r\n                height: '8px',\r\n                borderRadius: '50%',\r\n                backgroundColor: '#9ca3af',\r\n                animation: 'typing 1.4s ease-in-out infinite'\r\n              }} />\r\n              <div style={{\r\n                width: '8px',\r\n                height: '8px',\r\n                borderRadius: '50%',\r\n                backgroundColor: '#9ca3af',\r\n                animation: 'typing 1.4s ease-in-out infinite 0.2s'\r\n              }} />\r\n              <div style={{\r\n                width: '8px',\r\n                height: '8px',\r\n                borderRadius: '50%',\r\n                backgroundColor: '#9ca3af',\r\n                animation: 'typing 1.4s ease-in-out infinite 0.4s'\r\n              }} />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <div style={{\r\n        padding: '16px 24px',\r\n        borderTop: '1px solid #e5e7eb',\r\n        backgroundColor: '#ffffff',\r\n        position: 'sticky',\r\n        bottom: 0\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '768px',\r\n          margin: '0 auto',\r\n          position: 'relative'\r\n        }}>\r\n          <textarea\r\n            ref={inputRef}\r\n            value={inputMessage}\r\n            onChange={(e) => setInputMessage(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Ask about your health...\"\r\n            disabled={isLoading}\r\n            style={{\r\n              width: '100%',\r\n              minHeight: '52px',\r\n              maxHeight: '120px',\r\n              padding: '14px 50px 14px 16px',\r\n              border: '1px solid #d1d5db',\r\n              borderRadius: '12px',\r\n              fontSize: '16px',\r\n              lineHeight: '1.5',\r\n              resize: 'none',\r\n              outline: 'none',\r\n              fontFamily: 'inherit',\r\n              backgroundColor: isLoading ? '#f9fafb' : '#ffffff',\r\n              color: isLoading ? '#9ca3af' : '#1f2937'\r\n            }}\r\n            onFocus={(e) => {\r\n              e.target.style.borderColor = '#10b981';\r\n              e.target.style.boxShadow = '0 0 0 3px rgba(16, 185, 129, 0.1)';\r\n            }}\r\n            onBlur={(e) => {\r\n              e.target.style.borderColor = '#d1d5db';\r\n              e.target.style.boxShadow = 'none';\r\n            }}\r\n          />\r\n          \r\n          <button\r\n            onClick={handleSendMessage}\r\n            disabled={!inputMessage.trim() || isLoading}\r\n            style={{\r\n              position: 'absolute',\r\n              right: '8px',\r\n              top: '50%',\r\n              transform: 'translateY(-50%)',\r\n              width: '36px',\r\n              height: '36px',\r\n              borderRadius: '8px',\r\n              border: 'none',\r\n              backgroundColor: inputMessage.trim() && !isLoading ? '#10b981' : '#e5e7eb',\r\n              color: inputMessage.trim() && !isLoading ? 'white' : '#9ca3af',\r\n              cursor: inputMessage.trim() && !isLoading ? 'pointer' : 'not-allowed',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '16px',\r\n              transition: 'all 0.2s ease'\r\n            }}\r\n          >\r\n            {isLoading ? (\r\n              <div style={{\r\n                width: '16px',\r\n                height: '16px',\r\n                border: '2px solid currentColor',\r\n                borderTop: '2px solid transparent',\r\n                borderRadius: '50%',\r\n                animation: 'spin 1s linear infinite'\r\n              }} />\r\n            ) : (\r\n              '↑'\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes typing {\r\n          0%, 60%, 100% {\r\n            transform: translateY(0);\r\n            opacity: 0.4;\r\n          }\r\n          30% {\r\n            transform: translateY(-6px);\r\n            opacity: 1;\r\n          }\r\n        }\r\n\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FullScreenChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}