{"ast":null,"code":"// Unified API configuration for mobile and desktop with dev flag\nconst getWihyApiUrl = () => {\n  // Check for explicit environment variable first (highest priority)\n  if (process.env.REACT_APP_WIHY_API_URL) {\n    return process.env.REACT_APP_WIHY_API_URL;\n  }\n\n  // Development flag - set to true to use local dev server, false for production\n  const USE_LOCAL_DEV = process.env.REACT_APP_USE_LOCAL_API === 'true';\n\n  // Check if we're on localhost (local development)\n  const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n  if (isLocalhost && USE_LOCAL_DEV) {\n    // Local development with dev flag enabled - use localhost API with port\n    return 'http://localhost:8000';\n  } else {\n    // Production/deployed OR dev flag disabled - use ml.wihy.ai without port (standard HTTPS)\n    return 'https://ml.wihy.ai';\n  }\n};\n\n// Add cache busting version\nconst CACHE_VERSION = 'v2.0.1'; // Increment this after each deployment\n\n// Environment configuration for API endpoints\nexport const API_CONFIG = {\n  // WIHY API - Unified for mobile and desktop\n  WIHY_API_URL: getWihyApiUrl()\n};\n\n// Debug logging\nconsole.log('🔍 API CONFIG DEBUG:', {\n  NODE_ENV: process.env.NODE_ENV,\n  REACT_APP_WIHY_API_URL: process.env.REACT_APP_WIHY_API_URL,\n  FINAL_URL: API_CONFIG.WIHY_API_URL,\n  HOSTNAME: window.location.hostname,\n  IS_LOCALHOST: window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1',\n  USE_LOCAL_DEV: process.env.REACT_APP_USE_LOCAL_API === 'true',\n  CACHE_VERSION: CACHE_VERSION,\n  DETECTION_REASON: process.env.REACT_APP_WIHY_API_URL ? 'ENV_VAR' : (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') && process.env.REACT_APP_USE_LOCAL_API === 'true' ? 'LOCAL_DEV' : 'PRODUCTION_ML_WIHY_AI'\n});\n\n// Dynamic endpoint helper functions\nexport const getApiEndpoint = (path = '') => {\n  const cleanPath = path.startsWith('/') ? path : `/${path}`;\n  const fullUrl = `${API_CONFIG.WIHY_API_URL}${cleanPath}`;\n  console.log('🔍 API ENDPOINT DEBUG:', {\n    path,\n    cleanPath,\n    baseURL: API_CONFIG.WIHY_API_URL,\n    fullUrl\n  });\n  return fullUrl;\n};\nexport const getWihyEndpoint = (path = '') => {\n  return getApiEndpoint(path);\n};\nexport default API_CONFIG;","map":{"version":3,"names":["getWihyApiUrl","process","env","REACT_APP_WIHY_API_URL","USE_LOCAL_DEV","REACT_APP_USE_LOCAL_API","isLocalhost","window","location","hostname","CACHE_VERSION","API_CONFIG","WIHY_API_URL","console","log","NODE_ENV","FINAL_URL","HOSTNAME","IS_LOCALHOST","DETECTION_REASON","getApiEndpoint","path","cleanPath","startsWith","fullUrl","baseURL","getWihyEndpoint"],"sources":["C:/repo/wihy_ui/client/src/config/apiConfig.ts"],"sourcesContent":["// Unified API configuration for mobile and desktop with dev flag\r\nconst getWihyApiUrl = () => {\r\n  // Check for explicit environment variable first (highest priority)\r\n  if (process.env.REACT_APP_WIHY_API_URL) {\r\n    return process.env.REACT_APP_WIHY_API_URL;\r\n  }\r\n  \r\n  // Development flag - set to true to use local dev server, false for production\r\n  const USE_LOCAL_DEV = process.env.REACT_APP_USE_LOCAL_API === 'true';\r\n  \r\n  // Check if we're on localhost (local development)\r\n  const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\r\n  \r\n  if (isLocalhost && USE_LOCAL_DEV) {\r\n    // Local development with dev flag enabled - use localhost API with port\r\n    return 'http://localhost:8000';\r\n  } else {\r\n    // Production/deployed OR dev flag disabled - use ml.wihy.ai without port (standard HTTPS)\r\n    return 'https://ml.wihy.ai';\r\n  }\r\n};\r\n\r\n// Add cache busting version\r\nconst CACHE_VERSION = 'v2.0.1'; // Increment this after each deployment\r\n\r\n// Environment configuration for API endpoints\r\nexport const API_CONFIG = {\r\n  // WIHY API - Unified for mobile and desktop\r\n  WIHY_API_URL: getWihyApiUrl(),\r\n} as const;\r\n\r\n// Debug logging\r\nconsole.log('🔍 API CONFIG DEBUG:', {\r\n  NODE_ENV: process.env.NODE_ENV,\r\n  REACT_APP_WIHY_API_URL: process.env.REACT_APP_WIHY_API_URL,\r\n  FINAL_URL: API_CONFIG.WIHY_API_URL,\r\n  HOSTNAME: window.location.hostname,\r\n  IS_LOCALHOST: window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1',\r\n  USE_LOCAL_DEV: process.env.REACT_APP_USE_LOCAL_API === 'true',\r\n  CACHE_VERSION: CACHE_VERSION,\r\n  DETECTION_REASON: process.env.REACT_APP_WIHY_API_URL ? 'ENV_VAR' : \r\n    (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') && process.env.REACT_APP_USE_LOCAL_API === 'true' ? 'LOCAL_DEV' : 'PRODUCTION_ML_WIHY_AI'\r\n});\r\n\r\n// Dynamic endpoint helper functions\r\nexport const getApiEndpoint = (path: string = '') => {\r\n  const cleanPath = path.startsWith('/') ? path : `/${path}`;\r\n  const fullUrl = `${API_CONFIG.WIHY_API_URL}${cleanPath}`;\r\n  console.log('🔍 API ENDPOINT DEBUG:', { path, cleanPath, baseURL: API_CONFIG.WIHY_API_URL, fullUrl });\r\n  return fullUrl;\r\n};\r\n\r\nexport const getWihyEndpoint = (path: string = '') => {\r\n  return getApiEndpoint(path);\r\n};\r\n\r\nexport default API_CONFIG;"],"mappings":"AAAA;AACA,MAAMA,aAAa,GAAGA,CAAA,KAAM;EAC1B;EACA,IAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAE;IACtC,OAAOF,OAAO,CAACC,GAAG,CAACC,sBAAsB;EAC3C;;EAEA;EACA,MAAMC,aAAa,GAAGH,OAAO,CAACC,GAAG,CAACG,uBAAuB,KAAK,MAAM;;EAEpE;EACA,MAAMC,WAAW,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW,IAAIF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW;EAExG,IAAIH,WAAW,IAAIF,aAAa,EAAE;IAChC;IACA,OAAO,uBAAuB;EAChC,CAAC,MAAM;IACL;IACA,OAAO,oBAAoB;EAC7B;AACF,CAAC;;AAED;AACA,MAAMM,aAAa,GAAG,QAAQ,CAAC,CAAC;;AAEhC;AACA,OAAO,MAAMC,UAAU,GAAG;EACxB;EACAC,YAAY,EAAEZ,aAAa,CAAC;AAC9B,CAAU;;AAEV;AACAa,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE;EAClCC,QAAQ,EAAEd,OAAO,CAACC,GAAG,CAACa,QAAQ;EAC9BZ,sBAAsB,EAAEF,OAAO,CAACC,GAAG,CAACC,sBAAsB;EAC1Da,SAAS,EAAEL,UAAU,CAACC,YAAY;EAClCK,QAAQ,EAAEV,MAAM,CAACC,QAAQ,CAACC,QAAQ;EAClCS,YAAY,EAAEX,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW,IAAIF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW;EAClGL,aAAa,EAAEH,OAAO,CAACC,GAAG,CAACG,uBAAuB,KAAK,MAAM;EAC7DK,aAAa,EAAEA,aAAa;EAC5BS,gBAAgB,EAAElB,OAAO,CAACC,GAAG,CAACC,sBAAsB,GAAG,SAAS,GAC9D,CAACI,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW,IAAIF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW,KAAKR,OAAO,CAACC,GAAG,CAACG,uBAAuB,KAAK,MAAM,GAAG,WAAW,GAAG;AAC7J,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMe,cAAc,GAAGA,CAACC,IAAY,GAAG,EAAE,KAAK;EACnD,MAAMC,SAAS,GAAGD,IAAI,CAACE,UAAU,CAAC,GAAG,CAAC,GAAGF,IAAI,GAAG,IAAIA,IAAI,EAAE;EAC1D,MAAMG,OAAO,GAAG,GAAGb,UAAU,CAACC,YAAY,GAAGU,SAAS,EAAE;EACxDT,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE;IAAEO,IAAI;IAAEC,SAAS;IAAEG,OAAO,EAAEd,UAAU,CAACC,YAAY;IAAEY;EAAQ,CAAC,CAAC;EACrG,OAAOA,OAAO;AAChB,CAAC;AAED,OAAO,MAAME,eAAe,GAAGA,CAACL,IAAY,GAAG,EAAE,KAAK;EACpD,OAAOD,cAAc,CAACC,IAAI,CAAC;AAC7B,CAAC;AAED,eAAeV,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}