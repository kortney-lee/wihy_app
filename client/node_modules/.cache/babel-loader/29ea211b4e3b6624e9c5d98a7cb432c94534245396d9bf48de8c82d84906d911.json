{"ast":null,"code":"var _jsxFileName = \"C:\\\\repo\\\\wihy_ui\\\\client\\\\src\\\\components\\\\shared\\\\MultiAuthLogin.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './MultiAuthLogin.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MultiAuthLogin = ({\n  position = 'top-right',\n  className = '',\n  onUserChange,\n  onSignIn,\n  onSignOut,\n  customProviders,\n  storageKey = 'vhealth_user',\n  title = 'Sign in to WiHy',\n  disclaimer = 'Your health data is secure and private. We only use your account for authentication.'\n}) => {\n  _s();\n  var _user$name;\n  const [user, setUser] = useState(null);\n  const [showProviders, setShowProviders] = useState(false);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  // Default authentication providers configuration\n  const defaultAuthProviders = [{\n    name: 'Google',\n    id: 'google',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      className: \"provider-icon\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#4285F4\",\n        d: \"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#34A853\",\n        d: \"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#FBBC05\",\n        d: \"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#EA4335\",\n        d: \"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this),\n    color: '#4285F4',\n    clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID || 'your-google-client-id',\n    authUrl: 'https://accounts.google.com/oauth/authorize'\n  }, {\n    name: 'Microsoft',\n    id: 'microsoft',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      className: \"provider-icon\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#F25022\",\n        d: \"M1 1h10v10H1z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#00A4EF\",\n        d: \"M13 1h10v10H13z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#7FBA00\",\n        d: \"M1 13h10v10H1z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#FFB900\",\n        d: \"M13 13h10v10H13z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this),\n    color: '#0078D4',\n    clientId: process.env.REACT_APP_MICROSOFT_CLIENT_ID || 'your-microsoft-client-id',\n    authUrl: 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize'\n  }, {\n    name: 'Apple',\n    id: 'apple',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      className: \"provider-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#000\",\n        d: \"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this),\n    color: '#000',\n    clientId: process.env.REACT_APP_APPLE_CLIENT_ID || 'your-apple-client-id',\n    authUrl: 'https://appleid.apple.com/auth/authorize'\n  }, {\n    name: 'Facebook',\n    id: 'facebook',\n    icon: /*#__PURE__*/_jsxDEV(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      className: \"provider-icon\",\n      children: /*#__PURE__*/_jsxDEV(\"path\", {\n        fill: \"#1877F2\",\n        d: \"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this),\n    color: '#1877F2',\n    clientId: process.env.REACT_APP_FACEBOOK_CLIENT_ID || 'your-facebook-client-id',\n    authUrl: 'https://www.facebook.com/v18.0/dialog/oauth'\n  }];\n  const authProviders = customProviders || defaultAuthProviders;\n  useEffect(() => {\n    // Check if user is already logged in\n    const savedUser = localStorage.getItem(storageKey);\n    if (savedUser) {\n      try {\n        const parsedUser = JSON.parse(savedUser);\n        setUser(parsedUser);\n        // IMPORTANT: Wrap this in a conditional to prevent excessive logging\n        if (!user) {\n          onUserChange === null || onUserChange === void 0 ? void 0 : onUserChange(parsedUser);\n        }\n      } catch (error) {\n        safeLog('Error parsing saved user', error);\n        localStorage.removeItem(storageKey);\n      }\n    }\n\n    // Handle OAuth callback\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    const state = urlParams.get('state');\n    if (code && state && !user) {\n      handleOAuthCallback(code, state);\n    }\n  }, [storageKey]); // Remove onUserChange from dependencies\n\n  // Manage body class for modal state\n  useEffect(() => {\n    if (showProviders || showDropdown) {\n      document.body.classList.add('modal-open');\n    } else {\n      document.body.classList.remove('modal-open');\n    }\n\n    // Cleanup function to remove class when component unmounts\n    return () => {\n      document.body.classList.remove('modal-open');\n    };\n  }, [showProviders, showDropdown]);\n  const handleOAuthCallback = async (code, state) => {\n    setLoading(true);\n    try {\n      const provider = state;\n\n      // TODO: Replace with actual API call to your backend\n      // const response = await fetch('/api/auth/oauth/callback', {\n      //   method: 'POST',\n      //   headers: { 'Content-Type': 'application/json' },\n      //   body: JSON.stringify({ code, state, provider })\n      // });\n      // const userData = await response.json();\n\n      // For demo purposes, simulate a successful login\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      const mockUser = {\n        id: `${provider}-123456`,\n        name: `User from ${provider.charAt(0).toUpperCase() + provider.slice(1)}`,\n        email: `user@${provider === 'microsoft' ? 'outlook.com' : provider}.com`,\n        picture: `https://via.placeholder.com/40/${getProviderColor(provider).replace('#', '')}/ffffff?text=${provider.charAt(0).toUpperCase()}`,\n        provider\n      };\n      setUser(mockUser);\n      localStorage.setItem(storageKey, JSON.stringify(mockUser));\n      onUserChange === null || onUserChange === void 0 ? void 0 : onUserChange(mockUser);\n      onSignIn === null || onSignIn === void 0 ? void 0 : onSignIn(mockUser);\n\n      // Clean up URL\n      window.history.replaceState({}, document.title, window.location.pathname);\n    } catch (error) {\n      // console.error('OAuth callback error:', error);\n      safeLog('OAuth callback error', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getProviderColor = provider => {\n    const providerObj = authProviders.find(p => p.id === provider);\n    return (providerObj === null || providerObj === void 0 ? void 0 : providerObj.color) || '#666';\n  };\n  const handleProviderLogin = provider => {\n    const params = new URLSearchParams({\n      client_id: provider.clientId,\n      redirect_uri: window.location.origin,\n      response_type: 'code',\n      scope: getProviderScopes(provider.id),\n      state: provider.id,\n      ...(provider.id === 'microsoft' && {\n        response_mode: 'query'\n      }),\n      ...(provider.id === 'apple' && {\n        response_mode: 'form_post'\n      })\n    });\n    const authUrl = `${provider.authUrl}?${params.toString()}`;\n    window.location.href = authUrl;\n  };\n  const getProviderScopes = providerId => {\n    const scopes = {\n      google: 'openid profile email',\n      microsoft: 'openid profile email',\n      apple: 'name email',\n      facebook: 'email public_profile'\n    };\n    return scopes[providerId] || 'profile email';\n  };\n  const handleSignOut = () => {\n    setUser(null);\n    localStorage.removeItem(storageKey);\n    setShowDropdown(false);\n    setShowProviders(false);\n    onUserChange === null || onUserChange === void 0 ? void 0 : onUserChange(null);\n    onSignOut === null || onSignOut === void 0 ? void 0 : onSignOut();\n  };\n  const handleLoginClick = () => {\n    if (user) {\n      setShowDropdown(!showDropdown);\n    } else {\n      setShowProviders(!showProviders);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `multi-auth-container ${position} ${className}`,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: `login-icon ${user ? 'authenticated' : ''}`,\n      onClick: handleLoginClick,\n      disabled: loading,\n      \"aria-label\": user ? 'User menu' : 'Sign in',\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this) : user ? user.picture ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: user.picture,\n        alt: \"Profile\",\n        className: \"profile-image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-initial\",\n        style: {\n          backgroundColor: getProviderColor(user.provider)\n        },\n        children: ((_user$name = user.name) === null || _user$name === void 0 ? void 0 : _user$name.charAt(0)) || 'U'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n        viewBox: \"0 0 24 24\",\n        fill: \"currentColor\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), !user && showProviders && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"providers-popup\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"providers-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-button\",\n          onClick: () => setShowProviders(false),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"providers-list\",\n        children: authProviders.map(provider => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"provider-button\",\n          onClick: () => handleProviderLogin(provider),\n          style: {\n            '--provider-color': provider.color\n          },\n          children: [provider.icon, /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Continue with \", provider.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 17\n          }, this)]\n        }, provider.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"providers-disclaimer\",\n        children: disclaimer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }, this), user && showDropdown && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-dropdown\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-name\",\n          children: user.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-email\",\n          children: user.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-provider\",\n          children: [\"Signed in with \", user.provider.charAt(0).toUpperCase() + user.provider.slice(1)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dropdown-divider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"dropdown-item\",\n        onClick: handleSignOut,\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          viewBox: \"0 0 24 24\",\n          fill: \"currentColor\",\n          className: \"dropdown-icon\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this), \"Sign Out\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }, this), (showProviders || showDropdown) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-overlay\",\n      onClick: () => {\n        setShowProviders(false);\n        setShowDropdown(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 238,\n    columnNumber: 5\n  }, this);\n};\n_s(MultiAuthLogin, \"00UJ1Yw4k/7DZVzODHcTIWi/IMI=\");\n_c = MultiAuthLogin;\nexport default MultiAuthLogin;\n\n// Add this helper function at the top of your file\nconst safeLog = (message, data) => {\n  if (data === undefined) {\n    console.log(message);\n    return;\n  }\n  try {\n    if (typeof data === 'object' && data !== null) {\n      console.log(message, JSON.stringify(data));\n    } else {\n      console.log(message, data);\n    }\n  } catch (error) {\n    console.log(message, '(Object could not be stringified)');\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"MultiAuthLogin\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","MultiAuthLogin","position","className","onUserChange","onSignIn","onSignOut","customProviders","storageKey","title","disclaimer","_s","_user$name","user","setUser","showProviders","setShowProviders","showDropdown","setShowDropdown","loading","setLoading","defaultAuthProviders","name","id","icon","viewBox","children","fill","d","fileName","_jsxFileName","lineNumber","columnNumber","color","clientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","authUrl","REACT_APP_MICROSOFT_CLIENT_ID","REACT_APP_APPLE_CLIENT_ID","REACT_APP_FACEBOOK_CLIENT_ID","authProviders","savedUser","localStorage","getItem","parsedUser","JSON","parse","error","safeLog","removeItem","urlParams","URLSearchParams","window","location","search","code","get","state","handleOAuthCallback","document","body","classList","add","remove","provider","Promise","resolve","setTimeout","mockUser","charAt","toUpperCase","slice","email","picture","getProviderColor","replace","setItem","stringify","history","replaceState","pathname","providerObj","find","p","handleProviderLogin","params","client_id","redirect_uri","origin","response_type","scope","getProviderScopes","response_mode","toString","href","providerId","scopes","google","microsoft","apple","facebook","handleSignOut","handleLoginClick","onClick","disabled","src","alt","style","backgroundColor","map","_c","message","data","undefined","console","log","$RefreshReg$"],"sources":["C:/repo/wihy_ui/client/src/components/shared/MultiAuthLogin.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport './MultiAuthLogin.css';\r\n\r\nexport interface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  picture?: string;\r\n  provider: 'google' | 'microsoft' | 'apple' | 'facebook';\r\n}\r\n\r\nexport interface AuthProvider {\r\n  name: string;\r\n  id: 'google' | 'microsoft' | 'apple' | 'facebook';\r\n  icon: React.ReactNode; // Changed from JSX.Element\r\n  color: string;\r\n  clientId: string;\r\n  authUrl: string;\r\n}\r\n\r\ninterface MultiAuthLoginProps {\r\n  position?: 'top-right' | 'inline';\r\n  className?: string;\r\n  onUserChange?: (user: User | null) => void;\r\n  onSignIn?: (user: User) => void;\r\n  onSignOut?: () => void;\r\n  customProviders?: AuthProvider[];\r\n  storageKey?: string;\r\n  title?: string;\r\n  disclaimer?: string;\r\n}\r\n\r\nconst MultiAuthLogin: React.FC<MultiAuthLoginProps> = ({\r\n  position = 'top-right',\r\n  className = '',\r\n  onUserChange,\r\n  onSignIn,\r\n  onSignOut,\r\n  customProviders,\r\n  storageKey = 'vhealth_user',\r\n  title = 'Sign in to WiHy',\r\n  disclaimer = 'Your health data is secure and private. We only use your account for authentication.'\r\n}) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [showProviders, setShowProviders] = useState(false);\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Default authentication providers configuration\r\n  const defaultAuthProviders: AuthProvider[] = [\r\n    {\r\n      name: 'Google',\r\n      id: 'google',\r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" className=\"provider-icon\">\r\n          <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\r\n          <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\r\n          <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\r\n          <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\r\n        </svg>\r\n      ),\r\n      color: '#4285F4',\r\n      clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID || 'your-google-client-id',\r\n      authUrl: 'https://accounts.google.com/oauth/authorize'\r\n    },\r\n    {\r\n      name: 'Microsoft',\r\n      id: 'microsoft',\r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" className=\"provider-icon\">\r\n          <path fill=\"#F25022\" d=\"M1 1h10v10H1z\"/>\r\n          <path fill=\"#00A4EF\" d=\"M13 1h10v10H13z\"/>\r\n          <path fill=\"#7FBA00\" d=\"M1 13h10v10H1z\"/>\r\n          <path fill=\"#FFB900\" d=\"M13 13h10v10H13z\"/>\r\n        </svg>\r\n      ),\r\n      color: '#0078D4',\r\n      clientId: process.env.REACT_APP_MICROSOFT_CLIENT_ID || 'your-microsoft-client-id',\r\n      authUrl: 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize'\r\n    },\r\n    {\r\n      name: 'Apple',\r\n      id: 'apple',\r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" className=\"provider-icon\">\r\n          <path fill=\"#000\" d=\"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z\"/>\r\n        </svg>\r\n      ),\r\n      color: '#000',\r\n      clientId: process.env.REACT_APP_APPLE_CLIENT_ID || 'your-apple-client-id',\r\n      authUrl: 'https://appleid.apple.com/auth/authorize'\r\n    },\r\n    {\r\n      name: 'Facebook',\r\n      id: 'facebook',\r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" className=\"provider-icon\">\r\n          <path fill=\"#1877F2\" d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\r\n        </svg>\r\n      ),\r\n      color: '#1877F2',\r\n      clientId: process.env.REACT_APP_FACEBOOK_CLIENT_ID || 'your-facebook-client-id',\r\n      authUrl: 'https://www.facebook.com/v18.0/dialog/oauth'\r\n    }\r\n  ];\r\n\r\n  const authProviders = customProviders || defaultAuthProviders;\r\n\r\n  useEffect(() => {\r\n    // Check if user is already logged in\r\n    const savedUser = localStorage.getItem(storageKey);\r\n    if (savedUser) {\r\n      try {\r\n        const parsedUser = JSON.parse(savedUser);\r\n        setUser(parsedUser);\r\n        // IMPORTANT: Wrap this in a conditional to prevent excessive logging\r\n        if (!user) {\r\n          onUserChange?.(parsedUser);\r\n        }\r\n      } catch (error) {\r\n        safeLog('Error parsing saved user', error);\r\n        localStorage.removeItem(storageKey);\r\n      }\r\n    }\r\n\r\n    // Handle OAuth callback\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const code = urlParams.get('code');\r\n    const state = urlParams.get('state');\r\n    \r\n    if (code && state && !user) {\r\n      handleOAuthCallback(code, state);\r\n    }\r\n  }, [storageKey]); // Remove onUserChange from dependencies\r\n\r\n  // Manage body class for modal state\r\n  useEffect(() => {\r\n    if (showProviders || showDropdown) {\r\n      document.body.classList.add('modal-open');\r\n    } else {\r\n      document.body.classList.remove('modal-open');\r\n    }\r\n\r\n    // Cleanup function to remove class when component unmounts\r\n    return () => {\r\n      document.body.classList.remove('modal-open');\r\n    };\r\n  }, [showProviders, showDropdown]);\r\n\r\n  const handleOAuthCallback = async (code: string, state: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const provider = state as 'google' | 'microsoft' | 'apple' | 'facebook';\r\n      \r\n      // TODO: Replace with actual API call to your backend\r\n      // const response = await fetch('/api/auth/oauth/callback', {\r\n      //   method: 'POST',\r\n      //   headers: { 'Content-Type': 'application/json' },\r\n      //   body: JSON.stringify({ code, state, provider })\r\n      // });\r\n      // const userData = await response.json();\r\n      \r\n      // For demo purposes, simulate a successful login\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      const mockUser: User = {\r\n        id: `${provider}-123456`,\r\n        name: `User from ${provider.charAt(0).toUpperCase() + provider.slice(1)}`,\r\n        email: `user@${provider === 'microsoft' ? 'outlook.com' : provider}.com`,\r\n        picture: `https://via.placeholder.com/40/${getProviderColor(provider).replace('#', '')}/ffffff?text=${provider.charAt(0).toUpperCase()}`,\r\n        provider\r\n      };\r\n\r\n      setUser(mockUser);\r\n      localStorage.setItem(storageKey, JSON.stringify(mockUser));\r\n      onUserChange?.(mockUser);\r\n      onSignIn?.(mockUser);\r\n      \r\n      // Clean up URL\r\n      window.history.replaceState({}, document.title, window.location.pathname);\r\n    } catch (error) {\r\n      // console.error('OAuth callback error:', error);\r\n      safeLog('OAuth callback error', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getProviderColor = (provider: string): string => {\r\n    const providerObj = authProviders.find(p => p.id === provider);\r\n    return providerObj?.color || '#666';\r\n  };\r\n\r\n  const handleProviderLogin = (provider: AuthProvider) => {\r\n    const params = new URLSearchParams({\r\n      client_id: provider.clientId,\r\n      redirect_uri: window.location.origin,\r\n      response_type: 'code',\r\n      scope: getProviderScopes(provider.id),\r\n      state: provider.id,\r\n      ...(provider.id === 'microsoft' && { response_mode: 'query' }),\r\n      ...(provider.id === 'apple' && { response_mode: 'form_post' })\r\n    });\r\n\r\n    const authUrl = `${provider.authUrl}?${params.toString()}`;\r\n    window.location.href = authUrl;\r\n  };\r\n\r\n  const getProviderScopes = (providerId: string): string => {\r\n    const scopes = {\r\n      google: 'openid profile email',\r\n      microsoft: 'openid profile email',\r\n      apple: 'name email',\r\n      facebook: 'email public_profile'\r\n    };\r\n    return scopes[providerId as keyof typeof scopes] || 'profile email';\r\n  };\r\n\r\n  const handleSignOut = () => {\r\n    setUser(null);\r\n    localStorage.removeItem(storageKey);\r\n    setShowDropdown(false);\r\n    setShowProviders(false);\r\n    onUserChange?.(null);\r\n    onSignOut?.();\r\n  };\r\n\r\n  const handleLoginClick = () => {\r\n    if (user) {\r\n      setShowDropdown(!showDropdown);\r\n    } else {\r\n      setShowProviders(!showProviders);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`multi-auth-container ${position} ${className}`}>\r\n      {/* Main Login Button */}\r\n      <button \r\n        className={`login-icon ${user ? 'authenticated' : ''}`}\r\n        onClick={handleLoginClick}\r\n        disabled={loading}\r\n        aria-label={user ? 'User menu' : 'Sign in'}\r\n      >\r\n        {loading ? (\r\n          <div className=\"login-spinner\"></div>\r\n        ) : user ? (\r\n          user.picture ? (\r\n            <img \r\n              src={user.picture} \r\n              alt=\"Profile\" \r\n              className=\"profile-image\"\r\n            />\r\n          ) : (\r\n            <div \r\n              className=\"profile-initial\"\r\n              style={{ backgroundColor: getProviderColor(user.provider) }}\r\n            >\r\n              {user.name?.charAt(0) || 'U'}\r\n            </div>\r\n          )\r\n        ) : (\r\n          <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n            <path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/>\r\n          </svg>\r\n        )}\r\n      </button>\r\n\r\n      {/* Provider Selection Popup */}\r\n      {!user && showProviders && (\r\n        <div className=\"providers-popup\">\r\n          <div className=\"providers-header\">\r\n            <h3>{title}</h3>\r\n            <button \r\n              className=\"close-button\"\r\n              onClick={() => setShowProviders(false)}\r\n            >\r\n              ×\r\n            </button>\r\n          </div>\r\n          <div className=\"providers-list\">\r\n            {authProviders.map((provider) => (\r\n              <button\r\n                key={provider.id}\r\n                className=\"provider-button\"\r\n                onClick={() => handleProviderLogin(provider)}\r\n                style={{ '--provider-color': provider.color } as React.CSSProperties}\r\n              >\r\n                {provider.icon}\r\n                <span>Continue with {provider.name}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n          <p className=\"providers-disclaimer\">\r\n            {disclaimer}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* User Dropdown */}\r\n      {user && showDropdown && (\r\n        <div className=\"user-dropdown\">\r\n          <div className=\"user-info\">\r\n            <div className=\"user-name\">{user.name}</div>\r\n            <div className=\"user-email\">{user.email}</div>\r\n            <div className=\"user-provider\">\r\n              Signed in with {user.provider.charAt(0).toUpperCase() + user.provider.slice(1)}\r\n            </div>\r\n          </div>\r\n          <div className=\"dropdown-divider\"></div>\r\n          <button className=\"dropdown-item\" onClick={handleSignOut}>\r\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"dropdown-icon\">\r\n              <path d=\"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z\"/>\r\n            </svg>\r\n            Sign Out\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Overlay */}\r\n      {(showProviders || showDropdown) && (\r\n        <div \r\n          className=\"auth-overlay\" \r\n          onClick={() => {\r\n            setShowProviders(false);\r\n            setShowDropdown(false);\r\n          }}\r\n        ></div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MultiAuthLogin;\r\n\r\n// Add this helper function at the top of your file\r\nconst safeLog = (message: string, data?: any) => {\r\n  if (data === undefined) {\r\n    console.log(message);\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    if (typeof data === 'object' && data !== null) {\r\n      console.log(message, JSON.stringify(data));\r\n    } else {\r\n      console.log(message, data);\r\n    }\r\n  } catch (error) {\r\n    console.log(message, '(Object could not be stringified)');\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}