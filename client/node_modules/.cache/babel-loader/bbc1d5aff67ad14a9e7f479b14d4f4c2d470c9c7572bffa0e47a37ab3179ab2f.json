{"ast":null,"code":"var _jsxFileName = \"C:\\\\repo\\\\wihy_ui\\\\client\\\\src\\\\components\\\\SmartCapture.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport Webcam from \"react-webcam\";\nimport Quagga from \"@ericblade/quagga2\";\nimport \"./SmartCapture.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SmartCapture = ({\n  onResult,\n  startingMode = \"barcode\",\n  width = 640,\n  height = 480,\n  onClose\n}) => {\n  _s();\n  const [mode, setMode] = useState(startingMode);\n  const webcamRef = useRef(null);\n  const quaggaStarted = useRef(false);\n  const videoContainerRef = useRef(null);\n\n  // ---------- BARCODE (Quagga) ----------\n  const startQuagga = useCallback(async () => {\n    if (quaggaStarted.current || mode !== \"barcode\") return;\n    quaggaStarted.current = true;\n\n    // Choose environment camera when available\n    const constraints = {\n      facingMode: {\n        ideal: \"environment\"\n      },\n      width: {\n        ideal: width\n      },\n      height: {\n        ideal: height\n      }\n    };\n    Quagga.init({\n      inputStream: {\n        type: \"LiveStream\",\n        target: videoContainerRef.current,\n        constraints,\n        area: {\n          top: \"20%\",\n          right: \"10%\",\n          left: \"10%\",\n          bottom: \"20%\"\n        } // scan box\n      },\n      decoder: {\n        readers: [\"ean_reader\", \"ean_8_reader\", \"upc_reader\", \"upc_e_reader\", \"code_128_reader\"]\n      },\n      locate: true\n    }, err => {\n      if (err) {\n        console.error(\"Quagga init error:\", err);\n        quaggaStarted.current = false;\n        return;\n      }\n      Quagga.start();\n    });\n    Quagga.onDetected(data => {\n      var _data$codeResult;\n      const code = data === null || data === void 0 ? void 0 : (_data$codeResult = data.codeResult) === null || _data$codeResult === void 0 ? void 0 : _data$codeResult.code;\n      if (!code) return;\n      onResult({\n        kind: \"barcode\",\n        code,\n        format: data.codeResult.format\n      });\n      // Optional: stop after first detection\n      Quagga.stop();\n      quaggaStarted.current = false;\n    });\n  }, [mode, onResult, width, height]);\n  const stopQuagga = useCallback(() => {\n    if (quaggaStarted.current) {\n      try {\n        Quagga.stop();\n      } catch {}\n      quaggaStarted.current = false;\n    }\n  }, []);\n\n  // Manage scanner lifecycle on mode change\n  useEffect(() => {\n    if (mode === \"barcode\") startQuagga();else stopQuagga();\n    return () => stopQuagga();\n  }, [mode, startQuagga, stopQuagga]);\n\n  // ---------- CAMERA (React Webcam) ----------\n  const capturePhoto = () => {\n    var _webcamRef$current;\n    const shot = (_webcamRef$current = webcamRef.current) === null || _webcamRef$current === void 0 ? void 0 : _webcamRef$current.getScreenshot();\n    if (shot) onResult({\n      kind: \"image\",\n      dataUrl: shot,\n      file: null\n    });\n  };\n\n  // ---------- UPLOAD ----------\n  const onFile = async file => {\n    const dataUrl = await fileToDataURL(file);\n    onResult({\n      kind: \"image\",\n      dataUrl,\n      file\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"smart-capture-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"smart-capture\",\n      children: [onClose && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sc-header\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"sc-close\",\n          \"aria-label\": \"Close\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"24\",\n            height: \"24\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M18 6L6 18M6 6L18 18\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sc-tabs\",\n        role: \"tablist\",\n        \"aria-label\": \"Capture options\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          role: \"tab\",\n          \"aria-selected\": mode === \"barcode\",\n          className: mode === \"barcode\" ? \"active\" : \"\",\n          onClick: () => setMode(\"barcode\"),\n          children: \"\\uD83D\\uDCF1 Scan Barcode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          role: \"tab\",\n          \"aria-selected\": mode === \"camera\",\n          className: mode === \"camera\" ? \"active\" : \"\",\n          onClick: () => setMode(\"camera\"),\n          children: \"\\uD83D\\uDCF7 Take Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          role: \"tab\",\n          \"aria-selected\": mode === \"upload\",\n          className: mode === \"upload\" ? \"active\" : \"\",\n          onClick: () => setMode(\"upload\"),\n          children: \"\\uD83D\\uDCC1 Upload Photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sc-panel\",\n        children: [mode === \"barcode\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sc-mode-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Scan Product Barcode\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Point your camera at a product barcode (UPC/EAN) to get nutrition information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: videoContainerRef,\n            className: \"sc-video\",\n            style: {\n              width,\n              height,\n              position: \"relative\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sc-box\",\n              \"aria-hidden\": true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), mode === \"camera\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sc-mode-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Take Food Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Capture a photo of your food for AI nutrition analysis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sc-video\",\n            style: {\n              width,\n              height,\n              position: \"relative\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Webcam, {\n              ref: webcamRef,\n              audio: false,\n              screenshotFormat: \"image/jpeg\",\n              videoConstraints: {\n                facingMode: \"environment\"\n              },\n              style: {\n                width: \"100%\",\n                height: \"100%\",\n                borderRadius: 12\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"sc-action\",\n              onClick: capturePhoto,\n              \"aria-label\": \"Capture photo\",\n              children: \"\\uD83D\\uDCF8 Capture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), mode === \"upload\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sc-mode-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Upload Food Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select a photo from your device for nutrition analysis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"sc-upload\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: e => {\n                var _e$target$files;\n                const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n                if (f) onFile(f);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sc-upload-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"48\",\n                height: \"48\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                  points: \"7,10 12,15 17,10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                  x1: \"12\",\n                  y1: \"15\",\n                  x2: \"12\",\n                  y2: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Choose image file...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(SmartCapture, \"z8BQ6gHEtN9rdLg3Iv4wenp3I4k=\");\n_c = SmartCapture;\nexport default SmartCapture;\n\n// ---------- helpers ----------\nfunction fileToDataURL(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => resolve(String(reader.result));\n    reader.onerror = reject;\n    reader.readAsDataURL(file);\n  });\n}\nvar _c;\n$RefreshReg$(_c, \"SmartCapture\");","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","Webcam","Quagga","jsxDEV","_jsxDEV","SmartCapture","onResult","startingMode","width","height","onClose","_s","mode","setMode","webcamRef","quaggaStarted","videoContainerRef","startQuagga","current","constraints","facingMode","ideal","init","inputStream","type","target","area","top","right","left","bottom","decoder","readers","locate","err","console","error","start","onDetected","data","_data$codeResult","code","codeResult","kind","format","stop","stopQuagga","capturePhoto","_webcamRef$current","shot","getScreenshot","dataUrl","file","onFile","fileToDataURL","className","children","onClick","viewBox","fill","d","stroke","strokeWidth","strokeLinecap","fileName","_jsxFileName","lineNumber","columnNumber","role","ref","style","position","audio","screenshotFormat","videoConstraints","borderRadius","accept","onChange","e","_e$target$files","f","files","points","x1","y1","x2","y2","_c","Promise","resolve","reject","reader","FileReader","onload","String","result","onerror","readAsDataURL","$RefreshReg$"],"sources":["C:/repo/wihy_ui/client/src/components/SmartCapture.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport Webcam from \"react-webcam\";\r\nimport Quagga from \"@ericblade/quagga2\";\r\nimport \"./SmartCapture.css\";\r\n\r\ntype CaptureResult =\r\n  | { kind: \"barcode\"; code: string; format?: string }\r\n  | { kind: \"image\"; dataUrl: string; file?: File | null };\r\n\r\ntype Props = {\r\n  onResult: (result: CaptureResult) => void;\r\n  startingMode?: \"barcode\" | \"camera\" | \"upload\";\r\n  width?: number;\r\n  height?: number;\r\n  onClose?: () => void;\r\n};\r\n\r\nconst SmartCapture: React.FC<Props> = ({\r\n  onResult,\r\n  startingMode = \"barcode\",\r\n  width = 640,\r\n  height = 480,\r\n  onClose,\r\n}) => {\r\n  const [mode, setMode] = useState<\"barcode\" | \"camera\" | \"upload\">(startingMode);\r\n  const webcamRef = useRef<Webcam>(null);\r\n  const quaggaStarted = useRef(false);\r\n  const videoContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // ---------- BARCODE (Quagga) ----------\r\n  const startQuagga = useCallback(async () => {\r\n    if (quaggaStarted.current || mode !== \"barcode\") return;\r\n    quaggaStarted.current = true;\r\n\r\n    // Choose environment camera when available\r\n    const constraints = {\r\n      facingMode: { ideal: \"environment\" as const },\r\n      width: { ideal: width },\r\n      height: { ideal: height },\r\n    };\r\n\r\n    Quagga.init(\r\n      {\r\n        inputStream: {\r\n          type: \"LiveStream\",\r\n          target: videoContainerRef.current!,\r\n          constraints,\r\n          area: { top: \"20%\", right: \"10%\", left: \"10%\", bottom: \"20%\" }, // scan box\r\n        },\r\n        decoder: {\r\n          readers: [\r\n            \"ean_reader\",\r\n            \"ean_8_reader\",\r\n            \"upc_reader\",\r\n            \"upc_e_reader\",\r\n            \"code_128_reader\",\r\n          ],\r\n        },\r\n        locate: true,\r\n      },\r\n      (err) => {\r\n        if (err) {\r\n          console.error(\"Quagga init error:\", err);\r\n          quaggaStarted.current = false;\r\n          return;\r\n        }\r\n        Quagga.start();\r\n      }\r\n    );\r\n\r\n    Quagga.onDetected((data) => {\r\n      const code = data?.codeResult?.code;\r\n      if (!code) return;\r\n      onResult({ kind: \"barcode\", code, format: data.codeResult.format });\r\n      // Optional: stop after first detection\r\n      Quagga.stop();\r\n      quaggaStarted.current = false;\r\n    });\r\n  }, [mode, onResult, width, height]);\r\n\r\n  const stopQuagga = useCallback(() => {\r\n    if (quaggaStarted.current) {\r\n      try {\r\n        Quagga.stop();\r\n      } catch {}\r\n      quaggaStarted.current = false;\r\n    }\r\n  }, []);\r\n\r\n  // Manage scanner lifecycle on mode change\r\n  useEffect(() => {\r\n    if (mode === \"barcode\") startQuagga();\r\n    else stopQuagga();\r\n    return () => stopQuagga();\r\n  }, [mode, startQuagga, stopQuagga]);\r\n\r\n  // ---------- CAMERA (React Webcam) ----------\r\n  const capturePhoto = () => {\r\n    const shot = webcamRef.current?.getScreenshot();\r\n    if (shot) onResult({ kind: \"image\", dataUrl: shot, file: null });\r\n  };\r\n\r\n  // ---------- UPLOAD ----------\r\n  const onFile = async (file: File) => {\r\n    const dataUrl = await fileToDataURL(file);\r\n    onResult({ kind: \"image\", dataUrl, file });\r\n  };\r\n\r\n  return (\r\n    <div className=\"smart-capture-overlay\">\r\n      <div className=\"smart-capture\">\r\n      {/* Close button */}\r\n      {onClose && (\r\n        <div className=\"sc-header\">\r\n          <button onClick={onClose} className=\"sc-close\" aria-label=\"Close\">\r\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n              <path d=\"M18 6L6 18M6 6L18 18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"sc-tabs\" role=\"tablist\" aria-label=\"Capture options\">\r\n        <button\r\n          role=\"tab\"\r\n          aria-selected={mode === \"barcode\"}\r\n          className={mode === \"barcode\" ? \"active\" : \"\"}\r\n          onClick={() => setMode(\"barcode\")}\r\n        >\r\n          📱 Scan Barcode\r\n        </button>\r\n        <button\r\n          role=\"tab\"\r\n          aria-selected={mode === \"camera\"}\r\n          className={mode === \"camera\" ? \"active\" : \"\"}\r\n          onClick={() => setMode(\"camera\")}\r\n        >\r\n          📷 Take Photo\r\n        </button>\r\n        <button\r\n          role=\"tab\"\r\n          aria-selected={mode === \"upload\"}\r\n          className={mode === \"upload\" ? \"active\" : \"\"}\r\n          onClick={() => setMode(\"upload\")}\r\n        >\r\n          📁 Upload Photo\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"sc-panel\">\r\n        {mode === \"barcode\" && (\r\n          <div className=\"sc-mode-info\">\r\n            <h3>Scan Product Barcode</h3>\r\n            <p>Point your camera at a product barcode (UPC/EAN) to get nutrition information</p>\r\n            <div\r\n              ref={videoContainerRef}\r\n              className=\"sc-video\"\r\n              style={{ width, height, position: \"relative\" }}\r\n            >\r\n              {/* scan box overlay */}\r\n              <div className=\"sc-box\" aria-hidden />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {mode === \"camera\" && (\r\n          <div className=\"sc-mode-info\">\r\n            <h3>Take Food Photo</h3>\r\n            <p>Capture a photo of your food for AI nutrition analysis</p>\r\n            <div className=\"sc-video\" style={{ width, height, position: \"relative\" }}>\r\n              <Webcam\r\n                ref={webcamRef}\r\n                audio={false}\r\n                screenshotFormat=\"image/jpeg\"\r\n                videoConstraints={{ facingMode: \"environment\" }}\r\n                style={{ width: \"100%\", height: \"100%\", borderRadius: 12 }}\r\n              />\r\n              <button className=\"sc-action\" onClick={capturePhoto} aria-label=\"Capture photo\">\r\n                📸 Capture\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {mode === \"upload\" && (\r\n          <div className=\"sc-mode-info\">\r\n            <h3>Upload Food Photo</h3>\r\n            <p>Select a photo from your device for nutrition analysis</p>\r\n            <label className=\"sc-upload\">\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={(e) => {\r\n                  const f = e.target.files?.[0];\r\n                  if (f) onFile(f);\r\n                }}\r\n              />\r\n              <div className=\"sc-upload-content\">\r\n                <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n                  <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/>\r\n                  <polyline points=\"7,10 12,15 17,10\"/>\r\n                  <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"/>\r\n                </svg>\r\n                <span>Choose image file...</span>\r\n              </div>\r\n            </label>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SmartCapture;\r\n\r\n// ---------- helpers ----------\r\nfunction fileToDataURL(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => resolve(String(reader.result));\r\n    reader.onerror = reject;\r\n    reader.readAsDataURL(file);\r\n  });\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}