{"ast":null,"code":"// src/components/ImageUploadModal.tsx\nimport React,{useState}from'react';import'./Spinner.css';import'../styles/VHealthSearch.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ImageUploadModal=_ref=>{let{isOpen,onClose,onAnalysisComplete,// Updated prop name\ntitle=\"Upload Image\",subtitle=\"Upload images for analysis\"}=_ref;const[isDragging,setIsDragging]=useState(false);const[imageUrl,setImageUrl]=useState('');const[isProcessing,setIsProcessing]=useState(false);if(!isOpen)return null;// Handle file drop\nconst handleDrop=async e=>{e.preventDefault();setIsDragging(false);const files=Array.from(e.dataTransfer.files);const imageFile=files.find(file=>file.type.startsWith('image/'));if(imageFile){await processFile(imageFile);}else{alert('Please upload an image file (JPG, PNG, GIF, etc.)');}};// Handle drag events\nconst handleDragOver=e=>{e.preventDefault();setIsDragging(true);};const handleDragLeave=e=>{e.preventDefault();setIsDragging(false);};// Handle file input\nconst handleFileInput=async e=>{var _e$target$files;console.log('📁 File input triggered');const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];console.log('📁 Selected file:',file);if(file){await processFile(file);}else{console.log('❌ No file selected');}};// Handle URL upload\nconst handleUrlUpload=async()=>{if(!imageUrl.trim()){alert('Please enter a valid image URL');return;}setIsProcessing(true);try{const response=await fetch(imageUrl);const blob=await response.blob();if(!blob.type.startsWith('image/')){throw new Error('URL does not point to an image');}const file=new File([blob],'uploaded-image.jpg',{type:blob.type});await processFile(file);}catch(error){console.error('Error loading image from URL:',error);alert('Failed to load image from URL. Please check the URL and try again.');}finally{setIsProcessing(false);}};// Process file and analyze it\nconst processFile=async file=>{console.log('🔍 STEP 1: File received:',{name:file.name,type:file.type,size:file.size});setIsProcessing(true);try{console.log('🔍 STEP 2: Using WiHy Scan API...');// Import wihyAPI dynamically to avoid circular imports\nconst{wihyAPI}=await import('../services/wihyAPI');console.log('🔍 STEP 3: Making scan API call...');const result=await wihyAPI.scanFood(file);console.log('🔍 STEP 4: Scan API response received:',result);// Extract food name from the scan result using unified format\nlet foodName='unknown';// Type-safe check for unified response format\nif(result.success&&'data'in result&&result.data){var _unifiedResult$data$a;const unifiedResult=result;// Use any to handle type checking\n// Primary: Get health advice from AI response\nif((_unifiedResult$data$a=unifiedResult.data.ai_response)!==null&&_unifiedResult$data$a!==void 0&&_unifiedResult$data$a.response){foodName=unifiedResult.data.ai_response.response;console.log('🔍 Using AI response:',foodName);}// Fallback: Try to get product name or other analysis\nelse if(unifiedResult.data.product_name){foodName=unifiedResult.data.product_name;console.log('🔍 Using product name:',foodName);}else if(unifiedResult.data.analysis){foodName=unifiedResult.data.analysis;console.log('🔍 Using analysis:',foodName);}else{foodName='Food item scanned';console.log('🔍 Using fallback name');}}else{console.log('❌ No valid response data found');foodName='Food analysis unavailable';}console.log('🔍 STEP 5: Extracted food name:',foodName);console.log('🔍 STEP 6: Triggering analysis completion for:',foodName);onAnalysisComplete(foodName);}catch(error){console.error('❌ Error in processFile:',error);}finally{setIsProcessing(false);}};// Handle modal close\nconst handleClose=()=>{if(!isProcessing){onClose();setImageUrl('');setIsDragging(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"photo-modal-overlay \".concat(isOpen?'open':''),onClick:handleClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"photo-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"modal-subtitle\",children:subtitle}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:handleClose,\"aria-label\":\"Close\",disabled:isProcessing,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-area \".concat(isDragging?'dragging':'',\" \").concat(isProcessing?'processing':''),onDrop:handleDrop,onDragOver:handleDragOver,onDragLeave:handleDragLeave,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upload-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"upload-icon\",children:isProcessing?/*#__PURE__*/_jsx(\"div\",{className:\"upload-spinner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})}):/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z\"})})}),isProcessing?/*#__PURE__*/_jsx(\"p\",{className:\"upload-text\",children:\"Analyzing image...\"}):/*#__PURE__*/_jsxs(\"p\",{className:\"upload-text\",children:[isDragging?'Drop image here':'Drag an image here or',' ',/*#__PURE__*/_jsx(\"button\",{className:\"upload-link\",onClick:()=>{var _document$getElementB;return(_document$getElementB=document.getElementById('modal-file-input'))===null||_document$getElementB===void 0?void 0:_document$getElementB.click();},disabled:isProcessing,children:\"upload a file\"})]})]}),/*#__PURE__*/_jsx(\"input\",{id:\"modal-file-input\",type:\"file\",accept:\"image/*\",style:{display:'none'},onChange:handleFileInput,disabled:isProcessing})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-divider\",children:/*#__PURE__*/_jsx(\"span\",{children:\" \"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"url-input-section\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"Paste image URL\",className:\"url-input\",value:imageUrl,onChange:e=>setImageUrl(e.target.value),onKeyPress:e=>{if(e.key==='Enter'){handleUrlUpload();}},disabled:isProcessing}),/*#__PURE__*/_jsx(\"button\",{className:\"search-button-modal \".concat(isProcessing?'processing':''),onClick:handleUrlUpload,disabled:isProcessing||!imageUrl.trim(),children:isProcessing?'Analyzing...':'Search'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"upload-info\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Supported formats: JPG, PNG, GIF, WebP (max 10MB)\"})})]})});};export default ImageUploadModal;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ImageUploadModal","_ref","isOpen","onClose","onAnalysisComplete","title","subtitle","isDragging","setIsDragging","imageUrl","setImageUrl","isProcessing","setIsProcessing","handleDrop","e","preventDefault","files","Array","from","dataTransfer","imageFile","find","file","type","startsWith","processFile","alert","handleDragOver","handleDragLeave","handleFileInput","_e$target$files","console","log","target","handleUrlUpload","trim","response","fetch","blob","Error","File","error","name","size","wihyAPI","result","scanFood","foodName","success","data","_unifiedResult$data$a","unifiedResult","ai_response","product_name","analysis","handleClose","className","concat","onClick","children","stopPropagation","disabled","onDrop","onDragOver","onDragLeave","viewBox","fill","d","_document$getElementB","document","getElementById","click","id","accept","style","display","onChange","placeholder","value","onKeyPress","key"],"sources":["C:/repo/wihy_ui/client/src/components/ImageUploadModal.tsx"],"sourcesContent":["// src/components/ImageUploadModal.tsx\r\nimport React, { useState, useRef } from 'react';\r\nimport './Spinner.css';\r\nimport '../styles/VHealthSearch.css';\r\n\r\ninterface ImageUploadModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onAnalysisComplete: (foodName: string) => void; // Changed from onFileSelect\r\n  title?: string;\r\n  subtitle?: string;\r\n}\r\n\r\nconst ImageUploadModal: React.FC<ImageUploadModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onAnalysisComplete, // Updated prop name\r\n  title = \"Upload Image\",\r\n  subtitle = \"Upload images for analysis\"\r\n}) => {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [imageUrl, setImageUrl] = useState('');\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Handle file drop\r\n  const handleDrop = async (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n    \r\n    const files = Array.from(e.dataTransfer.files);\r\n    const imageFile = files.find(file => file.type.startsWith('image/'));\r\n    \r\n    if (imageFile) {\r\n      await processFile(imageFile);\r\n    } else {\r\n      alert('Please upload an image file (JPG, PNG, GIF, etc.)');\r\n    }\r\n  };\r\n\r\n  // Handle drag events\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleDragLeave = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n  };\r\n\r\n  // Handle file input\r\n  const handleFileInput = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    console.log('📁 File input triggered');\r\n    const file = e.target.files?.[0];\r\n    console.log('📁 Selected file:', file);\r\n    if (file) {\r\n      await processFile(file);\r\n    } else {\r\n      console.log('❌ No file selected');\r\n    }\r\n  };\r\n\r\n  // Handle URL upload\r\n  const handleUrlUpload = async () => {\r\n    if (!imageUrl.trim()) {\r\n      alert('Please enter a valid image URL');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      const response = await fetch(imageUrl);\r\n      const blob = await response.blob();\r\n      \r\n      if (!blob.type.startsWith('image/')) {\r\n        throw new Error('URL does not point to an image');\r\n      }\r\n\r\n      const file = new File([blob], 'uploaded-image.jpg', { type: blob.type });\r\n      await processFile(file);\r\n    } catch (error) {\r\n      console.error('Error loading image from URL:', error);\r\n      alert('Failed to load image from URL. Please check the URL and try again.');\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Process file and analyze it\r\n  const processFile = async (file: File) => {\r\n    console.log('🔍 STEP 1: File received:', {\r\n      name: file.name,\r\n      type: file.type,\r\n      size: file.size\r\n    });\r\n    \r\n    setIsProcessing(true);\r\n    \r\n    try {\r\n      console.log('🔍 STEP 2: Using WiHy Scan API...');\r\n      \r\n      // Import wihyAPI dynamically to avoid circular imports\r\n      const { wihyAPI } = await import('../services/wihyAPI');\r\n      \r\n      console.log('🔍 STEP 3: Making scan API call...');\r\n      const result = await wihyAPI.scanFood(file);\r\n\r\n      console.log('🔍 STEP 4: Scan API response received:', result);\r\n      \r\n      // Extract food name from the scan result using unified format\r\n      let foodName = 'unknown';\r\n      \r\n      // Type-safe check for unified response format\r\n      if (result.success && 'data' in result && result.data) {\r\n        const unifiedResult = result as any; // Use any to handle type checking\r\n        \r\n        // Primary: Get health advice from AI response\r\n        if (unifiedResult.data.ai_response?.response) {\r\n          foodName = unifiedResult.data.ai_response.response;\r\n          console.log('🔍 Using AI response:', foodName);\r\n        }\r\n        // Fallback: Try to get product name or other analysis\r\n        else if (unifiedResult.data.product_name) {\r\n          foodName = unifiedResult.data.product_name;\r\n          console.log('🔍 Using product name:', foodName);\r\n        }\r\n        else if (unifiedResult.data.analysis) {\r\n          foodName = unifiedResult.data.analysis;\r\n          console.log('🔍 Using analysis:', foodName);\r\n        }\r\n        else {\r\n          foodName = 'Food item scanned';\r\n          console.log('🔍 Using fallback name');\r\n        }\r\n      } else {\r\n        console.log('❌ No valid response data found');\r\n        foodName = 'Food analysis unavailable';\r\n      }\r\n      \r\n      console.log('🔍 STEP 5: Extracted food name:', foodName);\r\n      \r\n      console.log('🔍 STEP 6: Triggering analysis completion for:', foodName);\r\n      onAnalysisComplete(foodName);\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Error in processFile:', error);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Handle modal close\r\n  const handleClose = () => {\r\n    if (!isProcessing) {\r\n      onClose();\r\n      setImageUrl('');\r\n      setIsDragging(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`photo-modal-overlay ${isOpen ? 'open' : ''}`} onClick={handleClose}>\r\n      <div className=\"photo-modal\" onClick={(e) => e.stopPropagation()}>\r\n        <div className=\"modal-header\">\r\n          <h2>{title}</h2>\r\n          <p className=\"modal-subtitle\">{subtitle}</p>\r\n          <button \r\n            className=\"modal-close\"\r\n            onClick={handleClose}\r\n            aria-label=\"Close\"\r\n            disabled={isProcessing}\r\n          >\r\n            ×\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Upload Area */}\r\n        <div \r\n          className={`upload-area ${isDragging ? 'dragging' : ''} ${isProcessing ? 'processing' : ''}`}\r\n          onDrop={handleDrop}\r\n          onDragOver={handleDragOver}\r\n          onDragLeave={handleDragLeave}\r\n        >\r\n          <div className=\"upload-content\">\r\n            <div className=\"upload-icon\">\r\n              {isProcessing ? (\r\n                <div className=\"upload-spinner\">\r\n                  <div className=\"spinner\"></div>\r\n                </div>\r\n              ) : (\r\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                  <path d=\"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z\"/>\r\n                </svg>\r\n              )}\r\n            </div>\r\n            \r\n            {isProcessing ? (\r\n              <p className=\"upload-text\">Analyzing image...</p>\r\n            ) : (\r\n              <p className=\"upload-text\">\r\n                {isDragging ? 'Drop image here' : 'Drag an image here or'}{' '}\r\n                <button \r\n                  className=\"upload-link\"\r\n                  onClick={() => document.getElementById('modal-file-input')?.click()}\r\n                  disabled={isProcessing}\r\n                >\r\n                  upload a file\r\n                </button>\r\n              </p>\r\n            )}\r\n          </div>\r\n          \r\n          <input\r\n            id=\"modal-file-input\"\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            style={{ display: 'none' }}\r\n            onChange={handleFileInput}\r\n            disabled={isProcessing}\r\n          />\r\n        </div>\r\n        \r\n        {/* Divider */}\r\n        <div className=\"modal-divider\">\r\n          <span> </span>\r\n        </div>\r\n        \r\n        {/* URL Input */}\r\n        <div className=\"url-input-section\">\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"Paste image URL\"\r\n            className=\"url-input\"\r\n            value={imageUrl}\r\n            onChange={(e) => setImageUrl(e.target.value)}\r\n            onKeyPress={(e) => {\r\n              if (e.key === 'Enter') {\r\n                handleUrlUpload();\r\n              }\r\n            }}\r\n            disabled={isProcessing}\r\n          />\r\n          <button \r\n            className={`search-button-modal ${isProcessing ? 'processing' : ''}`}\r\n            onClick={handleUrlUpload}\r\n            disabled={isProcessing || !imageUrl.trim()}\r\n          >\r\n            {isProcessing ? 'Analyzing...' : 'Search'}\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Supported formats */}\r\n        <div className=\"upload-info\">\r\n          <small>Supported formats: JPG, PNG, GIF, WebP (max 10MB)</small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUploadModal;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAgB,OAAO,CAC/C,MAAO,eAAe,CACtB,MAAO,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAUrC,KAAM,CAAAC,gBAAiD,CAAGC,IAAA,EAMpD,IANqD,CACzDC,MAAM,CACNC,OAAO,CACPC,kBAAkB,CAAE;AACpBC,KAAK,CAAG,cAAc,CACtBC,QAAQ,CAAG,4BACb,CAAC,CAAAL,IAAA,CACC,KAAM,CAACM,UAAU,CAAEC,aAAa,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACgB,YAAY,CAAEC,eAAe,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAEvD,GAAI,CAACO,MAAM,CAAE,MAAO,KAAI,CAExB;AACA,KAAM,CAAAW,UAAU,CAAG,KAAO,CAAAC,CAAkB,EAAK,CAC/CA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,aAAa,CAAC,KAAK,CAAC,CAEpB,KAAM,CAAAQ,KAAK,CAAGC,KAAK,CAACC,IAAI,CAACJ,CAAC,CAACK,YAAY,CAACH,KAAK,CAAC,CAC9C,KAAM,CAAAI,SAAS,CAAGJ,KAAK,CAACK,IAAI,CAACC,IAAI,EAAIA,IAAI,CAACC,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAEpE,GAAIJ,SAAS,CAAE,CACb,KAAM,CAAAK,WAAW,CAACL,SAAS,CAAC,CAC9B,CAAC,IAAM,CACLM,KAAK,CAAC,mDAAmD,CAAC,CAC5D,CACF,CAAC,CAED;AACA,KAAM,CAAAC,cAAc,CAAIb,CAAkB,EAAK,CAC7CA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,CAED,KAAM,CAAAoB,eAAe,CAAId,CAAkB,EAAK,CAC9CA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED;AACA,KAAM,CAAAqB,eAAe,CAAG,KAAO,CAAAf,CAAsC,EAAK,KAAAgB,eAAA,CACxEC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CACtC,KAAM,CAAAV,IAAI,EAAAQ,eAAA,CAAGhB,CAAC,CAACmB,MAAM,CAACjB,KAAK,UAAAc,eAAA,iBAAdA,eAAA,CAAiB,CAAC,CAAC,CAChCC,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEV,IAAI,CAAC,CACtC,GAAIA,IAAI,CAAE,CACR,KAAM,CAAAG,WAAW,CAACH,IAAI,CAAC,CACzB,CAAC,IAAM,CACLS,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACnC,CACF,CAAC,CAED;AACA,KAAM,CAAAE,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CAACzB,QAAQ,CAAC0B,IAAI,CAAC,CAAC,CAAE,CACpBT,KAAK,CAAC,gCAAgC,CAAC,CACvC,OACF,CAEAd,eAAe,CAAC,IAAI,CAAC,CACrB,GAAI,CACF,KAAM,CAAAwB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC5B,QAAQ,CAAC,CACtC,KAAM,CAAA6B,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACE,IAAI,CAAC,CAAC,CAElC,GAAI,CAACA,IAAI,CAACf,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,CAAE,CACnC,KAAM,IAAI,CAAAe,KAAK,CAAC,gCAAgC,CAAC,CACnD,CAEA,KAAM,CAAAjB,IAAI,CAAG,GAAI,CAAAkB,IAAI,CAAC,CAACF,IAAI,CAAC,CAAE,oBAAoB,CAAE,CAAEf,IAAI,CAAEe,IAAI,CAACf,IAAK,CAAC,CAAC,CACxE,KAAM,CAAAE,WAAW,CAACH,IAAI,CAAC,CACzB,CAAE,MAAOmB,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrDf,KAAK,CAAC,oEAAoE,CAAC,CAC7E,CAAC,OAAS,CACRd,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAED;AACA,KAAM,CAAAa,WAAW,CAAG,KAAO,CAAAH,IAAU,EAAK,CACxCS,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAE,CACvCU,IAAI,CAAEpB,IAAI,CAACoB,IAAI,CACfnB,IAAI,CAAED,IAAI,CAACC,IAAI,CACfoB,IAAI,CAAErB,IAAI,CAACqB,IACb,CAAC,CAAC,CAEF/B,eAAe,CAAC,IAAI,CAAC,CAErB,GAAI,CACFmB,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC,CAEhD;AACA,KAAM,CAAEY,OAAQ,CAAC,CAAG,KAAM,OAAM,CAAC,qBAAqB,CAAC,CAEvDb,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CACjD,KAAM,CAAAa,MAAM,CAAG,KAAM,CAAAD,OAAO,CAACE,QAAQ,CAACxB,IAAI,CAAC,CAE3CS,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAEa,MAAM,CAAC,CAE7D;AACA,GAAI,CAAAE,QAAQ,CAAG,SAAS,CAExB;AACA,GAAIF,MAAM,CAACG,OAAO,EAAI,MAAM,EAAI,CAAAH,MAAM,EAAIA,MAAM,CAACI,IAAI,CAAE,KAAAC,qBAAA,CACrD,KAAM,CAAAC,aAAa,CAAGN,MAAa,CAAE;AAErC;AACA,IAAAK,qBAAA,CAAIC,aAAa,CAACF,IAAI,CAACG,WAAW,UAAAF,qBAAA,WAA9BA,qBAAA,CAAgCd,QAAQ,CAAE,CAC5CW,QAAQ,CAAGI,aAAa,CAACF,IAAI,CAACG,WAAW,CAAChB,QAAQ,CAClDL,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEe,QAAQ,CAAC,CAChD,CACA;AAAA,IACK,IAAII,aAAa,CAACF,IAAI,CAACI,YAAY,CAAE,CACxCN,QAAQ,CAAGI,aAAa,CAACF,IAAI,CAACI,YAAY,CAC1CtB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEe,QAAQ,CAAC,CACjD,CAAC,IACI,IAAII,aAAa,CAACF,IAAI,CAACK,QAAQ,CAAE,CACpCP,QAAQ,CAAGI,aAAa,CAACF,IAAI,CAACK,QAAQ,CACtCvB,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEe,QAAQ,CAAC,CAC7C,CAAC,IACI,CACHA,QAAQ,CAAG,mBAAmB,CAC9BhB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACvC,CACF,CAAC,IAAM,CACLD,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC7Ce,QAAQ,CAAG,2BAA2B,CACxC,CAEAhB,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAEe,QAAQ,CAAC,CAExDhB,OAAO,CAACC,GAAG,CAAC,gDAAgD,CAAEe,QAAQ,CAAC,CACvE3C,kBAAkB,CAAC2C,QAAQ,CAAC,CAE9B,CAAE,MAAON,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CAAC,OAAS,CACR7B,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAED;AACA,KAAM,CAAA2C,WAAW,CAAGA,CAAA,GAAM,CACxB,GAAI,CAAC5C,YAAY,CAAE,CACjBR,OAAO,CAAC,CAAC,CACTO,WAAW,CAAC,EAAE,CAAC,CACfF,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,mBACEX,IAAA,QAAK2D,SAAS,wBAAAC,MAAA,CAAyBvD,MAAM,CAAG,MAAM,CAAG,EAAE,CAAG,CAACwD,OAAO,CAAEH,WAAY,CAAAI,QAAA,cAClF5D,KAAA,QAAKyD,SAAS,CAAC,aAAa,CAACE,OAAO,CAAG5C,CAAC,EAAKA,CAAC,CAAC8C,eAAe,CAAC,CAAE,CAAAD,QAAA,eAC/D5D,KAAA,QAAKyD,SAAS,CAAC,cAAc,CAAAG,QAAA,eAC3B9D,IAAA,OAAA8D,QAAA,CAAKtD,KAAK,CAAK,CAAC,cAChBR,IAAA,MAAG2D,SAAS,CAAC,gBAAgB,CAAAG,QAAA,CAAErD,QAAQ,CAAI,CAAC,cAC5CT,IAAA,WACE2D,SAAS,CAAC,aAAa,CACvBE,OAAO,CAAEH,WAAY,CACrB,aAAW,OAAO,CAClBM,QAAQ,CAAElD,YAAa,CAAAgD,QAAA,CACxB,MAED,CAAQ,CAAC,EACN,CAAC,cAGN5D,KAAA,QACEyD,SAAS,gBAAAC,MAAA,CAAiBlD,UAAU,CAAG,UAAU,CAAG,EAAE,MAAAkD,MAAA,CAAI9C,YAAY,CAAG,YAAY,CAAG,EAAE,CAAG,CAC7FmD,MAAM,CAAEjD,UAAW,CACnBkD,UAAU,CAAEpC,cAAe,CAC3BqC,WAAW,CAAEpC,eAAgB,CAAA+B,QAAA,eAE7B5D,KAAA,QAAKyD,SAAS,CAAC,gBAAgB,CAAAG,QAAA,eAC7B9D,IAAA,QAAK2D,SAAS,CAAC,aAAa,CAAAG,QAAA,CACzBhD,YAAY,cACXd,IAAA,QAAK2D,SAAS,CAAC,gBAAgB,CAAAG,QAAA,cAC7B9D,IAAA,QAAK2D,SAAS,CAAC,SAAS,CAAM,CAAC,CAC5B,CAAC,cAEN3D,IAAA,QAAKoE,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,cAAc,CAAAP,QAAA,cAC1C9D,IAAA,SAAMsE,CAAC,CAAC,yFAAyF,CAAC,CAAC,CAChG,CACN,CACE,CAAC,CAELxD,YAAY,cACXd,IAAA,MAAG2D,SAAS,CAAC,aAAa,CAAAG,QAAA,CAAC,oBAAkB,CAAG,CAAC,cAEjD5D,KAAA,MAAGyD,SAAS,CAAC,aAAa,CAAAG,QAAA,EACvBpD,UAAU,CAAG,iBAAiB,CAAG,uBAAuB,CAAE,GAAG,cAC9DV,IAAA,WACE2D,SAAS,CAAC,aAAa,CACvBE,OAAO,CAAEA,CAAA,QAAAU,qBAAA,QAAAA,qBAAA,CAAMC,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,UAAAF,qBAAA,iBAA3CA,qBAAA,CAA6CG,KAAK,CAAC,CAAC,EAAC,CACpEV,QAAQ,CAAElD,YAAa,CAAAgD,QAAA,CACxB,eAED,CAAQ,CAAC,EACR,CACJ,EACE,CAAC,cAEN9D,IAAA,UACE2E,EAAE,CAAC,kBAAkB,CACrBjD,IAAI,CAAC,MAAM,CACXkD,MAAM,CAAC,SAAS,CAChBC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAC3BC,QAAQ,CAAE/C,eAAgB,CAC1BgC,QAAQ,CAAElD,YAAa,CACxB,CAAC,EACC,CAAC,cAGNd,IAAA,QAAK2D,SAAS,CAAC,eAAe,CAAAG,QAAA,cAC5B9D,IAAA,SAAA8D,QAAA,CAAM,GAAC,CAAM,CAAC,CACX,CAAC,cAGN5D,KAAA,QAAKyD,SAAS,CAAC,mBAAmB,CAAAG,QAAA,eAChC9D,IAAA,UACE0B,IAAI,CAAC,KAAK,CACVsD,WAAW,CAAC,iBAAiB,CAC7BrB,SAAS,CAAC,WAAW,CACrBsB,KAAK,CAAErE,QAAS,CAChBmE,QAAQ,CAAG9D,CAAC,EAAKJ,WAAW,CAACI,CAAC,CAACmB,MAAM,CAAC6C,KAAK,CAAE,CAC7CC,UAAU,CAAGjE,CAAC,EAAK,CACjB,GAAIA,CAAC,CAACkE,GAAG,GAAK,OAAO,CAAE,CACrB9C,eAAe,CAAC,CAAC,CACnB,CACF,CAAE,CACF2B,QAAQ,CAAElD,YAAa,CACxB,CAAC,cACFd,IAAA,WACE2D,SAAS,wBAAAC,MAAA,CAAyB9C,YAAY,CAAG,YAAY,CAAG,EAAE,CAAG,CACrE+C,OAAO,CAAExB,eAAgB,CACzB2B,QAAQ,CAAElD,YAAY,EAAI,CAACF,QAAQ,CAAC0B,IAAI,CAAC,CAAE,CAAAwB,QAAA,CAE1ChD,YAAY,CAAG,cAAc,CAAG,QAAQ,CACnC,CAAC,EACN,CAAC,cAGNd,IAAA,QAAK2D,SAAS,CAAC,aAAa,CAAAG,QAAA,cAC1B9D,IAAA,UAAA8D,QAAA,CAAO,mDAAiD,CAAO,CAAC,CAC7D,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3D,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}