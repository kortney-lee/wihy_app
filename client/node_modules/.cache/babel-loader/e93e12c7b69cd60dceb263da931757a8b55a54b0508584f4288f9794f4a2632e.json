{"ast":null,"code":"var _jsxFileName = \"C:\\\\repo\\\\wihy_ui\\\\client\\\\src\\\\SearchResults.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { searchCache } from './services/searchCache';\nimport ImageUploadModal from './components/ImageUploadModal';\nimport ResultQualityPie from './components/ResultQualityPie';\nimport NutritionChart from './components/NutritionChart';\nimport NovaChart from './components/NovaChart';\nimport './styles/VHealthSearch.css';\nimport './styles/results-page.css';\nimport Header from './components/shared/components/Header';\nimport Spinner from './components/Spinner';\n\n/* Define default topics and resources */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst defaultRelatedTopics = [\"Nutrition and Diet Guidelines\", \"Exercise and Physical Activity\", \"Mental Health and Wellness\", \"Preventive Care and Screenings\", \"Chronic Disease Management\", \"Healthy Lifestyle Choices\"];\nconst defaultResources = [{\n  text: \"Nutrition ED - Learn More\",\n  url: \"https://vowels.com\"\n}, {\n  text: \"Nutrition 101\",\n  url: \"https://members.vowels.com\"\n}, {\n  text: \"The World Counts\",\n  url: \"https://www.theworldcounts.com/\"\n}];\n\n// Define the dummy data for \"test\" queries\nconst dummyTestData = {\n  query: \"test\",\n  healthInfo: `I'm sorry, but your query \"test\" is too vague. Could you please provide more details or specify the type of test you are interested in? It could be a medical test, a psychological test, or a physical fitness test, among others. Please provide more context so I can give you a more accurate and helpful response.\n\n**Recommendations:**\n• Consult healthcare professionals for personalized medical advice\n• Verify information with your doctor or medical provider\n• Follow evidence-based medical guidelines\n• Seek regular medical check-ups and screenings\n\n**Sources:** NIH Guidelines, CDC & WHO Publications, PubMed and peer-reviewed studies, Academic Medical Journals, Evidence-Based Clinical Reviews\n\nThis information is based on research from reputable medical institutions and peer-reviewed journals including NIH, CDC, WHO, JAMA, NEJM, and other academic publications. It is for educational purposes only and should not replace professional medical advice, diagnosis, or treatment. Always consult with qualified healthcare providers for medical concerns.`,\n  relatedTopics: [\"Nutrition and Diet Guidelines\", \"Exercise and Physical Activity\", \"Mental Health and Wellness\", \"Preventive Care and Screenings\", \"Chronic Disease Management\", \"Healthy Lifestyle Choices\"],\n  resources: [{\n    text: \"🩺 mHealth - Mobile Health Solutions\",\n    url: \"#\"\n  }, {\n    text: \"🏥 CDC - Health Guidelines\",\n    url: \"#\"\n  }, {\n    text: \"🌍 WHO - Global Health Information\",\n    url: \"#\"\n  }]\n};\n\n// Update the SearchResultsProps interface to include the new properties\n\n// Add this function before the SearchResults component\nconst convertLinksToClickable = text => {\n  // Handle non-string inputs\n  if (!text) return null;\n\n  // If text is not a string, convert it to string first\n  if (typeof text !== 'string') {\n    // If it's an object, try to stringify it or extract meaningful content\n    if (typeof text === 'object') {\n      // If it has specific properties we can use\n      if (text.content) {\n        text = text.content;\n      } else if (text.message) {\n        text = text.message;\n      } else if (text.details) {\n        text = text.details;\n      } else {\n        // Last resort - stringify the object\n        text = JSON.stringify(text);\n      }\n    } else {\n      // Convert other types to string\n      text = String(text);\n    }\n  }\n\n  // Now we're sure text is a string, proceed with original logic\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n  const parts = text.split(urlRegex);\n  return parts.map((part, index) => {\n    if (part.match(urlRegex)) {\n      return /*#__PURE__*/_jsxDEV(\"a\", {\n        href: part,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        style: {\n          color: '#2563eb',\n          textDecoration: 'underline'\n        },\n        children: part\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this);\n    }\n    return part;\n  });\n};\nconst SearchResults = ({\n  query,\n  results,\n  onBackToSearch,\n  onNewSearch,\n  isLoading = false,\n  dataSource,\n  citations\n}) => {\n  _s();\n  const [input, setInput] = useState('');\n  const [image, setImage] = useState(null);\n  const [currentPhotoId, setCurrentPhotoId] = useState(null);\n  const [newQuery, setNewQuery] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\n  const [notification, setNotification] = useState(null);\n  const [isUploadLoading, setUploadLoading] = useState(false);\n  const [lastProcessedQuery, setLastProcessedQuery] = useState('');\n  const [imageError, setImageError] = useState(false); // Add this state\n  const [isSearching, setIsSearching] = useState(false);\n  const recognitionRef = useRef(null);\n\n  // Check if we have valid results to display\n  const hasValidResults = results && results.trim() !== '' && !isLoading;\n\n  // Cache results when they change\n  useEffect(() => {\n    if (query && results && !isLoading) {\n      searchCache.setCachedResult(query, results, window.location.href);\n    }\n  }, [query, results, isLoading]);\n\n  // Add effect to manage body class when modal opens/closes\n  useEffect(() => {\n    if (isUploadModalOpen) {\n      document.body.classList.add('modal-open');\n    } else {\n      document.body.classList.remove('modal-open');\n    }\n\n    // Cleanup on unmount\n    return () => {\n      document.body.classList.remove('modal-open');\n    };\n  }, [isUploadModalOpen]);\n\n  // Add cleanup effect\n  useEffect(() => {\n    return () => {\n      if (typeof image === 'string' && image.startsWith('blob:')) {\n        URL.revokeObjectURL(image);\n      }\n    };\n  }, [image]);\n\n  // Add this effect\n  useEffect(() => {\n    if (notification) {\n      const timer = setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [notification]);\n\n  // Handle new search submission - only allow if user explicitly searches from results page\n  const handleTextSubmit = async e => {\n    e.preventDefault();\n    if (!input.trim() || isLoading) return;\n    const trimmedQuery = input.trim();\n\n    // Prevent duplicate searches\n    if (trimmedQuery === lastProcessedQuery || trimmedQuery === query) {\n      console.log('Preventing duplicate search for:', trimmedQuery);\n      return;\n    }\n    setLastProcessedQuery(trimmedQuery);\n    onNewSearch(trimmedQuery);\n    setInput(''); // Clear input after search\n  };\n\n  // Handle voice input\n  const handleVoiceInput = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert('Speech recognition not supported in this browser');\n      return;\n    }\n    if (!recognitionRef.current) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = 'en-US';\n      recognition.onstart = () => {\n        setIsListening(true);\n      };\n      recognition.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        setNewQuery(transcript); // Update the input field\n        setIsListening(false);\n      };\n      recognition.onerror = () => {\n        setIsListening(false);\n      };\n      recognition.onend = () => {\n        setIsListening(false);\n      };\n      recognitionRef.current = recognition;\n    }\n    if (!isListening) {\n      recognitionRef.current.start();\n    } else {\n      recognitionRef.current.stop();\n      setIsListening(false);\n    }\n  };\n\n  // Handle image upload\n  const handleImageUpload = e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (file) {\n      setImage(file);\n      console.log(`Image uploaded: ${file.name}`);\n    }\n  };\n\n  // Clear all search items\n  const handleClearAll = () => {\n    setInput('');\n    setNewQuery(''); // <-- Add this line\n    setImage(null);\n    setCurrentPhotoId(null);\n    setIsListening(false);\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n\n    // Remove CSS class\n    const searchInput = document.querySelector('.results-search-input');\n    if (searchInput) {\n      searchInput.classList.remove('with-image');\n    }\n  };\n\n  // Handle Enter key press\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleTextSubmit(e);\n    }\n  };\n\n  // Photo modal handlers\n  const handleCameraClick = () => {\n    setIsUploadModalOpen(true);\n  };\n\n  // Simple handler that just triggers a new search - only when user explicitly requests it\n  const handleAnalysisComplete = foodName => {\n    if (foodName && foodName !== lastProcessedQuery && foodName !== query) {\n      console.log('User explicit search from image analysis:', foodName);\n      setNewQuery(foodName);\n      setLastProcessedQuery(foodName);\n      onNewSearch(foodName);\n    }\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    const files = Array.from(e.dataTransfer.files);\n    const imageFile = files.find(file => file.type.startsWith('image/'));\n    if (imageFile) {\n      // Instead of calling handleFileSelect, open the modal and let it handle the file\n      setIsUploadModalOpen(true);\n      // You could also trigger the analysis directly if you want immediate processing\n      // But it's cleaner to let the user see the modal and confirm\n    }\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n  };\n  const handleNewSearchSubmit = e => {\n    e.preventDefault();\n    if (!newQuery.trim() || isLoading) return;\n    const trimmedQuery = newQuery.trim();\n\n    // Prevent duplicate searches\n    if (trimmedQuery === lastProcessedQuery || trimmedQuery === query) {\n      console.log('Preventing duplicate search for:', trimmedQuery);\n      return;\n    }\n    console.log('User explicit search from new query:', trimmedQuery);\n    setLastProcessedQuery(trimmedQuery);\n    onNewSearch(trimmedQuery);\n    setNewQuery(''); // Reset after search\n  };\n\n  // Update last processed query when props change\n  useEffect(() => {\n    if (query && query !== lastProcessedQuery) {\n      setLastProcessedQuery(query);\n    }\n  }, [query]);\n\n  // Check if current query is \"test\" to show dummy data styles\n  const isTestQuery = query.toLowerCase().trim() === 'test';\n\n  // Header search handler\n  const handleHeaderSearch = async newQuery => {\n    if (newQuery.trim() && newQuery !== query) {\n      setIsSearching(true);\n      try {\n        // Call the parent's onNewSearch which should handle the API call\n        await onNewSearch(newQuery);\n      } catch (error) {\n        console.error('Header search error:', error);\n      } finally {\n        setIsSearching(false);\n      }\n    }\n  };\n  const handleLogoClick = () => {\n    onBackToSearch();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh',\n      backgroundColor: '#ffffffff'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      searchQuery: query,\n      onSearchSubmit: handleHeaderSearch,\n      onVoiceInput: () => {/* voice logic */},\n      onImageUpload: () => setIsUploadModalOpen(true),\n      onLogoClick: handleLogoClick,\n      isListening: false,\n      variant: \"results\",\n      showLogin: true,\n      className: \"dashboard-header dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this), (isLoading || isSearching) && /*#__PURE__*/_jsxDEV(Spinner, {\n      overlay: true,\n      title: \"Analyzing with AI...\",\n      subtitle: \"Processing your health query...\",\n      disableEsc: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-content\",\n      style: {\n        minHeight: 'calc(100vh - 80px)',\n        padding: '20px 20px 0 20px',\n        paddingTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-controls\",\n        style: {\n          padding: '20px 24px',\n          marginTop: '20px',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          backgroundColor: 'white',\n          borderRadius: '12px',\n          border: '1px solid #e5e7eb',\n          boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              margin: '0',\n              color: '#1f2937',\n              fontSize: '1.5rem',\n              fontWeight: '600'\n            },\n            children: [\"Search Results for: \\\"\", query, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              margin: '4px 0 0 0',\n              color: '#64748b',\n              fontSize: '0.875rem'\n            },\n            children: \"Health information powered by AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '12px',\n            alignItems: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"data-source-indicator\",\n            style: {\n              padding: '6px 12px',\n              borderRadius: '8px',\n              fontSize: '12px',\n              fontWeight: '500',\n              backgroundColor: dataSource === 'openai' ? '#dbeafe' : '#f3f4f6',\n              color: dataSource === 'openai' ? '#1d4ed8' : '#374151'\n            },\n            children: dataSource === 'openai' ? /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83E\\uDD16 Powered by AI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this) : dataSource === 'error' ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-source\",\n              children: \"\\u274C Error retrieving data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDD0D What Is Healthy?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), hasValidResults ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-content-grid\",\n        style: {\n          display: 'grid',\n          gridTemplateColumns: '2fr 1fr',\n          gap: '24px',\n          alignItems: 'start'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"health-info-card\",\n          style: {\n            backgroundColor: 'white',\n            borderRadius: '12px',\n            border: '1px solid #e5e7eb',\n            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n            padding: '24px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"health-info-content\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"markdown-content\",\n              style: {\n                lineHeight: '1.6',\n                color: '#374151'\n              },\n              children: dataSource === 'vnutrition' ? (() => {\n                let nutrition;\n                try {\n                  nutrition = typeof results === 'string' ? JSON.parse(results) : results;\n                  console.log('Raw nutrition object for debugging:', nutrition);\n                  if (nutrition && nutrition.found !== false) {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        style: {\n                          color: '#1f2937',\n                          marginBottom: '16px'\n                        },\n                        children: \"\\uD83C\\uDF7D\\uFE0F Nutrition Information\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 462,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          display: 'grid',\n                          gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n                          gap: '16px',\n                          marginBottom: '20px'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            padding: '16px',\n                            backgroundColor: '#f8fafc',\n                            borderRadius: '8px',\n                            textAlign: 'center'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '24px',\n                              fontWeight: 'bold',\n                              color: '#059669'\n                            },\n                            children: nutrition.calories_per_serving || 0\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 475,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '12px',\n                              color: '#64748b'\n                            },\n                            children: \"Calories per serving\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 478,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 469,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            padding: '16px',\n                            backgroundColor: '#f8fafc',\n                            borderRadius: '8px',\n                            textAlign: 'center'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '24px',\n                              fontWeight: 'bold',\n                              color: '#3b82f6'\n                            },\n                            children: [nutrition.protein_g || 0, \"g\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 486,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '12px',\n                              color: '#64748b'\n                            },\n                            children: \"Protein\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 489,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 480,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            padding: '16px',\n                            backgroundColor: '#f8fafc',\n                            borderRadius: '8px',\n                            textAlign: 'center'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '24px',\n                              fontWeight: 'bold',\n                              color: '#f59e0b'\n                            },\n                            children: [nutrition.carbs_g || 0, \"g\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 497,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '12px',\n                              color: '#64748b'\n                            },\n                            children: \"Carbs\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 500,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 491,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            padding: '16px',\n                            backgroundColor: '#f8fafc',\n                            borderRadius: '8px',\n                            textAlign: 'center'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '24px',\n                              fontWeight: 'bold',\n                              color: '#ef4444'\n                            },\n                            children: [nutrition.fat_g || 0, \"g\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 508,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            style: {\n                              fontSize: '12px',\n                              color: '#64748b'\n                            },\n                            children: \"Fat\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 511,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 502,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 463,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          padding: '16px',\n                          backgroundColor: '#fef3c7',\n                          borderRadius: '8px',\n                          marginTop: '16px'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                          children: \"NOVA Score:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 520,\n                          columnNumber: 33\n                        }, this), \" \", nutrition.nova_classification || 1, \" - \", nutrition.nova_description || nutrition.processed_level || 'Unknown']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 514,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 461,\n                      columnNumber: 29\n                    }, this);\n                  } else {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        children: \"Raw Database Data (Debug)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 527,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                        style: {\n                          fontSize: '12px',\n                          background: '#f5f5f5',\n                          padding: '10px'\n                        },\n                        children: JSON.stringify(nutrition, null, 2)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 528,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 526,\n                      columnNumber: 29\n                    }, this);\n                  }\n                } catch {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"Error parsing nutrition data\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 32\n                  }, this);\n                }\n              })() : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '16px'\n                },\n                children: convertLinksToClickable(results)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 539,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar\",\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-card--compact\",\n            style: {\n              backgroundColor: 'white',\n              borderRadius: '12px',\n              border: '1px solid #e5e7eb',\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n              padding: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-title--compact\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  margin: '0 0 16px 0',\n                  color: '#1f2937',\n                  fontSize: '1.1rem'\n                },\n                children: \"\\uD83D\\uDCCA Result Quality\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-container--compact\",\n              children: /*#__PURE__*/_jsxDEV(ResultQualityPie, {\n                query: query || '',\n                results: results || '',\n                dataSource: dataSource || 'openai',\n                citations: citations || []\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 15\n          }, this), dataSource === 'vnutrition' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-card--compact\",\n              style: {\n                backgroundColor: 'white',\n                borderRadius: '12px',\n                border: '1px solid #e5e7eb',\n                boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n                padding: '20px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  margin: '0 0 16px 0',\n                  color: '#1f2937',\n                  fontSize: '1.1rem'\n                },\n                children: \"\\uD83C\\uDF7D\\uFE0F Nutrition Breakdown\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(NutritionChart, {\n                query: query,\n                results: results,\n                dataSource: dataSource\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-card--compact\",\n              style: {\n                backgroundColor: 'white',\n                borderRadius: '12px',\n                border: '1px solid #e5e7eb',\n                boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n                padding: '20px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  margin: '0 0 16px 0',\n                  color: '#1f2937',\n                  fontSize: '1.1rem'\n                },\n                children: \"\\uD83C\\uDFED Processing Level (NOVA Score)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 597,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(NovaChart, {\n                query: query,\n                results: results,\n                dataSource: dataSource\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-card--compact\",\n            style: {\n              backgroundColor: 'white',\n              borderRadius: '12px',\n              border: '1px solid #e5e7eb',\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n              padding: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: '0 0 16px 0',\n                color: '#1f2937',\n                fontSize: '1.1rem'\n              },\n              children: \"\\uD83D\\uDD17 Related Health Topics\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"related-topics-list\",\n              style: {\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '8px'\n              },\n              children: isTestQuery ? dummyTestData.relatedTopics.map((topic, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  if (topic !== lastProcessedQuery && topic !== query && !isLoading) {\n                    console.log('User explicit search from related topic:', topic);\n                    setLastProcessedQuery(topic);\n                    onNewSearch(topic);\n                  }\n                },\n                className: \"topic-button\",\n                disabled: isLoading,\n                style: {\n                  padding: '8px 12px',\n                  fontSize: '12px',\n                  backgroundColor: '#f8fafc',\n                  border: '1px solid #e2e8f0',\n                  borderRadius: '6px',\n                  cursor: 'pointer',\n                  textAlign: 'left',\n                  transition: 'all 0.2s',\n                  color: '#475569'\n                },\n                onMouseEnter: e => {\n                  e.currentTarget.style.backgroundColor = '#e2e8f0';\n                  e.currentTarget.style.borderColor = '#cbd5e1';\n                },\n                onMouseLeave: e => {\n                  e.currentTarget.style.backgroundColor = '#f8fafc';\n                  e.currentTarget.style.borderColor = '#e2e8f0';\n                },\n                children: topic\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 23\n              }, this)) : defaultRelatedTopics.map((topic, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  if (topic !== lastProcessedQuery && topic !== query && !isLoading) {\n                    console.log('User explicit search from related topic:', topic);\n                    setLastProcessedQuery(topic);\n                    onNewSearch(topic);\n                  }\n                },\n                className: \"topic-button\",\n                disabled: isLoading,\n                style: {\n                  padding: '8px 12px',\n                  fontSize: '12px',\n                  backgroundColor: '#f8fafc',\n                  border: '1px solid #e2e8f0',\n                  borderRadius: '6px',\n                  cursor: 'pointer',\n                  textAlign: 'left',\n                  transition: 'all 0.2s',\n                  color: '#475569'\n                },\n                onMouseEnter: e => {\n                  e.currentTarget.style.backgroundColor = '#e2e8f0';\n                  e.currentTarget.style.borderColor = '#cbd5e1';\n                },\n                onMouseLeave: e => {\n                  e.currentTarget.style.backgroundColor = '#f8fafc';\n                  e.currentTarget.style.borderColor = '#e2e8f0';\n                },\n                children: topic\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-card--compact\",\n            style: {\n              backgroundColor: 'white',\n              borderRadius: '12px',\n              border: '1px solid #e5e7eb',\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n              padding: '20px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: '0 0 16px 0',\n                color: '#1f2937',\n                fontSize: '1.1rem'\n              },\n              children: \"\\uD83D\\uDCDA Useful Resources\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"resources-list\",\n              style: {\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '8px'\n              },\n              children: isTestQuery ? dummyTestData.resources.map((resource, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n                href: resource.url,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                style: {\n                  padding: '8px 12px',\n                  fontSize: '12px',\n                  backgroundColor: '#f8fafc',\n                  border: '1px solid #e2e8f0',\n                  borderRadius: '6px',\n                  textDecoration: 'none',\n                  color: '#1d4ed8',\n                  transition: 'all 0.2s',\n                  display: 'block'\n                },\n                onMouseEnter: e => {\n                  e.currentTarget.style.backgroundColor = '#dbeafe';\n                  e.currentTarget.style.borderColor = '#3b82f6';\n                },\n                onMouseLeave: e => {\n                  e.currentTarget.style.backgroundColor = '#f8fafc';\n                  e.currentTarget.style.borderColor = '#e2e8f0';\n                },\n                children: resource.text\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 707,\n                columnNumber: 23\n              }, this)) : defaultResources.map((resource, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n                href: resource.url,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                style: {\n                  padding: '8px 12px',\n                  fontSize: '12px',\n                  backgroundColor: '#f8fafc',\n                  border: '1px solid #e2e8f0',\n                  borderRadius: '6px',\n                  textDecoration: 'none',\n                  color: '#1d4ed8',\n                  transition: 'all 0.2s',\n                  display: 'block'\n                },\n                onMouseEnter: e => {\n                  e.currentTarget.style.backgroundColor = '#dbeafe';\n                  e.currentTarget.style.borderColor = '#3b82f6';\n                },\n                onMouseLeave: e => {\n                  e.currentTarget.style.backgroundColor = '#f8fafc';\n                  e.currentTarget.style.borderColor = '#e2e8f0';\n                },\n                children: resource.text\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 704,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this) : !isLoading && !isSearching && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-results-message\",\n        style: {\n          backgroundColor: 'white',\n          borderRadius: '12px',\n          border: '1px solid #e5e7eb',\n          boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n          padding: '40px',\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '48px',\n            marginBottom: '16px'\n          },\n          children: \"\\uD83D\\uDD0D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 780,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: '#1f2937',\n            marginBottom: '8px'\n          },\n          children: \"No results to display\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#64748b'\n          },\n          children: \"Try searching for something else or refine your query.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 782,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 772,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"dashboard-footer\",\n        style: {\n          marginTop: '32px',\n          padding: '20px',\n          textAlign: 'center',\n          color: '#64748b',\n          fontSize: '14px'\n        },\n        children: [\"\\xA9 \", new Date().getFullYear(), \" vHealth - Your Comprehensive Health Platform\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 788,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(ImageUploadModal, {\n      isOpen: isUploadModalOpen,\n      onClose: () => setIsUploadModalOpen(false),\n      onAnalysisComplete: handleAnalysisComplete,\n      title: \"Upload Image\",\n      subtitle: \"Upload images for analysis\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 360,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchResults, \"WR+ujYKRsawz59pv9wumLTaSQwY=\");\n_c = SearchResults;\nexport default SearchResults;\nvar _c;\n$RefreshReg$(_c, \"SearchResults\");","map":{"version":3,"names":["React","useState","useEffect","useRef","searchCache","ImageUploadModal","ResultQualityPie","NutritionChart","NovaChart","Header","Spinner","jsxDEV","_jsxDEV","Fragment","_Fragment","defaultRelatedTopics","defaultResources","text","url","dummyTestData","query","healthInfo","relatedTopics","resources","convertLinksToClickable","content","message","details","JSON","stringify","String","urlRegex","parts","split","map","part","index","match","href","target","rel","style","color","textDecoration","children","fileName","_jsxFileName","lineNumber","columnNumber","SearchResults","results","onBackToSearch","onNewSearch","isLoading","dataSource","citations","_s","input","setInput","image","setImage","currentPhotoId","setCurrentPhotoId","newQuery","setNewQuery","isListening","setIsListening","isUploadModalOpen","setIsUploadModalOpen","notification","setNotification","isUploadLoading","setUploadLoading","lastProcessedQuery","setLastProcessedQuery","imageError","setImageError","isSearching","setIsSearching","recognitionRef","hasValidResults","trim","setCachedResult","window","location","document","body","classList","add","remove","startsWith","URL","revokeObjectURL","timer","setTimeout","clearTimeout","handleTextSubmit","e","preventDefault","trimmedQuery","console","log","handleVoiceInput","alert","current","recognition","webkitSpeechRecognition","continuous","interimResults","lang","onstart","onresult","event","transcript","onerror","onend","start","stop","handleImageUpload","_e$target$files","file","files","name","handleClearAll","searchInput","querySelector","handleKeyPress","key","handleCameraClick","handleAnalysisComplete","foodName","handleDrop","Array","from","dataTransfer","imageFile","find","type","handleDragOver","handleNewSearchSubmit","isTestQuery","toLowerCase","handleHeaderSearch","error","handleLogoClick","minHeight","backgroundColor","searchQuery","onSearchSubmit","onVoiceInput","onImageUpload","onLogoClick","variant","showLogin","className","overlay","title","subtitle","disableEsc","padding","paddingTop","marginTop","display","justifyContent","alignItems","borderRadius","border","boxShadow","marginBottom","margin","fontSize","fontWeight","gap","gridTemplateColumns","lineHeight","nutrition","parse","found","textAlign","calories_per_serving","protein_g","carbs_g","fat_g","nova_classification","nova_description","processed_level","background","flexDirection","topic","onClick","disabled","cursor","transition","onMouseEnter","currentTarget","borderColor","onMouseLeave","resource","Date","getFullYear","isOpen","onClose","onAnalysisComplete","_c","$RefreshReg$"],"sources":["C:/repo/wihy_ui/client/src/SearchResults.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { searchCache } from './services/searchCache';\r\nimport { photoStorageService } from './services/photoStorageService';\r\nimport { foodAnalysisService } from './components/foodAnalysisService';\r\nimport ImageUploadModal from './components/ImageUploadModal';\r\nimport MultiAuthLogin from './components/shared/components/MultiAuthLogin';\r\nimport ResultQualityPie from './components/ResultQualityPie';\r\nimport NutritionChart from './components/NutritionChart';\r\nimport NovaChart from './components/NovaChart';\r\nimport './styles/VHealthSearch.css';\r\nimport './styles/results-page.css';\r\nimport Header from './components/shared/components/Header';\r\nimport Spinner from './components/Spinner';\r\n\r\n/* Define default topics and resources */\r\nconst defaultRelatedTopics = [\r\n  \"Nutrition and Diet Guidelines\",\r\n  \"Exercise and Physical Activity\", \r\n  \"Mental Health and Wellness\",\r\n  \"Preventive Care and Screenings\",\r\n  \"Chronic Disease Management\",\r\n  \"Healthy Lifestyle Choices\"\r\n];\r\n\r\nconst defaultResources = [\r\n  { text: \"Nutrition ED - Learn More\", url: \"https://vowels.com\" },\r\n  { text: \"Nutrition 101\", url: \"https://members.vowels.com\" },\r\n  { text: \"The World Counts\", url: \"https://www.theworldcounts.com/\" }\r\n];\r\n\r\n// Define the dummy data for \"test\" queries\r\nconst dummyTestData = {\r\n  query: \"test\",\r\n  healthInfo: `I'm sorry, but your query \"test\" is too vague. Could you please provide more details or specify the type of test you are interested in? It could be a medical test, a psychological test, or a physical fitness test, among others. Please provide more context so I can give you a more accurate and helpful response.\r\n\r\n**Recommendations:**\r\n• Consult healthcare professionals for personalized medical advice\r\n• Verify information with your doctor or medical provider\r\n• Follow evidence-based medical guidelines\r\n• Seek regular medical check-ups and screenings\r\n\r\n**Sources:** NIH Guidelines, CDC & WHO Publications, PubMed and peer-reviewed studies, Academic Medical Journals, Evidence-Based Clinical Reviews\r\n\r\nThis information is based on research from reputable medical institutions and peer-reviewed journals including NIH, CDC, WHO, JAMA, NEJM, and other academic publications. It is for educational purposes only and should not replace professional medical advice, diagnosis, or treatment. Always consult with qualified healthcare providers for medical concerns.`,\r\n  relatedTopics: [\r\n    \"Nutrition and Diet Guidelines\",\r\n    \"Exercise and Physical Activity\", \r\n    \"Mental Health and Wellness\",\r\n    \"Preventive Care and Screenings\",\r\n    \"Chronic Disease Management\",\r\n    \"Healthy Lifestyle Choices\"\r\n  ],\r\n  resources: [\r\n    { text: \"🩺 mHealth - Mobile Health Solutions\", url: \"#\" },\r\n    { text: \"🏥 CDC - Health Guidelines\", url: \"#\" },\r\n    { text: \"🌍 WHO - Global Health Information\", url: \"#\" }\r\n  ]\r\n};\r\n\r\n// Update the SearchResultsProps interface to include the new properties\r\ninterface SearchResultsProps {\r\n  query: string;\r\n  results: string;\r\n  onBackToSearch: () => void;\r\n  onNewSearch: (query: string) => void;\r\n  isLoading: boolean;\r\n  dataSource: \"error\" | \"openai\" | \"local\" | \"vnutrition\" | \"wihy\";\r\n  citations?: string[];\r\n  recommendations?: string[];\r\n  disclaimer?: string;\r\n}\r\n\r\n// Add this function before the SearchResults component\r\nconst convertLinksToClickable = (text: any): React.ReactNode => {\r\n  // Handle non-string inputs\r\n  if (!text) return null;\r\n  \r\n  // If text is not a string, convert it to string first\r\n  if (typeof text !== 'string') {\r\n    // If it's an object, try to stringify it or extract meaningful content\r\n    if (typeof text === 'object') {\r\n      // If it has specific properties we can use\r\n      if (text.content) {\r\n        text = text.content;\r\n      } else if (text.message) {\r\n        text = text.message;\r\n      } else if (text.details) {\r\n        text = text.details;\r\n      } else {\r\n        // Last resort - stringify the object\r\n        text = JSON.stringify(text);\r\n      }\r\n    } else {\r\n      // Convert other types to string\r\n      text = String(text);\r\n    }\r\n  }\r\n\r\n  // Now we're sure text is a string, proceed with original logic\r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  const parts = text.split(urlRegex);\r\n  \r\n  return parts.map((part: string, index: number) => {\r\n    if (part.match(urlRegex)) {\r\n      return (\r\n        <a \r\n          key={index} \r\n          href={part} \r\n          target=\"_blank\" \r\n          rel=\"noopener noreferrer\"\r\n          style={{ color: '#2563eb', textDecoration: 'underline' }}\r\n        >\r\n          {part}\r\n        </a>\r\n      );\r\n    }\r\n    return part;\r\n  });\r\n};\r\n\r\nconst SearchResults: React.FC<SearchResultsProps> = ({ \r\n  query, \r\n  results, \r\n  onBackToSearch,\r\n  onNewSearch,\r\n  isLoading = false,\r\n  dataSource,\r\n  citations\r\n}) => {\r\n  const [input, setInput] = useState('');\r\n  const [image, setImage] = useState<File | string | null>(null);\r\n  const [currentPhotoId, setCurrentPhotoId] = useState<string | null>(null);\r\n  const [newQuery, setNewQuery] = useState('');\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\r\n  const [notification, setNotification] = useState<{message: string, type: string} | null>(null);\r\n  const [isUploadLoading, setUploadLoading] = useState(false);\r\n  const [lastProcessedQuery, setLastProcessedQuery] = useState<string>('');\r\n  const [imageError, setImageError] = useState(false); // Add this state\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const recognitionRef = useRef<any>(null);\r\n\r\n  // Check if we have valid results to display\r\n  const hasValidResults = results && results.trim() !== '' && !isLoading;\r\n  \r\n  // Cache results when they change\r\n  useEffect(() => {\r\n    if (query && results && !isLoading) {\r\n      searchCache.setCachedResult(query, results, window.location.href);\r\n    }\r\n  }, [query, results, isLoading]);\r\n\r\n  // Add effect to manage body class when modal opens/closes\r\n  useEffect(() => {\r\n    if (isUploadModalOpen) {\r\n      document.body.classList.add('modal-open');\r\n    } else {\r\n      document.body.classList.remove('modal-open');\r\n    }\r\n    \r\n    // Cleanup on unmount\r\n    return () => {\r\n      document.body.classList.remove('modal-open');\r\n    };\r\n  }, [isUploadModalOpen]);\r\n\r\n  // Add cleanup effect\r\n  useEffect(() => {\r\n    return () => {\r\n      if (typeof image === 'string' && image.startsWith('blob:')) {\r\n        URL.revokeObjectURL(image);\r\n      }\r\n    };\r\n  }, [image]);\r\n\r\n  // Add this effect\r\n  useEffect(() => {\r\n    if (notification) {\r\n      const timer = setTimeout(() => {\r\n        setNotification(null);\r\n      }, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [notification]);\r\n\r\n  // Handle new search submission - only allow if user explicitly searches from results page\r\n  const handleTextSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!input.trim() || isLoading) return;\r\n    \r\n    const trimmedQuery = input.trim();\r\n    \r\n    // Prevent duplicate searches\r\n    if (trimmedQuery === lastProcessedQuery || trimmedQuery === query) {\r\n      console.log('Preventing duplicate search for:', trimmedQuery);\r\n      return;\r\n    }\r\n    \r\n    setLastProcessedQuery(trimmedQuery);\r\n    onNewSearch(trimmedQuery);\r\n    setInput(''); // Clear input after search\r\n  };\r\n\r\n  // Handle voice input\r\n  const handleVoiceInput = () => {\r\n    if (!('webkitSpeechRecognition' in window)) {\r\n      alert('Speech recognition not supported in this browser');\r\n      return;\r\n    }\r\n\r\n    if (!recognitionRef.current) {\r\n      const recognition = new (window as any).webkitSpeechRecognition();\r\n      recognition.continuous = false;\r\n      recognition.interimResults = false;\r\n      recognition.lang = 'en-US';\r\n\r\n      recognition.onstart = () => {\r\n        setIsListening(true);\r\n      };\r\n\r\n      recognition.onresult = (event: any) => {\r\n        const transcript = event.results[0][0].transcript;\r\n        setNewQuery(transcript); // Update the input field\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognition.onerror = () => {\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognition.onend = () => {\r\n        setIsListening(false);\r\n      };\r\n\r\n      recognitionRef.current = recognition;\r\n    }\r\n\r\n    if (!isListening) {\r\n      recognitionRef.current.start();\r\n    } else {\r\n      recognitionRef.current.stop();\r\n      setIsListening(false);\r\n    }\r\n  };\r\n\r\n  // Handle image upload\r\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      setImage(file);\r\n      console.log(`Image uploaded: ${file.name}`);\r\n    }\r\n  };\r\n\r\n  // Clear all search items\r\n  const handleClearAll = () => {\r\n    setInput('');\r\n    setNewQuery(''); // <-- Add this line\r\n    setImage(null);\r\n    setCurrentPhotoId(null);\r\n    setIsListening(false);\r\n    if (recognitionRef.current) {\r\n      recognitionRef.current.stop();\r\n    }\r\n    \r\n    // Remove CSS class\r\n    const searchInput = document.querySelector('.results-search-input') as HTMLInputElement;\r\n    if (searchInput) {\r\n      searchInput.classList.remove('with-image');\r\n    }\r\n  };\r\n\r\n  // Handle Enter key press\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      handleTextSubmit(e as any);\r\n    }\r\n  };\r\n\r\n  // Photo modal handlers\r\n  const handleCameraClick = () => {\r\n    setIsUploadModalOpen(true);\r\n  };\r\n\r\n  // Simple handler that just triggers a new search - only when user explicitly requests it\r\n  const handleAnalysisComplete = (foodName: string) => {\r\n    if (foodName && foodName !== lastProcessedQuery && foodName !== query) {\r\n      console.log('User explicit search from image analysis:', foodName);\r\n      setNewQuery(foodName);\r\n      setLastProcessedQuery(foodName);\r\n      onNewSearch(foodName);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const files = Array.from(e.dataTransfer.files);\r\n    const imageFile = files.find(file => file.type.startsWith('image/'));\r\n    if (imageFile) {\r\n      // Instead of calling handleFileSelect, open the modal and let it handle the file\r\n      setIsUploadModalOpen(true);\r\n      // You could also trigger the analysis directly if you want immediate processing\r\n      // But it's cleaner to let the user see the modal and confirm\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleNewSearchSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newQuery.trim() || isLoading) return;\r\n    \r\n    const trimmedQuery = newQuery.trim();\r\n    \r\n    // Prevent duplicate searches\r\n    if (trimmedQuery === lastProcessedQuery || trimmedQuery === query) {\r\n      console.log('Preventing duplicate search for:', trimmedQuery);\r\n      return;\r\n    }\r\n    \r\n    console.log('User explicit search from new query:', trimmedQuery);\r\n    setLastProcessedQuery(trimmedQuery);\r\n    onNewSearch(trimmedQuery);\r\n    setNewQuery(''); // Reset after search\r\n  };\r\n\r\n  // Update last processed query when props change\r\n  useEffect(() => {\r\n    if (query && query !== lastProcessedQuery) {\r\n      setLastProcessedQuery(query);\r\n    }\r\n  }, [query]);\r\n\r\n  // Check if current query is \"test\" to show dummy data styles\r\n  const isTestQuery = query.toLowerCase().trim() === 'test';\r\n\r\n  // Header search handler\r\n  const handleHeaderSearch = async (newQuery: string) => {\r\n    if (newQuery.trim() && newQuery !== query) {\r\n      setIsSearching(true);\r\n      \r\n      try {\r\n        // Call the parent's onNewSearch which should handle the API call\r\n        await onNewSearch(newQuery);\r\n      } catch (error) {\r\n        console.error('Header search error:', error);\r\n      } finally {\r\n        setIsSearching(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLogoClick = () => {\r\n    onBackToSearch();\r\n  };\r\n\r\n  return (\r\n    <div style={{ minHeight: '100vh', backgroundColor: '#ffffffff' }}>\r\n      <Header\r\n        searchQuery={query}\r\n        onSearchSubmit={handleHeaderSearch}\r\n        onVoiceInput={() => {/* voice logic */}}\r\n        onImageUpload={() => setIsUploadModalOpen(true)}\r\n        onLogoClick={handleLogoClick}\r\n        isListening={false}\r\n        variant=\"results\"\r\n        showLogin={true}\r\n        className=\"dashboard-header dashboard\"\r\n      />\r\n\r\n      {/* Show spinner when searching from header */}\r\n      {(isLoading || isSearching) && (\r\n        <Spinner\r\n          overlay={true}\r\n          title=\"Analyzing with AI...\"\r\n          subtitle=\"Processing your health query...\"\r\n          disableEsc={true}\r\n        />\r\n      )}\r\n      \r\n      {/* Main Content Area */}\r\n      <div className=\"dashboard-content\" style={{\r\n        minHeight: 'calc(100vh - 80px)',\r\n        padding: '20px 20px 0 20px',\r\n        paddingTop: '20px'\r\n      }}>\r\n        \r\n        {/* Search Results Header */}\r\n        <div className=\"dashboard-controls\" style={{ \r\n          padding: '20px 24px',\r\n          marginTop: '20px',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          backgroundColor: 'white',\r\n          borderRadius: '12px',\r\n          border: '1px solid #e5e7eb',\r\n          boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n          marginBottom: '20px'\r\n        }}>\r\n          <div>\r\n            <h2 style={{ margin: '0', color: '#1f2937', fontSize: '1.5rem', fontWeight: '600' }}>\r\n              Search Results for: \"{query}\"\r\n            </h2>\r\n            <p style={{ margin: '4px 0 0 0', color: '#64748b', fontSize: '0.875rem' }}>\r\n              Health information powered by AI\r\n            </p>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', gap: '12px', alignItems: 'center' }}>\r\n            <div className=\"data-source-indicator\" style={{\r\n              padding: '6px 12px',\r\n              borderRadius: '8px',\r\n              fontSize: '12px',\r\n              fontWeight: '500',\r\n              backgroundColor: dataSource === 'openai' ? '#dbeafe' : '#f3f4f6',\r\n              color: dataSource === 'openai' ? '#1d4ed8' : '#374151'\r\n            }}>\r\n              {dataSource === 'openai' ? (\r\n                <span>🤖 Powered by AI</span>\r\n              ) : dataSource === 'error' ? (\r\n                <span className=\"error-source\">❌ Error retrieving data</span>\r\n              ) : (\r\n                <span>🔍 What Is Healthy?</span>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {hasValidResults ? (\r\n          <div className=\"results-content-grid\" style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: '2fr 1fr',\r\n            gap: '24px',\r\n            alignItems: 'start'\r\n          }}>\r\n            {/* Main Results Content */}\r\n            <div className=\"health-info-card\" style={{\r\n              backgroundColor: 'white',\r\n              borderRadius: '12px',\r\n              border: '1px solid #e5e7eb',\r\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n              padding: '24px'\r\n            }}>\r\n              <div className=\"health-info-content\">\r\n                <div className=\"markdown-content\" style={{\r\n                  lineHeight: '1.6',\r\n                  color: '#374151'\r\n                }}>\r\n                  {dataSource === 'vnutrition' ? (\r\n                    (() => {\r\n                      let nutrition;\r\n                      try {\r\n                        nutrition = typeof results === 'string' ? JSON.parse(results) : results;\r\n                        console.log('Raw nutrition object for debugging:', nutrition);\r\n                        \r\n                        if (nutrition && nutrition.found !== false) {\r\n                          return (\r\n                            <div>\r\n                              <h3 style={{ color: '#1f2937', marginBottom: '16px' }}>🍽️ Nutrition Information</h3>\r\n                              <div style={{\r\n                                display: 'grid',\r\n                                gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\r\n                                gap: '16px',\r\n                                marginBottom: '20px'\r\n                              }}>\r\n                                <div style={{\r\n                                  padding: '16px',\r\n                                  backgroundColor: '#f8fafc',\r\n                                  borderRadius: '8px',\r\n                                  textAlign: 'center'\r\n                                }}>\r\n                                  <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#059669' }}>\r\n                                    {nutrition.calories_per_serving || 0}\r\n                                  </div>\r\n                                  <div style={{ fontSize: '12px', color: '#64748b' }}>Calories per serving</div>\r\n                                </div>\r\n                                <div style={{\r\n                                  padding: '16px',\r\n                                  backgroundColor: '#f8fafc',\r\n                                  borderRadius: '8px',\r\n                                  textAlign: 'center'\r\n                                }}>\r\n                                  <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#3b82f6' }}>\r\n                                    {nutrition.protein_g || 0}g\r\n                                  </div>\r\n                                  <div style={{ fontSize: '12px', color: '#64748b' }}>Protein</div>\r\n                                </div>\r\n                                <div style={{\r\n                                  padding: '16px',\r\n                                  backgroundColor: '#f8fafc',\r\n                                  borderRadius: '8px',\r\n                                  textAlign: 'center'\r\n                                }}>\r\n                                  <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#f59e0b' }}>\r\n                                    {nutrition.carbs_g || 0}g\r\n                                  </div>\r\n                                  <div style={{ fontSize: '12px', color: '#64748b' }}>Carbs</div>\r\n                                </div>\r\n                                <div style={{\r\n                                  padding: '16px',\r\n                                  backgroundColor: '#f8fafc',\r\n                                  borderRadius: '8px',\r\n                                  textAlign: 'center'\r\n                                }}>\r\n                                  <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#ef4444' }}>\r\n                                    {nutrition.fat_g || 0}g\r\n                                  </div>\r\n                                  <div style={{ fontSize: '12px', color: '#64748b' }}>Fat</div>\r\n                                </div>\r\n                              </div>\r\n                              <div style={{\r\n                                padding: '16px',\r\n                                backgroundColor: '#fef3c7',\r\n                                borderRadius: '8px',\r\n                                marginTop: '16px'\r\n                              }}>\r\n                                <strong>NOVA Score:</strong> {nutrition.nova_classification || 1} - {nutrition.nova_description || nutrition.processed_level || 'Unknown'}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        } else {\r\n                          return (\r\n                            <div>\r\n                              <h3>Raw Database Data (Debug)</h3>\r\n                              <pre style={{ fontSize: '12px', background: '#f5f5f5', padding: '10px' }}>\r\n                                {JSON.stringify(nutrition, null, 2)}\r\n                              </pre>\r\n                            </div>\r\n                          );\r\n                        }\r\n                      } catch {\r\n                        return <div>Error parsing nutrition data</div>;\r\n                      }\r\n                    })()\r\n                  ) : (\r\n                    <div style={{ fontSize: '16px' }}>\r\n                      {convertLinksToClickable(results)}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Sidebar */}\r\n            <div className=\"sidebar\" style={{ display: 'flex', flexDirection: 'column', gap: '20px' }}>\r\n              {/* Quality Chart */}\r\n              <div className=\"section-card--compact\" style={{\r\n                backgroundColor: 'white',\r\n                borderRadius: '12px',\r\n                border: '1px solid #e5e7eb',\r\n                boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                padding: '20px'\r\n              }}>\r\n                <div className=\"section-title--compact\">\r\n                  <h3 style={{ margin: '0 0 16px 0', color: '#1f2937', fontSize: '1.1rem' }}>📊 Result Quality</h3>\r\n                </div>\r\n                <div className=\"chart-container--compact\">\r\n                  <ResultQualityPie \r\n                    query={query || ''} \r\n                    results={results || ''}\r\n                    dataSource={dataSource || 'openai'}\r\n                    citations={citations || []}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Nutrition Charts - Only show when we have nutrition data */}\r\n              {dataSource === 'vnutrition' && (\r\n                <>\r\n                  <div className=\"section-card--compact\" style={{\r\n                    backgroundColor: 'white',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid #e5e7eb',\r\n                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                    padding: '20px'\r\n                  }}>\r\n                    <h3 style={{ margin: '0 0 16px 0', color: '#1f2937', fontSize: '1.1rem' }}>\r\n                      🍽️ Nutrition Breakdown\r\n                    </h3>\r\n                    <NutritionChart \r\n                      query={query}\r\n                      results={results}\r\n                      dataSource={dataSource}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"section-card--compact\" style={{\r\n                    backgroundColor: 'white',\r\n                    borderRadius: '12px',\r\n                    border: '1px solid #e5e7eb',\r\n                    boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                    padding: '20px'\r\n                  }}>\r\n                    <h3 style={{ margin: '0 0 16px 0', color: '#1f2937', fontSize: '1.1rem' }}>\r\n                      🏭 Processing Level (NOVA Score)\r\n                    </h3>\r\n                    <NovaChart \r\n                      query={query}\r\n                      results={results}\r\n                      dataSource={dataSource}\r\n                    />\r\n                  </div>\r\n                </>\r\n              )}\r\n              \r\n              {/* Related Topics */}\r\n              <div className=\"section-card--compact\" style={{\r\n                backgroundColor: 'white',\r\n                borderRadius: '12px',\r\n                border: '1px solid #e5e7eb',\r\n                boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                padding: '20px'\r\n              }}>\r\n                <h3 style={{ margin: '0 0 16px 0', color: '#1f2937', fontSize: '1.1rem' }}>🔗 Related Health Topics</h3>\r\n                <div className=\"related-topics-list\" style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                  {isTestQuery ? (\r\n                    dummyTestData.relatedTopics.map((topic, index) => (\r\n                      <button\r\n                        key={index}\r\n                        onClick={() => {\r\n                          if (topic !== lastProcessedQuery && topic !== query && !isLoading) {\r\n                            console.log('User explicit search from related topic:', topic);\r\n                            setLastProcessedQuery(topic);\r\n                            onNewSearch(topic);\r\n                          }\r\n                        }}\r\n                        className=\"topic-button\"\r\n                        disabled={isLoading}\r\n                        style={{\r\n                          padding: '8px 12px',\r\n                          fontSize: '12px',\r\n                          backgroundColor: '#f8fafc',\r\n                          border: '1px solid #e2e8f0',\r\n                          borderRadius: '6px',\r\n                          cursor: 'pointer',\r\n                          textAlign: 'left',\r\n                          transition: 'all 0.2s',\r\n                          color: '#475569'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                          e.currentTarget.style.backgroundColor = '#e2e8f0';\r\n                          e.currentTarget.style.borderColor = '#cbd5e1';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.currentTarget.style.backgroundColor = '#f8fafc';\r\n                          e.currentTarget.style.borderColor = '#e2e8f0';\r\n                        }}\r\n                      >\r\n                        {topic}\r\n                      </button>\r\n                    ))\r\n                  ) : (\r\n                    defaultRelatedTopics.map((topic, index) => (\r\n                      <button\r\n                        key={index}\r\n                        onClick={() => {\r\n                          if (topic !== lastProcessedQuery && topic !== query && !isLoading) {\r\n                            console.log('User explicit search from related topic:', topic);\r\n                            setLastProcessedQuery(topic);\r\n                            onNewSearch(topic);\r\n                          }\r\n                        }}\r\n                        className=\"topic-button\"\r\n                        disabled={isLoading}\r\n                        style={{\r\n                          padding: '8px 12px',\r\n                          fontSize: '12px',\r\n                          backgroundColor: '#f8fafc',\r\n                          border: '1px solid #e2e8f0',\r\n                          borderRadius: '6px',\r\n                          cursor: 'pointer',\r\n                          textAlign: 'left',\r\n                          transition: 'all 0.2s',\r\n                          color: '#475569'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                          e.currentTarget.style.backgroundColor = '#e2e8f0';\r\n                          e.currentTarget.style.borderColor = '#cbd5e1';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.currentTarget.style.backgroundColor = '#f8fafc';\r\n                          e.currentTarget.style.borderColor = '#e2e8f0';\r\n                        }}\r\n                      >\r\n                        {topic}\r\n                      </button>\r\n                    ))\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Resources */}\r\n              <div className=\"section-card--compact\" style={{\r\n                backgroundColor: 'white',\r\n                borderRadius: '12px',\r\n                border: '1px solid #e5e7eb',\r\n                boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n                padding: '20px'\r\n              }}>\r\n                <h3 style={{ margin: '0 0 16px 0', color: '#1f2937', fontSize: '1.1rem' }}>📚 Useful Resources</h3>\r\n                <div className=\"resources-list\" style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                  {isTestQuery ? (\r\n                    dummyTestData.resources.map((resource, index) => (\r\n                      <a\r\n                        key={index}\r\n                        href={resource.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        style={{\r\n                          padding: '8px 12px',\r\n                          fontSize: '12px',\r\n                          backgroundColor: '#f8fafc',\r\n                          border: '1px solid #e2e8f0',\r\n                          borderRadius: '6px',\r\n                          textDecoration: 'none',\r\n                          color: '#1d4ed8',\r\n                          transition: 'all 0.2s',\r\n                          display: 'block'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                          e.currentTarget.style.backgroundColor = '#dbeafe';\r\n                          e.currentTarget.style.borderColor = '#3b82f6';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.currentTarget.style.backgroundColor = '#f8fafc';\r\n                          e.currentTarget.style.borderColor = '#e2e8f0';\r\n                        }}\r\n                      >\r\n                        {resource.text}\r\n                      </a>\r\n                    ))\r\n                  ) : (\r\n                    defaultResources.map((resource, index) => (\r\n                      <a\r\n                        key={index}\r\n                        href={resource.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        style={{\r\n                          padding: '8px 12px',\r\n                          fontSize: '12px',\r\n                          backgroundColor: '#f8fafc',\r\n                          border: '1px solid #e2e8f0',\r\n                          borderRadius: '6px',\r\n                          textDecoration: 'none',\r\n                          color: '#1d4ed8',\r\n                          transition: 'all 0.2s',\r\n                          display: 'block'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                          e.currentTarget.style.backgroundColor = '#dbeafe';\r\n                          e.currentTarget.style.borderColor = '#3b82f6';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.currentTarget.style.backgroundColor = '#f8fafc';\r\n                          e.currentTarget.style.borderColor = '#e2e8f0';\r\n                        }}\r\n                      >\r\n                        {resource.text}\r\n                      </a>\r\n                    ))\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          !isLoading && !isSearching && (\r\n            <div className=\"no-results-message\" style={{\r\n              backgroundColor: 'white',\r\n              borderRadius: '12px',\r\n              border: '1px solid #e5e7eb',\r\n              boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n              padding: '40px',\r\n              textAlign: 'center'\r\n            }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '16px' }}>🔍</div>\r\n              <h3 style={{ color: '#1f2937', marginBottom: '8px' }}>No results to display</h3>\r\n              <p style={{ color: '#64748b' }}>Try searching for something else or refine your query.</p>\r\n            </div>\r\n          )\r\n        )}\r\n\r\n        {/* Footer */}\r\n        <footer className=\"dashboard-footer\" style={{ \r\n          marginTop: '32px',\r\n          padding: '20px',\r\n          textAlign: 'center',\r\n          color: '#64748b',\r\n          fontSize: '14px'\r\n        }}>\r\n          © {new Date().getFullYear()} vHealth - Your Comprehensive Health Platform\r\n        </footer>\r\n        \r\n      </div> {/* End Main Content Area */}\r\n\r\n      {/* ImageUploadModal - always available */}\r\n      <ImageUploadModal\r\n        isOpen={isUploadModalOpen}\r\n        onClose={() => setIsUploadModalOpen(false)}\r\n        onAnalysisComplete={handleAnalysisComplete}\r\n        title=\"Upload Image\"\r\n        subtitle=\"Upload images for analysis\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchResults;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}