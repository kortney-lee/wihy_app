{"ast":null,"code":"import _objectSpread from\"C:/repo/wihy_ui/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{createPortal}from'react-dom';import'./MultiAuthLogin.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MultiAuthLogin=_ref=>{var _user$name;let{position='top-right',className='',onUserChange,onSignIn,onSignOut,customProviders,storageKey='vhealth_user',title='Sign in to WiHy',disclaimer='Your health data is secure and private. We only use your account for authentication.'}=_ref;const[user,setUser]=useState(null);const[showProviders,setShowProviders]=useState(false);const[showDropdown,setShowDropdown]=useState(false);const[loading,setLoading]=useState(false);// Default authentication providers configuration\nconst defaultAuthProviders=[{name:'Google',id:'google',icon:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"provider-icon\",children:[/*#__PURE__*/_jsx(\"path\",{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"})]}),color:'#4285F4',clientId:process.env.REACT_APP_GOOGLE_CLIENT_ID||'your-google-client-id',authUrl:'https://accounts.google.com/oauth/authorize'},{name:'Microsoft',id:'microsoft',icon:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",className:\"provider-icon\",children:[/*#__PURE__*/_jsx(\"path\",{fill:\"#F25022\",d:\"M1 1h10v10H1z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#00A4EF\",d:\"M13 1h10v10H13z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#7FBA00\",d:\"M1 13h10v10H1z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#FFB900\",d:\"M13 13h10v10H13z\"})]}),color:'#0078D4',clientId:process.env.REACT_APP_MICROSOFT_CLIENT_ID||'your-microsoft-client-id',authUrl:'https://login.microsoftonline.com/common/oauth2/v2.0/authorize'},{name:'Apple',id:'apple',icon:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",className:\"provider-icon\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"#000\",d:\"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z\"})}),color:'#000',clientId:process.env.REACT_APP_APPLE_CLIENT_ID||'your-apple-client-id',authUrl:'https://appleid.apple.com/auth/authorize'},{name:'Facebook',id:'facebook',icon:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",className:\"provider-icon\",children:/*#__PURE__*/_jsx(\"path\",{fill:\"#1877F2\",d:\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"})}),color:'#1877F2',clientId:process.env.REACT_APP_FACEBOOK_CLIENT_ID||'your-facebook-client-id',authUrl:'https://www.facebook.com/v18.0/dialog/oauth'}];const authProviders=customProviders||defaultAuthProviders;useEffect(()=>{// Check if user is already logged in\nconst savedUser=localStorage.getItem(storageKey);if(savedUser){try{const parsedUser=JSON.parse(savedUser);setUser(parsedUser);// IMPORTANT: Wrap this in a conditional to prevent excessive logging\nif(!user){onUserChange===null||onUserChange===void 0?void 0:onUserChange(parsedUser);}}catch(error){safeLog('Error parsing saved user',error);localStorage.removeItem(storageKey);}}// Handle OAuth callback\nconst urlParams=new URLSearchParams(window.location.search);const code=urlParams.get('code');const state=urlParams.get('state');if(code&&state&&!user){handleOAuthCallback(code,state);}},[storageKey]);// Remove onUserChange from dependencies\n// Manage body class for modal state\nuseEffect(()=>{if(showProviders||showDropdown){document.body.classList.add('modal-open');}else{document.body.classList.remove('modal-open');}// Cleanup function to remove class when component unmounts\nreturn()=>{document.body.classList.remove('modal-open');};},[showProviders,showDropdown]);const handleOAuthCallback=async(code,state)=>{setLoading(true);try{const provider=state;// TODO: Replace with actual API call to your backend\n// const response = await fetch('/api/auth/oauth/callback', {\n//   method: 'POST',\n//   headers: { 'Content-Type': 'application/json' },\n//   body: JSON.stringify({ code, state, provider })\n// });\n// const userData = await response.json();\n// For demo purposes, simulate a successful login\nawait new Promise(resolve=>setTimeout(resolve,1000));const mockUser={id:\"\".concat(provider,\"-123456\"),name:\"User from \".concat(provider.charAt(0).toUpperCase()+provider.slice(1)),email:\"user@\".concat(provider==='microsoft'?'outlook.com':provider,\".com\"),picture:\"https://via.placeholder.com/40/\".concat(getProviderColor(provider).replace('#',''),\"/ffffff?text=\").concat(provider.charAt(0).toUpperCase()),provider};setUser(mockUser);localStorage.setItem(storageKey,JSON.stringify(mockUser));onUserChange===null||onUserChange===void 0?void 0:onUserChange(mockUser);onSignIn===null||onSignIn===void 0?void 0:onSignIn(mockUser);// Clean up URL\nwindow.history.replaceState({},document.title,window.location.pathname);}catch(error){// console.error('OAuth callback error:', error);\nsafeLog('OAuth callback error',error);}finally{setLoading(false);}};const getProviderColor=provider=>{const providerObj=authProviders.find(p=>p.id===provider);return(providerObj===null||providerObj===void 0?void 0:providerObj.color)||'#666';};const handleProviderLogin=provider=>{const params=new URLSearchParams(_objectSpread(_objectSpread({client_id:provider.clientId,redirect_uri:window.location.origin,response_type:'code',scope:getProviderScopes(provider.id),state:provider.id},provider.id==='microsoft'&&{response_mode:'query'}),provider.id==='apple'&&{response_mode:'form_post'}));const authUrl=\"\".concat(provider.authUrl,\"?\").concat(params.toString());window.location.href=authUrl;};const getProviderScopes=providerId=>{const scopes={google:'openid profile email',microsoft:'openid profile email',apple:'name email',facebook:'email public_profile'};return scopes[providerId]||'profile email';};const handleSignOut=()=>{setUser(null);localStorage.removeItem(storageKey);setShowDropdown(false);setShowProviders(false);onUserChange===null||onUserChange===void 0?void 0:onUserChange(null);onSignOut===null||onSignOut===void 0?void 0:onSignOut();};const handleLoginClick=()=>{if(user){setShowDropdown(!showDropdown);}else{setShowProviders(!showProviders);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"multi-auth-container \".concat(position,\" \").concat(className),children:[/*#__PURE__*/_jsx(\"button\",{className:\"login-icon \".concat(user?'authenticated':''),onClick:handleLoginClick,disabled:loading,\"aria-label\":user?'User menu':'Sign in',children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"login-spinner\"}):user?user.picture?/*#__PURE__*/_jsx(\"img\",{src:user.picture,alt:\"Profile\",className:\"profile-image\"}):/*#__PURE__*/_jsx(\"div\",{className:\"profile-initial\",style:{backgroundColor:getProviderColor(user.provider)},children:((_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0))||'U'}):/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"})})}),!user&&showProviders&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-overlay\",onClick:()=>{setShowProviders(false);setShowDropdown(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"providers-popup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"providers-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowProviders(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"providers-list\",children:authProviders.map(provider=>/*#__PURE__*/_jsxs(\"button\",{className:\"provider-button\",onClick:()=>handleProviderLogin(provider),style:{'--provider-color':provider.color},children:[provider.icon,/*#__PURE__*/_jsxs(\"span\",{children:[\"Continue with \",provider.name]})]},provider.id))}),/*#__PURE__*/_jsx(\"p\",{className:\"providers-disclaimer\",children:disclaimer})]})]}),document.body),user&&showDropdown&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-overlay\",onClick:()=>{setShowProviders(false);setShowDropdown(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-dropdown\",style:{position:'fixed',top:'60px',right:'20px',zIndex:10001},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-name\",children:user.name}),/*#__PURE__*/_jsx(\"div\",{className:\"user-email\",children:user.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-provider\",children:[\"Signed in with \",user.provider.charAt(0).toUpperCase()+user.provider.slice(1)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-divider\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"dropdown-item\",onClick:handleSignOut,children:[/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",className:\"dropdown-icon\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z\"})}),\"Sign Out\"]})]})]}),document.body)]});};export default MultiAuthLogin;// Add this helper function at the top of your file\nconst safeLog=(message,data)=>{if(data===undefined){console.log(message);return;}try{if(typeof data==='object'&&data!==null){console.log(message,JSON.stringify(data));}else{console.log(message,data);}}catch(error){console.log(message,'(Object could not be stringified)');}};","map":{"version":3,"names":["React","useState","useEffect","createPortal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MultiAuthLogin","_ref","_user$name","position","className","onUserChange","onSignIn","onSignOut","customProviders","storageKey","title","disclaimer","user","setUser","showProviders","setShowProviders","showDropdown","setShowDropdown","loading","setLoading","defaultAuthProviders","name","id","icon","viewBox","children","fill","d","color","clientId","process","env","REACT_APP_GOOGLE_CLIENT_ID","authUrl","REACT_APP_MICROSOFT_CLIENT_ID","REACT_APP_APPLE_CLIENT_ID","REACT_APP_FACEBOOK_CLIENT_ID","authProviders","savedUser","localStorage","getItem","parsedUser","JSON","parse","error","safeLog","removeItem","urlParams","URLSearchParams","window","location","search","code","get","state","handleOAuthCallback","document","body","classList","add","remove","provider","Promise","resolve","setTimeout","mockUser","concat","charAt","toUpperCase","slice","email","picture","getProviderColor","replace","setItem","stringify","history","replaceState","pathname","providerObj","find","p","handleProviderLogin","params","_objectSpread","client_id","redirect_uri","origin","response_type","scope","getProviderScopes","response_mode","toString","href","providerId","scopes","google","microsoft","apple","facebook","handleSignOut","handleLoginClick","onClick","disabled","src","alt","style","backgroundColor","map","top","right","zIndex","message","data","undefined","console","log"],"sources":["C:/repo/wihy_ui/client/src/components/shared/MultiAuthLogin.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport './MultiAuthLogin.css';\r\n\r\nexport interface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  picture?: string;\r\n  provider: 'google' | 'microsoft' | 'apple' | 'facebook';\r\n}\r\n\r\nexport interface AuthProvider {\r\n  name: string;\r\n  id: 'google' | 'microsoft' | 'apple' | 'facebook';\r\n  icon: React.ReactNode; // Changed from JSX.Element\r\n  color: string;\r\n  clientId: string;\r\n  authUrl: string;\r\n}\r\n\r\ninterface MultiAuthLoginProps {\r\n  position?: 'top-right' | 'inline';\r\n  className?: string;\r\n  onUserChange?: (user: User | null) => void;\r\n  onSignIn?: (user: User) => void;\r\n  onSignOut?: () => void;\r\n  customProviders?: AuthProvider[];\r\n  storageKey?: string;\r\n  title?: string;\r\n  disclaimer?: string;\r\n}\r\n\r\nconst MultiAuthLogin: React.FC<MultiAuthLoginProps> = ({\r\n  position = 'top-right',\r\n  className = '',\r\n  onUserChange,\r\n  onSignIn,\r\n  onSignOut,\r\n  customProviders,\r\n  storageKey = 'vhealth_user',\r\n  title = 'Sign in to WiHy',\r\n  disclaimer = 'Your health data is secure and private. We only use your account for authentication.'\r\n}) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [showProviders, setShowProviders] = useState(false);\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Default authentication providers configuration\r\n  const defaultAuthProviders: AuthProvider[] = [\r\n    {\r\n      name: 'Google',\r\n      id: 'google',\r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" className=\"provider-icon\">\r\n          <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\r\n          <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\r\n          <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\r\n          <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\r\n        </svg>\r\n      ),\r\n      color: '#4285F4',\r\n      clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID || 'your-google-client-id',\r\n      authUrl: 'https://accounts.google.com/oauth/authorize'\r\n    },\r\n    {\r\n      name: 'Microsoft',\r\n      id: 'microsoft',\r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" className=\"provider-icon\">\r\n          <path fill=\"#F25022\" d=\"M1 1h10v10H1z\"/>\r\n          <path fill=\"#00A4EF\" d=\"M13 1h10v10H13z\"/>\r\n          <path fill=\"#7FBA00\" d=\"M1 13h10v10H1z\"/>\r\n          <path fill=\"#FFB900\" d=\"M13 13h10v10H13z\"/>\r\n        </svg>\r\n      ),\r\n      color: '#0078D4',\r\n      clientId: process.env.REACT_APP_MICROSOFT_CLIENT_ID || 'your-microsoft-client-id',\r\n      authUrl: 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize'\r\n    },\r\n    {\r\n      name: 'Apple',\r\n      id: 'apple',\r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" className=\"provider-icon\">\r\n          <path fill=\"#000\" d=\"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z\"/>\r\n        </svg>\r\n      ),\r\n      color: '#000',\r\n      clientId: process.env.REACT_APP_APPLE_CLIENT_ID || 'your-apple-client-id',\r\n      authUrl: 'https://appleid.apple.com/auth/authorize'\r\n    },\r\n    {\r\n      name: 'Facebook',\r\n      id: 'facebook',\r\n      icon: (\r\n        <svg viewBox=\"0 0 24 24\" className=\"provider-icon\">\r\n          <path fill=\"#1877F2\" d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/>\r\n        </svg>\r\n      ),\r\n      color: '#1877F2',\r\n      clientId: process.env.REACT_APP_FACEBOOK_CLIENT_ID || 'your-facebook-client-id',\r\n      authUrl: 'https://www.facebook.com/v18.0/dialog/oauth'\r\n    }\r\n  ];\r\n\r\n  const authProviders = customProviders || defaultAuthProviders;\r\n\r\n  useEffect(() => {\r\n    // Check if user is already logged in\r\n    const savedUser = localStorage.getItem(storageKey);\r\n    if (savedUser) {\r\n      try {\r\n        const parsedUser = JSON.parse(savedUser);\r\n        setUser(parsedUser);\r\n        // IMPORTANT: Wrap this in a conditional to prevent excessive logging\r\n        if (!user) {\r\n          onUserChange?.(parsedUser);\r\n        }\r\n      } catch (error) {\r\n        safeLog('Error parsing saved user', error);\r\n        localStorage.removeItem(storageKey);\r\n      }\r\n    }\r\n\r\n    // Handle OAuth callback\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const code = urlParams.get('code');\r\n    const state = urlParams.get('state');\r\n    \r\n    if (code && state && !user) {\r\n      handleOAuthCallback(code, state);\r\n    }\r\n  }, [storageKey]); // Remove onUserChange from dependencies\r\n\r\n  // Manage body class for modal state\r\n  useEffect(() => {\r\n    if (showProviders || showDropdown) {\r\n      document.body.classList.add('modal-open');\r\n    } else {\r\n      document.body.classList.remove('modal-open');\r\n    }\r\n\r\n    // Cleanup function to remove class when component unmounts\r\n    return () => {\r\n      document.body.classList.remove('modal-open');\r\n    };\r\n  }, [showProviders, showDropdown]);\r\n\r\n  const handleOAuthCallback = async (code: string, state: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const provider = state as 'google' | 'microsoft' | 'apple' | 'facebook';\r\n      \r\n      // TODO: Replace with actual API call to your backend\r\n      // const response = await fetch('/api/auth/oauth/callback', {\r\n      //   method: 'POST',\r\n      //   headers: { 'Content-Type': 'application/json' },\r\n      //   body: JSON.stringify({ code, state, provider })\r\n      // });\r\n      // const userData = await response.json();\r\n      \r\n      // For demo purposes, simulate a successful login\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      const mockUser: User = {\r\n        id: `${provider}-123456`,\r\n        name: `User from ${provider.charAt(0).toUpperCase() + provider.slice(1)}`,\r\n        email: `user@${provider === 'microsoft' ? 'outlook.com' : provider}.com`,\r\n        picture: `https://via.placeholder.com/40/${getProviderColor(provider).replace('#', '')}/ffffff?text=${provider.charAt(0).toUpperCase()}`,\r\n        provider\r\n      };\r\n\r\n      setUser(mockUser);\r\n      localStorage.setItem(storageKey, JSON.stringify(mockUser));\r\n      onUserChange?.(mockUser);\r\n      onSignIn?.(mockUser);\r\n      \r\n      // Clean up URL\r\n      window.history.replaceState({}, document.title, window.location.pathname);\r\n    } catch (error) {\r\n      // console.error('OAuth callback error:', error);\r\n      safeLog('OAuth callback error', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getProviderColor = (provider: string): string => {\r\n    const providerObj = authProviders.find(p => p.id === provider);\r\n    return providerObj?.color || '#666';\r\n  };\r\n\r\n  const handleProviderLogin = (provider: AuthProvider) => {\r\n    const params = new URLSearchParams({\r\n      client_id: provider.clientId,\r\n      redirect_uri: window.location.origin,\r\n      response_type: 'code',\r\n      scope: getProviderScopes(provider.id),\r\n      state: provider.id,\r\n      ...(provider.id === 'microsoft' && { response_mode: 'query' }),\r\n      ...(provider.id === 'apple' && { response_mode: 'form_post' })\r\n    });\r\n\r\n    const authUrl = `${provider.authUrl}?${params.toString()}`;\r\n    window.location.href = authUrl;\r\n  };\r\n\r\n  const getProviderScopes = (providerId: string): string => {\r\n    const scopes = {\r\n      google: 'openid profile email',\r\n      microsoft: 'openid profile email',\r\n      apple: 'name email',\r\n      facebook: 'email public_profile'\r\n    };\r\n    return scopes[providerId as keyof typeof scopes] || 'profile email';\r\n  };\r\n\r\n  const handleSignOut = () => {\r\n    setUser(null);\r\n    localStorage.removeItem(storageKey);\r\n    setShowDropdown(false);\r\n    setShowProviders(false);\r\n    onUserChange?.(null);\r\n    onSignOut?.();\r\n  };\r\n\r\n  const handleLoginClick = () => {\r\n    if (user) {\r\n      setShowDropdown(!showDropdown);\r\n    } else {\r\n      setShowProviders(!showProviders);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`multi-auth-container ${position} ${className}`}>\r\n      {/* Main Login Button */}\r\n      <button \r\n        className={`login-icon ${user ? 'authenticated' : ''}`}\r\n        onClick={handleLoginClick}\r\n        disabled={loading}\r\n        aria-label={user ? 'User menu' : 'Sign in'}\r\n      >\r\n        {loading ? (\r\n          <div className=\"login-spinner\"></div>\r\n        ) : user ? (\r\n          user.picture ? (\r\n            <img \r\n              src={user.picture} \r\n              alt=\"Profile\" \r\n              className=\"profile-image\"\r\n            />\r\n          ) : (\r\n            <div \r\n              className=\"profile-initial\"\r\n              style={{ backgroundColor: getProviderColor(user.provider) }}\r\n            >\r\n              {user.name?.charAt(0) || 'U'}\r\n            </div>\r\n          )\r\n        ) : (\r\n          <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n            <path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/>\r\n          </svg>\r\n        )}\r\n      </button>\r\n\r\n      {/* Provider Selection Popup - Render via portal to avoid container conflicts */}\r\n      {!user && showProviders && createPortal(\r\n        <>\r\n          <div \r\n            className=\"auth-overlay\" \r\n            onClick={() => {\r\n              setShowProviders(false);\r\n              setShowDropdown(false);\r\n            }}\r\n          ></div>\r\n          <div className=\"providers-popup\">\r\n            <div className=\"providers-header\">\r\n              <h3>{title}</h3>\r\n              <button \r\n                className=\"close-button\"\r\n                onClick={() => setShowProviders(false)}\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n            <div className=\"providers-list\">\r\n              {authProviders.map((provider) => (\r\n                <button\r\n                  key={provider.id}\r\n                  className=\"provider-button\"\r\n                  onClick={() => handleProviderLogin(provider)}\r\n                  style={{ '--provider-color': provider.color } as React.CSSProperties}\r\n                >\r\n                  {provider.icon}\r\n                  <span>Continue with {provider.name}</span>\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <p className=\"providers-disclaimer\">\r\n              {disclaimer}\r\n            </p>\r\n          </div>\r\n        </>,\r\n        document.body\r\n      )}\r\n\r\n      {/* User Dropdown - Render via portal */}\r\n      {user && showDropdown && createPortal(\r\n        <>\r\n          <div \r\n            className=\"auth-overlay\" \r\n            onClick={() => {\r\n              setShowProviders(false);\r\n              setShowDropdown(false);\r\n            }}\r\n          ></div>\r\n          <div className=\"user-dropdown\" style={{ \r\n            position: 'fixed',\r\n            top: '60px',\r\n            right: '20px',\r\n            zIndex: 10001\r\n          }}>\r\n            <div className=\"user-info\">\r\n              <div className=\"user-name\">{user.name}</div>\r\n              <div className=\"user-email\">{user.email}</div>\r\n              <div className=\"user-provider\">\r\n                Signed in with {user.provider.charAt(0).toUpperCase() + user.provider.slice(1)}\r\n              </div>\r\n            </div>\r\n            <div className=\"dropdown-divider\"></div>\r\n            <button className=\"dropdown-item\" onClick={handleSignOut}>\r\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"dropdown-icon\">\r\n                <path d=\"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z\"/>\r\n              </svg>\r\n              Sign Out\r\n            </button>\r\n          </div>\r\n        </>,\r\n        document.body\r\n      )}\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MultiAuthLogin;\r\n\r\n// Add this helper function at the top of your file\r\nconst safeLog = (message: string, data?: any) => {\r\n  if (data === undefined) {\r\n    console.log(message);\r\n    return;\r\n  }\r\n  \r\n  try {\r\n    if (typeof data === 'object' && data !== null) {\r\n      console.log(message, JSON.stringify(data));\r\n    } else {\r\n      console.log(message, data);\r\n    }\r\n  } catch (error) {\r\n    console.log(message, '(Object could not be stringified)');\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}